import{c as A,j as e,e as dt,u as fe,d as Dn,a as K}from"./index.BDwUue4i.js";import{r as a}from"./index.D4lIrffr.js";import{B as Y}from"./button.BBqis-m9.js";import{I as Fe}from"./input.DVIqiHmA.js";import{C as Ce}from"./card.DLdw4ClT.js";import{B as ot,S as Rn,a as le,E as In,T as En,b as rt,C as Pn,U as An}from"./scroll-area.uohAyeuR.js";import{D as Le,b as $e,c as Ue,d as Ge}from"./dialog.epzmHarR.js";import{A as Tn,b as On,a as Fn}from"./alert.DYfTMRW2.js";import{d as ut,I as Ln,R as $n,T as Un,a as Gn,b as Ke,c as Be}from"./tabs.BHKcKwpR.js";import{c as mt,b as j,P as oe,e as Kn,a as Bn}from"./index.CWpJmkEa.js";import{c as Vn,u as zn}from"./index.DPnI-K_u.js";import{P as qn,u as Hn,R as Yn,F as Wn,D as Xn,h as Jn}from"./Combination.DEQktaGu.js";import{c as pt,A as Qn,C as Zn,R as eo,b as to}from"./index.BIhjN8Ec.js";import{P as De}from"./index.BXhwHFWz.js";import{a as ft,u as st}from"./index.7Xl9-Kly.js";import{C as no}from"./chevron-right.CaEU_g0D.js";import{a as ht,L as Se,C as oo}from"./loader-circle.CFEkYbsw.js";import{C as ro}from"./circle.CZXr8haV.js";import{M as so}from"./message-square.CgYO-VTg.js";import{S as at}from"./sparkles.CBLYbECK.js";import{P as ao}from"./plus.B0ra3a6p.js";import{F as de}from"./file-text.CGEFS-_6.js";import"./x.D5giPUq_.js";import"./index.C_ksqHmP.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ct=A("bot",co);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lo=A("copy",io);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],mo=A("download",uo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fo=A("eye-off",po);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],xo=A("file-code",ho);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],wo=A("file-image",go);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],yo=A("file-plus",vo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],No=A("folder-open",jo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Mo=A("send",bo);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],it=A("share-2",Co);var Ve=["Enter"," "],So=["ArrowDown","PageUp","Home"],xt=["ArrowUp","PageDown","End"],ko=[...So,...xt],_o={ltr:[...Ve,"ArrowRight"],rtl:[...Ve,"ArrowLeft"]},Do={ltr:["ArrowLeft"],rtl:["ArrowRight"]},he="Menu",[me,Ro,Io]=Vn(he),[W,gt]=mt(he,[Io,pt,ut]),Re=pt(),wt=ut(),[Eo,X]=W(he),[Po,xe]=W(he),vt=t=>{const{__scopeMenu:o,open:n=!1,children:s,dir:c,onOpenChange:i,modal:l=!0}=t,m=Re(o),[w,g]=a.useState(null),f=a.useRef(!1),d=ft(i),v=zn(c);return a.useEffect(()=>{const S=()=>{f.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>f.current=!1;return document.addEventListener("keydown",S,{capture:!0}),()=>{document.removeEventListener("keydown",S,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),e.jsx(eo,{...m,children:e.jsx(Eo,{scope:o,open:n,onOpenChange:d,content:w,onContentChange:g,children:e.jsx(Po,{scope:o,onClose:a.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:v,modal:l,children:s})})})};vt.displayName=he;var Ao="MenuAnchor",qe=a.forwardRef((t,o)=>{const{__scopeMenu:n,...s}=t,c=Re(n);return e.jsx(Qn,{...c,...s,ref:o})});qe.displayName=Ao;var He="MenuPortal",[To,yt]=W(He,{forceMount:void 0}),jt=t=>{const{__scopeMenu:o,forceMount:n,children:s,container:c}=t,i=X(He,o);return e.jsx(To,{scope:o,forceMount:n,children:e.jsx(De,{present:n||i.open,children:e.jsx(qn,{asChild:!0,container:c,children:s})})})};jt.displayName=He;var R="MenuContent",[Oo,Ye]=W(R),Nt=a.forwardRef((t,o)=>{const n=yt(R,t.__scopeMenu),{forceMount:s=n.forceMount,...c}=t,i=X(R,t.__scopeMenu),l=xe(R,t.__scopeMenu);return e.jsx(me.Provider,{scope:t.__scopeMenu,children:e.jsx(De,{present:s||i.open,children:e.jsx(me.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(Fo,{...c,ref:o}):e.jsx(Lo,{...c,ref:o})})})})}),Fo=a.forwardRef((t,o)=>{const n=X(R,t.__scopeMenu),s=a.useRef(null),c=fe(o,s);return a.useEffect(()=>{const i=s.current;if(i)return Jn(i)},[]),e.jsx(We,{...t,ref:c,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:j(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Lo=a.forwardRef((t,o)=>{const n=X(R,t.__scopeMenu);return e.jsx(We,{...t,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$o=Dn("MenuContent.ScrollLock"),We=a.forwardRef((t,o)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:c,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:m,onEntryFocus:w,onEscapeKeyDown:g,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:v,onDismiss:S,disableOutsideScroll:N,...F}=t,E=X(R,n),L=xe(R,n),Pe=Re(n),ge=wt(n),re=Ro(n),[Ae,we]=a.useState(null),B=a.useRef(null),ve=fe(o,B,E.onContentChange),J=a.useRef(0),V=a.useRef(""),ye=a.useRef(0),Q=a.useRef(null),se=a.useRef("right"),I=a.useRef(0),je=N?Yn:a.Fragment,$=N?{as:$o,allowPinchZoom:!0}:void 0,Ne=p=>{const T=V.current+p,O=re().filter(C=>!C.disabled),z=document.activeElement,Z=O.find(C=>C.ref.current===z)?.textValue,ae=O.map(C=>C.textValue),ee=Jo(ae,T,Z),P=O.find(C=>C.textValue===ee)?.ref.current;(function C(be){V.current=be,window.clearTimeout(J.current),be!==""&&(J.current=window.setTimeout(()=>C(""),1e3))})(T),P&&setTimeout(()=>P.focus())};a.useEffect(()=>()=>window.clearTimeout(J.current),[]),Hn();const U=a.useCallback(p=>se.current===Q.current?.side&&Zo(p,Q.current?.area),[]);return e.jsx(Oo,{scope:n,searchRef:V,onItemEnter:a.useCallback(p=>{U(p)&&p.preventDefault()},[U]),onItemLeave:a.useCallback(p=>{U(p)||(B.current?.focus(),we(null))},[U]),onTriggerLeave:a.useCallback(p=>{U(p)&&p.preventDefault()},[U]),pointerGraceTimerRef:ye,onPointerGraceIntentChange:a.useCallback(p=>{Q.current=p},[]),children:e.jsx(je,{...$,children:e.jsx(Wn,{asChild:!0,trapped:c,onMountAutoFocus:j(i,p=>{p.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Xn,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:g,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:v,onDismiss:S,children:e.jsx($n,{asChild:!0,...ge,dir:L.dir,orientation:"vertical",loop:s,currentTabStopId:Ae,onCurrentTabStopIdChange:we,onEntryFocus:j(w,p=>{L.isUsingKeyboardRef.current||p.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Zn,{role:"menu","aria-orientation":"vertical","data-state":Lt(E.open),"data-radix-menu-content":"",dir:L.dir,...Pe,...F,ref:ve,style:{outline:"none",...F.style},onKeyDown:j(F.onKeyDown,p=>{const O=p.target.closest("[data-radix-menu-content]")===p.currentTarget,z=p.ctrlKey||p.altKey||p.metaKey,Z=p.key.length===1;O&&(p.key==="Tab"&&p.preventDefault(),!z&&Z&&Ne(p.key));const ae=B.current;if(p.target!==ae||!ko.includes(p.key))return;p.preventDefault();const P=re().filter(C=>!C.disabled).map(C=>C.ref.current);xt.includes(p.key)&&P.reverse(),Wo(P)}),onBlur:j(t.onBlur,p=>{p.currentTarget.contains(p.target)||(window.clearTimeout(J.current),V.current="")}),onPointerMove:j(t.onPointerMove,pe(p=>{const T=p.target,O=I.current!==p.clientX;if(p.currentTarget.contains(T)&&O){const z=p.clientX>I.current?"right":"left";se.current=z,I.current=p.clientX}}))})})})})})})});Nt.displayName=R;var Uo="MenuGroup",Xe=a.forwardRef((t,o)=>{const{__scopeMenu:n,...s}=t;return e.jsx(oe.div,{role:"group",...s,ref:o})});Xe.displayName=Uo;var Go="MenuLabel",bt=a.forwardRef((t,o)=>{const{__scopeMenu:n,...s}=t;return e.jsx(oe.div,{...s,ref:o})});bt.displayName=Go;var ke="MenuItem",lt="menu.itemSelect",Ie=a.forwardRef((t,o)=>{const{disabled:n=!1,onSelect:s,...c}=t,i=a.useRef(null),l=xe(ke,t.__scopeMenu),m=Ye(ke,t.__scopeMenu),w=fe(o,i),g=a.useRef(!1),f=()=>{const d=i.current;if(!n&&d){const v=new CustomEvent(lt,{bubbles:!0,cancelable:!0});d.addEventListener(lt,S=>s?.(S),{once:!0}),Kn(d,v),v.defaultPrevented?g.current=!1:l.onClose()}};return e.jsx(Mt,{...c,ref:w,disabled:n,onClick:j(t.onClick,f),onPointerDown:d=>{t.onPointerDown?.(d),g.current=!0},onPointerUp:j(t.onPointerUp,d=>{g.current||d.currentTarget?.click()}),onKeyDown:j(t.onKeyDown,d=>{const v=m.searchRef.current!=="";n||v&&d.key===" "||Ve.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Ie.displayName=ke;var Mt=a.forwardRef((t,o)=>{const{__scopeMenu:n,disabled:s=!1,textValue:c,...i}=t,l=Ye(ke,n),m=wt(n),w=a.useRef(null),g=fe(o,w),[f,d]=a.useState(!1),[v,S]=a.useState("");return a.useEffect(()=>{const N=w.current;N&&S((N.textContent??"").trim())},[i.children]),e.jsx(me.ItemSlot,{scope:n,disabled:s,textValue:c??v,children:e.jsx(Ln,{asChild:!0,...m,focusable:!s,children:e.jsx(oe.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:g,onPointerMove:j(t.onPointerMove,pe(N=>{s?l.onItemLeave(N):(l.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:j(t.onPointerLeave,pe(N=>l.onItemLeave(N))),onFocus:j(t.onFocus,()=>d(!0)),onBlur:j(t.onBlur,()=>d(!1))})})})}),Ko="MenuCheckboxItem",Ct=a.forwardRef((t,o)=>{const{checked:n=!1,onCheckedChange:s,...c}=t;return e.jsx(Rt,{scope:t.__scopeMenu,checked:n,children:e.jsx(Ie,{role:"menuitemcheckbox","aria-checked":_e(n)?"mixed":n,...c,ref:o,"data-state":Qe(n),onSelect:j(c.onSelect,()=>s?.(_e(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Ct.displayName=Ko;var St="MenuRadioGroup",[Bo,Vo]=W(St,{value:void 0,onValueChange:()=>{}}),kt=a.forwardRef((t,o)=>{const{value:n,onValueChange:s,...c}=t,i=ft(s);return e.jsx(Bo,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(Xe,{...c,ref:o})})});kt.displayName=St;var _t="MenuRadioItem",Dt=a.forwardRef((t,o)=>{const{value:n,...s}=t,c=Vo(_t,t.__scopeMenu),i=n===c.value;return e.jsx(Rt,{scope:t.__scopeMenu,checked:i,children:e.jsx(Ie,{role:"menuitemradio","aria-checked":i,...s,ref:o,"data-state":Qe(i),onSelect:j(s.onSelect,()=>c.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Dt.displayName=_t;var Je="MenuItemIndicator",[Rt,zo]=W(Je,{checked:!1}),It=a.forwardRef((t,o)=>{const{__scopeMenu:n,forceMount:s,...c}=t,i=zo(Je,n);return e.jsx(De,{present:s||_e(i.checked)||i.checked===!0,children:e.jsx(oe.span,{...c,ref:o,"data-state":Qe(i.checked)})})});It.displayName=Je;var qo="MenuSeparator",Et=a.forwardRef((t,o)=>{const{__scopeMenu:n,...s}=t;return e.jsx(oe.div,{role:"separator","aria-orientation":"horizontal",...s,ref:o})});Et.displayName=qo;var Ho="MenuArrow",Pt=a.forwardRef((t,o)=>{const{__scopeMenu:n,...s}=t,c=Re(n);return e.jsx(to,{...c,...s,ref:o})});Pt.displayName=Ho;var Yo="MenuSub",[ps,At]=W(Yo),ue="MenuSubTrigger",Tt=a.forwardRef((t,o)=>{const n=X(ue,t.__scopeMenu),s=xe(ue,t.__scopeMenu),c=At(ue,t.__scopeMenu),i=Ye(ue,t.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:m,onPointerGraceIntentChange:w}=i,g={__scopeMenu:t.__scopeMenu},f=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>f,[f]),a.useEffect(()=>{const d=m.current;return()=>{window.clearTimeout(d),w(null)}},[m,w]),e.jsx(qe,{asChild:!0,...g,children:e.jsx(Mt,{id:c.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":c.contentId,"data-state":Lt(n.open),...t,ref:dt(o,c.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:j(t.onPointerMove,pe(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:j(t.onPointerLeave,pe(d=>{f();const v=n.content?.getBoundingClientRect();if(v){const S=n.content?.dataset.side,N=S==="right",F=N?-5:5,E=v[N?"left":"right"],L=v[N?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+F,y:d.clientY},{x:E,y:v.top},{x:L,y:v.top},{x:L,y:v.bottom},{x:E,y:v.bottom}],side:S}),window.clearTimeout(m.current),m.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:j(t.onKeyDown,d=>{const v=i.searchRef.current!=="";t.disabled||v&&d.key===" "||_o[s.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});Tt.displayName=ue;var Ot="MenuSubContent",Ft=a.forwardRef((t,o)=>{const n=yt(R,t.__scopeMenu),{forceMount:s=n.forceMount,...c}=t,i=X(R,t.__scopeMenu),l=xe(R,t.__scopeMenu),m=At(Ot,t.__scopeMenu),w=a.useRef(null),g=fe(o,w);return e.jsx(me.Provider,{scope:t.__scopeMenu,children:e.jsx(De,{present:s||i.open,children:e.jsx(me.Slot,{scope:t.__scopeMenu,children:e.jsx(We,{id:m.contentId,"aria-labelledby":m.triggerId,...c,ref:g,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{l.isUsingKeyboardRef.current&&w.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:j(t.onFocusOutside,f=>{f.target!==m.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:j(t.onEscapeKeyDown,f=>{l.onClose(),f.preventDefault()}),onKeyDown:j(t.onKeyDown,f=>{const d=f.currentTarget.contains(f.target),v=Do[l.dir].includes(f.key);d&&v&&(i.onOpenChange(!1),m.trigger?.focus(),f.preventDefault())})})})})})});Ft.displayName=Ot;function Lt(t){return t?"open":"closed"}function _e(t){return t==="indeterminate"}function Qe(t){return _e(t)?"indeterminate":t?"checked":"unchecked"}function Wo(t){const o=document.activeElement;for(const n of t)if(n===o||(n.focus(),document.activeElement!==o))return}function Xo(t,o){return t.map((n,s)=>t[(o+s)%t.length])}function Jo(t,o,n){const c=o.length>1&&Array.from(o).every(g=>g===o[0])?o[0]:o,i=n?t.indexOf(n):-1;let l=Xo(t,Math.max(i,0));c.length===1&&(l=l.filter(g=>g!==n));const w=l.find(g=>g.toLowerCase().startsWith(c.toLowerCase()));return w!==n?w:void 0}function Qo(t,o){const{x:n,y:s}=t;let c=!1;for(let i=0,l=o.length-1;i<o.length;l=i++){const m=o[i],w=o[l],g=m.x,f=m.y,d=w.x,v=w.y;f>s!=v>s&&n<(d-g)*(s-f)/(v-f)+g&&(c=!c)}return c}function Zo(t,o){if(!o)return!1;const n={x:t.clientX,y:t.clientY};return Qo(n,o)}function pe(t){return o=>o.pointerType==="mouse"?t(o):void 0}var er=vt,tr=qe,nr=jt,or=Nt,rr=Xe,sr=bt,ar=Ie,cr=Ct,ir=kt,lr=Dt,dr=It,ur=Et,mr=Pt,pr=Tt,fr=Ft,Ee="DropdownMenu",[hr,fs]=mt(Ee,[gt]),_=gt(),[xr,$t]=hr(Ee),Ut=t=>{const{__scopeDropdownMenu:o,children:n,dir:s,open:c,defaultOpen:i,onOpenChange:l,modal:m=!0}=t,w=_(o),g=a.useRef(null),[f,d]=Bn({prop:c,defaultProp:i??!1,onChange:l,caller:Ee});return e.jsx(xr,{scope:o,triggerId:st(),triggerRef:g,contentId:st(),open:f,onOpenChange:d,onOpenToggle:a.useCallback(()=>d(v=>!v),[d]),modal:m,children:e.jsx(er,{...w,open:f,onOpenChange:d,dir:s,modal:m,children:n})})};Ut.displayName=Ee;var Gt="DropdownMenuTrigger",Kt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...c}=t,i=$t(Gt,n),l=_(n);return e.jsx(tr,{asChild:!0,...l,children:e.jsx(oe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...c,ref:dt(o,i.triggerRef),onPointerDown:j(t.onPointerDown,m=>{!s&&m.button===0&&m.ctrlKey===!1&&(i.onOpenToggle(),i.open||m.preventDefault())}),onKeyDown:j(t.onKeyDown,m=>{s||(["Enter"," "].includes(m.key)&&i.onOpenToggle(),m.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(m.key)&&m.preventDefault())})})})});Kt.displayName=Gt;var gr="DropdownMenuPortal",Bt=t=>{const{__scopeDropdownMenu:o,...n}=t,s=_(o);return e.jsx(nr,{...s,...n})};Bt.displayName=gr;var Vt="DropdownMenuContent",zt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=$t(Vt,n),i=_(n),l=a.useRef(!1);return e.jsx(or,{id:c.contentId,"aria-labelledby":c.triggerId,...i,...s,ref:o,onCloseAutoFocus:j(t.onCloseAutoFocus,m=>{l.current||c.triggerRef.current?.focus(),l.current=!1,m.preventDefault()}),onInteractOutside:j(t.onInteractOutside,m=>{const w=m.detail.originalEvent,g=w.button===0&&w.ctrlKey===!0,f=w.button===2||g;(!c.modal||f)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zt.displayName=Vt;var wr="DropdownMenuGroup",vr=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(rr,{...c,...s,ref:o})});vr.displayName=wr;var yr="DropdownMenuLabel",qt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(sr,{...c,...s,ref:o})});qt.displayName=yr;var jr="DropdownMenuItem",Ht=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(ar,{...c,...s,ref:o})});Ht.displayName=jr;var Nr="DropdownMenuCheckboxItem",Yt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(cr,{...c,...s,ref:o})});Yt.displayName=Nr;var br="DropdownMenuRadioGroup",Mr=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(ir,{...c,...s,ref:o})});Mr.displayName=br;var Cr="DropdownMenuRadioItem",Wt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(lr,{...c,...s,ref:o})});Wt.displayName=Cr;var Sr="DropdownMenuItemIndicator",Xt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(dr,{...c,...s,ref:o})});Xt.displayName=Sr;var kr="DropdownMenuSeparator",Jt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(ur,{...c,...s,ref:o})});Jt.displayName=kr;var _r="DropdownMenuArrow",Dr=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(mr,{...c,...s,ref:o})});Dr.displayName=_r;var Rr="DropdownMenuSubTrigger",Qt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(pr,{...c,...s,ref:o})});Qt.displayName=Rr;var Ir="DropdownMenuSubContent",Zt=a.forwardRef((t,o)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(fr,{...c,...s,ref:o,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zt.displayName=Ir;var Er=Ut,Pr=Kt,Ar=Bt,en=zt,tn=qt,nn=Ht,on=Yt,rn=Wt,sn=Xt,an=Jt,cn=Qt,ln=Zt;const Tr=Er,Or=Pr,Fr=a.forwardRef(({className:t,inset:o,children:n,...s},c)=>e.jsxs(cn,{ref:c,className:K("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",o&&"pl-8",t),...s,children:[n,e.jsx(no,{className:"ml-auto h-4 w-4"})]}));Fr.displayName=cn.displayName;const Lr=a.forwardRef(({className:t,...o},n)=>e.jsx(ln,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o}));Lr.displayName=ln.displayName;const dn=a.forwardRef(({className:t,sideOffset:o=4,...n},s)=>e.jsx(Ar,{children:e.jsx(en,{ref:s,sideOffset:o,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));dn.displayName=en.displayName;const ze=a.forwardRef(({className:t,inset:o,...n},s)=>e.jsx(nn,{ref:s,className:K("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o&&"pl-8",t),...n}));ze.displayName=nn.displayName;const $r=a.forwardRef(({className:t,children:o,checked:n,...s},c)=>e.jsxs(on,{ref:c,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(sn,{children:e.jsx(ht,{className:"h-4 w-4"})})}),o]}));$r.displayName=on.displayName;const Ur=a.forwardRef(({className:t,children:o,...n},s)=>e.jsxs(rn,{ref:s,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(sn,{children:e.jsx(ro,{className:"h-2 w-2 fill-current"})})}),o]}));Ur.displayName=rn.displayName;const Gr=a.forwardRef(({className:t,inset:o,...n},s)=>e.jsx(tn,{ref:s,className:K("px-2 py-1.5 text-sm font-semibold",o&&"pl-8",t),...n}));Gr.displayName=tn.displayName;const Kr=a.forwardRef(({className:t,...o},n)=>e.jsx(an,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",t),...o}));Kr.displayName=an.displayName;function hs(){const[t,o]=a.useState([]),[n,s]=a.useState([]),[c,i]=a.useState([]),[l,m]=a.useState(null),[w,g]=a.useState(""),[f,d]=a.useState(!1),[v,S]=a.useState(!1),[N,F]=a.useState(null),[E,L]=a.useState(null),[Pe,ge]=a.useState(!1),[re,Ae]=a.useState([]),[we,B]=a.useState(!1),[ve,J]=a.useState(""),[V,ye]=a.useState(null),[Q,se]=a.useState(!1),[I,je]=a.useState(null),[$,Ne]=a.useState(!1),[U,p]=a.useState("sources"),[T,O]=a.useState(""),[z,Z]=a.useState(!1),[ae,ee]=a.useState(""),P=a.useRef(null),C=a.useRef(null),be=()=>{C.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{be()},[t]),a.useEffect(()=>{Te(),hn()},[]);function un(r){return!!r&&typeof r=="object"&&Array.isArray(r.conversations)}function mn(r){return!!r&&typeof r=="object"&&Array.isArray(r.documents)}function pn(r){return!!r&&typeof r=="object"&&Array.isArray(r.messages)&&Array.isArray(r.documents)}function fn(r){return!!r&&typeof r=="object"&&Array.isArray(r.documents)}const Te=async()=>{try{const r=await fetch("/api/chat/conversations");if(r.ok){const u=await r.json();un(u)?i(u.conversations):console.warn("Unexpected conversations payload")}}catch(r){console.error("Failed to load conversations:",r)}},hn=async()=>{try{const r=await fetch("/api/chat/documents");if(r.ok){const u=await r.json();mn(u)?s(u.documents):console.warn("Unexpected documents payload")}}catch(r){console.error("Failed to load documents:",r)}},xn=async r=>{try{const u=await fetch(`/api/chat/conversations/${r}`);if(u.ok){const x=await u.json();pn(x)?(o(x.messages),s(x.documents),m(r)):console.warn("Unexpected conversation detail payload")}}catch(u){console.error("Failed to load conversation:",u)}},gn=async r=>{const u=r.target.files;if(!u||u.length===0)return;S(!0);const x=new FormData;Array.from(u).forEach(h=>{x.append("files",h)}),l&&x.append("conversationId",l);try{const h=await fetch("/api/chat/upload",{method:"POST",body:x});if(h.ok){const y=await h.json();if(fn(y)){const b=y.documents.map(M=>({...M,enabled:!0}));s(M=>[...M,...b]),!l&&y.conversationId&&(m(y.conversationId),await Te())}else console.warn("Unexpected upload response payload")}else console.error("Upload failed:",await h.text())}catch(h){console.error("Upload error:",h)}finally{S(!1),P.current&&(P.current.value="")}},Ze=async()=>{if(!w.trim()||f||$)return;const r=w.trim(),u={id:Date.now().toString(),role:"user",content:r,timestamp:new Date};o(h=>[...h,u]),g(""),d(!0),Ne(!0),je(null);const x={id:(Date.now()+1).toString(),role:"assistant",content:"",timestamp:new Date,streaming:!0};o(h=>[...h,x]);try{const h=n.filter(k=>k.enabled!==!1).map(k=>k.id),y=await fetch("/api/chat/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,conversationId:l,documentIds:h})});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const b=y.body?.getReader(),M=new TextDecoder;if(b){let k="",te=[],ce="";for(;;){const{done:ie,value:G}=await b.read();if(ie)break;ce+=M.decode(G,{stream:!0});const ne=ce.split(`

`);ce=ne.pop()||"";for(const q of ne){if(!q.trim())continue;const _n=q.split(`
`);for(const nt of _n)if(nt.startsWith("data: ")){const Me=nt.slice(6).trim();if(!Me||Me==="[DONE]")continue;try{const D=JSON.parse(Me);if(D.chunks&&(Ae(D.chunks),te=D.chunks),D.content&&(k+=D.content,o(Oe=>Oe.map(H=>H.id===x.id?{...H,content:k,citations:te}:H))),D.conversationId&&!l&&(m(D.conversationId),await Te()),D.error){console.error("SSE Error:",D.error),o(Oe=>Oe.map(H=>H.id===x.id?{...H,content:D.error||"An error occurred",streaming:!1}:H));return}}catch(D){console.error("Failed to parse SSE data:",D,"Data:",Me)}}}}if(ce.trim()){const ie=ce.split(`
`);for(const G of ie)if(G.startsWith("data: ")){const ne=G.slice(6).trim();if(ne&&ne!=="[DONE]")try{const q=JSON.parse(ne);q.content&&(k+=q.content)}catch(q){console.error("Failed to parse final SSE data:",q)}}}o(ie=>ie.map(G=>G.id===x.id?{...G,content:k||"No response received",streaming:!1}:G))}}catch(h){console.error("Chat error:",h);let y="Sorry, an error occurred. Please try again.",b=!1;h instanceof Error&&(h.message.includes("workers-ai-failed")||h.message.includes("AI service is at capacity")||h.message.includes("Rate limit exceeded")||h.message.includes("rate limit")||h.message.includes("Daily quota limit reached")||h.message.includes("AI service access denied")||h.message.includes("AI service is temporarily unavailable")||h.message.includes("AI service is not properly configured")||h.message.includes("Concurrency limit")||h.message.includes("concurrent"))&&(y=h.message.split(" - ")[0]||h.message,b=!0,je(y)),o(M=>M.map(k=>k.id===x.id?{...k,content:b?"":y,streaming:!1}:k)),b&&o(M=>M.filter(k=>k.id!==x.id))}finally{d(!1),Ne(!1)}},wn=async r=>{try{(await fetch(`/api/chat/documents/${r}`,{method:"DELETE"})).ok&&s(x=>x.filter(h=>h.id!==r))}catch(u){console.error("Failed to delete document:",u)}},vn=()=>{m(null),o([]),s([])},yn=r=>r<1024?r+" B":r<1024*1024?(r/1024).toFixed(1)+" KB":(r/(1024*1024)).toFixed(1)+" MB",jn=r=>{s(u=>u.map(x=>x.id===r?{...x,enabled:!x.enabled}:x))},Nn=r=>{const u=re.find(x=>x.id===r);u&&(L(u),ge(!0))},bn=(r,u)=>{if(!u||u.length===0)return e.jsx("span",{className:"whitespace-pre-wrap",children:r});const x=r.split(/(\^\[\d+\])/g);return e.jsx("span",{className:"whitespace-pre-wrap",children:x.map((h,y)=>{const b=h.match(/\^\[(\d+)\]/);if(b){const M=parseInt(b[1]);return e.jsx("button",{onClick:()=>Nn(M),className:"inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-primary/20 text-primary hover:bg-primary/30 transition-colors align-super ml-0.5",title:`View source ${M}`,children:M},y)}return e.jsx("span",{children:h},y)})})},Mn=async r=>{const u=t.findIndex(b=>b.id===r);if(u===-1)return;let x=u;if(t[u].role==="assistant"){for(let b=u-1;b>=0;b--)if(t[b].role==="user"){x=b;break}}const h=t[x].content,y=t[u].role==="assistant"?t[u].content:t[u+1]?.content||"";ye(r);try{const b=await fetch("/api/chat/share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:h,answer:y,citations:t[u].citations||re})});if(b.ok){const M=await b.json();(te=>!!te&&typeof te=="object"&&typeof te.shareUrl=="string")(M)?(J(M.shareUrl),B(!0)):console.warn("Unexpected share payload")}else console.error("Failed to create share link")}catch(b){console.error("Error sharing message:",b)}finally{ye(null)}},Cn=async()=>{try{await navigator.clipboard.writeText(ve),se(!0),setTimeout(()=>se(!1),2e3)}catch(r){console.error("Failed to copy:",r)}},et=async r=>{if(!(!l||t.length===0))try{const u=await fetch("/api/chat/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:l,format:r})});if(u.ok){const x=await u.blob(),h=window.URL.createObjectURL(x),y=document.createElement("a");y.href=h,y.download=`conversation-${l}.${r==="markdown"?"md":"json"}`,document.body.appendChild(y),y.click(),window.URL.revokeObjectURL(h),document.body.removeChild(y)}else console.error("Failed to export conversation")}catch(u){console.error("Error exporting conversation:",u)}},Sn=async r=>{F(r),Z(!0);try{const u=await fetch(`/api/chat/documents/${r.id}`);if(u.ok){const x=await u.json();(y=>!!y&&typeof y=="object"&&("content"in y?typeof y.content=="string"||typeof y.content>"u":!0))(x)?ee(x.content||"No preview available"):(console.warn("Unexpected document content payload"),ee("No preview available"))}}catch(u){console.error("Failed to load document content:",u),ee("Failed to load document content")}},kn=r=>r.includes("image")?wo:r.includes("code")||r.includes("json")?xo:de,tt=n.filter(r=>r.name.toLowerCase().includes(T.toLowerCase()));return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-96 border-r bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ot,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"NotebookLM"})]}),e.jsxs(Un,{value:U,onValueChange:p,children:[e.jsxs(Gn,{className:"grid w-full grid-cols-3",children:[e.jsx(Ke,{value:"sources",children:"Sources"}),e.jsx(Ke,{value:"notebook",children:"Notebook"}),e.jsx(Ke,{value:"history",children:"History"})]}),e.jsx(Be,{value:"sources",className:"mt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Fe,{placeholder:"Search documents...",value:T,onChange:r=>O(r.target.value),className:"pl-9"})]}),e.jsx(Y,{className:"w-full gradient-metallic-primary",onClick:()=>P.current?.click(),disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yo,{className:"w-4 h-4 mr-2"}),"Add Sources"]})}),e.jsx(le,{className:"h-[calc(100vh-250px)]",children:e.jsx("div",{className:"space-y-2",children:tt.length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(No,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No sources uploaded"}),e.jsx("p",{className:"text-xs mt-1",children:"Add documents to get started"})]}):tt.map(r=>{const u=kn(r.type);return e.jsx(Ce,{className:`p-3 cursor-pointer transition-all hover:shadow-md ${N?.id===r.id?"ring-2 ring-primary":""}`,onClick:()=>Sn(r),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-muted-foreground flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:r.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[yn(r.size)," â€¢ ",r.chunks," chunks"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Uploaded ",new Date(r.uploadedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:x=>{x.stopPropagation(),jn(r.id)},title:r.enabled?"Disable document":"Enable document",children:r.enabled?e.jsx(In,{className:"w-4 h-4"}):e.jsx(fo,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx(Y,{variant:"ghost",size:"icon",className:"w-8 h-8 hover:text-destructive",onClick:x=>{x.stopPropagation(),wn(r.id)},children:e.jsx(En,{className:"w-4 h-4"})})]})]})})]})},r.id)})})})]})}),e.jsx(Be,{value:"notebook",className:"mt-4",children:e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(rt,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Notebook coming soon"}),e.jsx("p",{className:"text-xs mt-1",children:"Your AI-generated notes and insights"})]})}),e.jsx(Be,{value:"history",className:"mt-4",children:e.jsx(le,{className:"h-[calc(100vh-250px)]",children:e.jsx("div",{className:"space-y-2",children:c.length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(so,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No conversations yet"})]}):c.map(r=>e.jsxs("button",{onClick:()=>xn(r.id),className:`w-full text-left p-3 rounded-lg transition-all group relative ${r.id===l?"bg-gradient-to-r from-gradient-metal-start to-gradient-metal-end text-white shadow-sm":"hover:bg-muted/80"}`,children:[e.jsx("p",{className:`font-medium text-sm truncate ${r.id===l?"text-white":""}`,children:r.title}),e.jsx("p",{className:`text-xs truncate mt-1 ${r.id===l?"text-white/80":"text-muted-foreground"}`,children:r.lastMessage}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${r.id===l?"text-white/60":"text-muted-foreground"}`,children:[e.jsx(Pn,{className:"w-3 h-3"}),new Date(r.timestamp).toLocaleDateString()]})]},r.id))})})})]})]}),e.jsx("input",{ref:P,type:"file",multiple:!0,accept:".txt,.pdf,.doc,.docx,.md,.json,.csv",onChange:gn,className:"hidden"})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"border-b px-6 py-3 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(at,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"AI Assistant"}),n.filter(r=>r.enabled).length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",n.filter(r=>r.enabled).length," sources active)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Y,{onClick:vn,variant:"outline",size:"sm",children:[e.jsx(ao,{className:"w-4 h-4 mr-2"}),"New Chat"]}),l&&t.length>0&&e.jsxs(Tr,{children:[e.jsx(Or,{asChild:!0,children:e.jsx(Y,{variant:"ghost",size:"icon",children:e.jsx(mo,{className:"w-4 h-4"})})}),e.jsxs(dn,{align:"end",children:[e.jsxs(ze,{onClick:()=>et("markdown"),children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Export as Markdown"]}),e.jsxs(ze,{onClick:()=>et("json"),children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Export as JSON"]})]})]})]})]})}),e.jsx(le,{className:"flex-1 px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto py-6",children:[I&&e.jsxs(Tn,{variant:"warning",className:"mb-4",children:[e.jsx(oo,{className:"h-4 w-4"}),e.jsx(On,{children:"AI Service Issue"}),e.jsxs(Fn,{children:[I,(I.includes("quota")||I.toLowerCase().includes("rate limit"))&&e.jsx("p",{className:"mt-2 text-sm",children:"Free tier limits: 100k requests/day, 20 requests/minute, 2 concurrent GPU jobs. Consider upgrading for better performance."}),I.includes("capacity")&&e.jsx("p",{className:"mt-2 text-sm",children:"The AI service is experiencing high demand. Please wait a moment and try again."}),(I.toLowerCase().includes("concurrent")||I.includes("Concurrency limit"))&&e.jsx("p",{className:"mt-2 text-sm",children:"The free tier allows only 2 concurrent AI requests. Your request has been queued and will process when a slot becomes available."})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-gradient-metal-start to-gradient-metal-end mb-4",children:e.jsx(ct,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"How can I help you today?"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Upload documents and ask questions to get started"}),e.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[e.jsx(Ce,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>g("Summarize the key points from my documents"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ot,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Summarize documents"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get key insights from your sources"})]})]})}),e.jsx(Ce,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>g("Create an outline based on the main topics"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Generate outline"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Structure your content logically"})]})]})}),e.jsx(Ce,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>g("What are the most important findings?"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(at,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Extract insights"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Discover key findings and patterns"})]})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[t.map(r=>e.jsxs("div",{className:`flex gap-4 ${r.role==="assistant"?"":"justify-end"}`,children:[r.role==="assistant"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-gradient-metal-start to-gradient-metal-end flex items-center justify-center flex-shrink-0",children:e.jsx(ct,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"relative rounded-2xl px-4 py-3 max-w-[80%] group bg-muted",children:[e.jsx("div",{className:"text-sm leading-relaxed",children:bn(r.content,r.citations)}),r.streaming&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Se,{className:"w-3 h-3 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"AI is typing..."})]}),r.role==="assistant"&&!r.streaming&&e.jsx("button",{onClick:()=>Mn(r.id),disabled:V===r.id,className:`absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity ${r.role==="assistant"?"text-muted-foreground hover:text-foreground":"text-white/70 hover:text-white"}`,title:"Share this Q&A",children:V===r.id?e.jsx(Se,{className:"w-4 h-4 animate-spin"}):e.jsx(it,{className:"w-4 h-4"})})]})]}),r.role==="user"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative rounded-2xl px-4 py-3 max-w-[80%] group bg-muted",children:e.jsx("div",{className:"text-sm leading-relaxed",children:r.content})}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0",children:e.jsx(An,{className:"w-5 h-5"})})]})]},r.id)),e.jsx("div",{ref:C})]})]})}),e.jsx("div",{className:"border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fe,{value:w,onChange:r=>g(r.target.value),onKeyPress:r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),Ze())},placeholder:$?"AI is responding...":"Ask a question about your documents...",disabled:f||$,className:"flex-1"}),e.jsx(Y,{onClick:Ze,disabled:f||$||!w.trim(),className:"gradient-metallic-primary flex-shrink-0",title:$?"Please wait for the current response to complete":"Send message",children:f||$?e.jsx(Se,{className:"w-4 h-4 animate-spin"}):e.jsx(Mo,{className:"w-4 h-4"})})]})})})})]}),e.jsx(Le,{open:z,onOpenChange:Z,children:e.jsxs($e,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(Ue,{children:e.jsxs(Ge,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),N?.name]})}),e.jsx(le,{className:"flex-1 mt-4",children:e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:ae})})})]})}),e.jsx(Le,{open:Pe,onOpenChange:ge,children:e.jsxs($e,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx(Ue,{children:e.jsxs(Ge,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Source: ",E?.documentName]})}),e.jsx(le,{className:"flex-1 mt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Relevance:"}),e.jsxs("span",{children:[E?(E.score*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:E?.text})})]})})]})}),e.jsx(Le,{open:we,onOpenChange:B,children:e.jsxs($e,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsxs(Ge,{className:"flex items-center gap-2",children:[e.jsx(it,{className:"w-5 h-5"}),"Share This Conversation"]})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone with this link can view this Q&A snippet. The link will expire in 30 days."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fe,{value:ve,readOnly:!0,className:"font-mono text-xs"}),e.jsx(Y,{onClick:Cn,variant:"outline",size:"icon",className:"flex-shrink-0",children:Q?e.jsx(ht,{className:"w-4 h-4 text-green-600"}):e.jsx(lo,{className:"w-4 h-4"})})]}),Q&&e.jsx("p",{className:"text-sm text-green-600",children:"Link copied to clipboard!"})]})]})})]})}export{hs as NotebookLMInterface};
//# sourceMappingURL=NotebookLMInterface.BXCfWlBw.js.map
