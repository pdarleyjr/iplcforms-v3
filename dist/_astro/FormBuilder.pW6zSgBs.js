import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d,R as H}from"./index.7-fRwNhn.js";import{B as V}from"./button.DAHL7osy.js";import{C as Ut,d as Vt,a as gs,b as vs,c as tn}from"./card.mQZrHzSY.js";import{D as Rs,a as Xn,b as Ls,c as Fs,d as Ps}from"./dialog.CJQRyvNY.js";import{T as ns,a as as,b as Ue,c as Ke}from"./tabs.BpmYg8Ta.js";import{o as Gn,h as _s,s as Oe,_ as Kn,n as Jn,g as Zn,u as Qn,a as ea,F as ta,b as ue,c as me,d as he,e as je,f as De,i as rs}from"./schemas.DmIWGFrR.js";import{I as B}from"./input.BqLLRaLk.js";import{T as ft}from"./textarea.BU_xJv7O.js";import{P as sa,e as bs,S as sn,a as nn,T as an,b as Rt}from"./evaluation-sections-config.De8uYn8d.js";import{S as xe,a as pe,b as fe,c as ge,d as _}from"./select.BaJeBjK0.js";import{C as ys}from"./checkbox.rwCCBHyW.js";import{B as G}from"./badge.3Ytt3Yux.js";import{r as ut}from"./index.AmEYgA8_.js";import{C as rn,a as na,P as aa}from"./ComponentPalette.sNqwqvWw.js";import{L as mt}from"./label.CzLeOBg3.js";import{A as on,R as ra}from"./AISummaryElement.CLyj9hCW.js";import{E as Ft,b as ln,S as cn,a as oa,B as ia,C as dn,U as la,T as un,D as ca,c as da}from"./scroll-area.BStO3lyX.js";import{C as mn}from"./type.D9ycDPQ5.js";import{C as Pt}from"./chevron-right.fiaqyhhB.js";import{C as _t}from"./calendar.CIQLlK-j.js";import{c as q,a as Fe}from"./index.CuufFikk.js";import{M as ua}from"./menu.Da815GPd.js";import{F as Je}from"./file-text.Dex-0Is2.js";import{C as Os}from"./chevron-down.DNnEHWwL.js";import{M as ma}from"./message-square.BrrOqiS3.js";import{P as et}from"./plus.q9ev0EMF.js";import{S as ms}from"./shield.BZ-jpHJL.js";import{U as hn}from"./users.CMo2fA-E.js";import{A as xn,a as pn}from"./alert.CwyU3Sxv.js";import{L as fn,C as ha}from"./loader-circle.D8v-saPC.js";import{S as xa}from"./sparkles.BRTGHZTm.js";import{L as pa,S as fa}from"./save.BneFxCGV.js";import{S as ga}from"./settings.DirRpMhW.js";import"./index.DVFN_t0d.js";import"./index.BhDqio8u.js";import"./Combination.D1D1t5_V.js";import"./index.D1rCwynp.js";import"./x.iTm9BFym.js";import"./index.D8gVcfSW.js";import"./index.CCOBqHex.js";import"./index.ZH8sIb6j.js";import"./index.BDInZWg7.js";import"./circle.Bd6DMs0W.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ba=q("activity",va);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ja=q("award",ya);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],Na=q("baby",wa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],Sa=q("bath",Ca);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Da=q("briefcase",ka);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],Aa=q("car",Ea);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Ta=q("cloud-off",Ma);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],La=q("cloud",Ra);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]],Pa=q("ear",Fa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],Oa=q("footprints",_a);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],$a=q("gamepad",Ia);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],za=q("git-branch",Ba);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ua=q("grid-3x3",qa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],js=q("grip-vertical",Va);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],gn=q("hand",Ha);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Ya=q("heart",Wa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ga=q("house",Xa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Ja=q("list",Ka);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],Qa=q("pill",Za);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],tr=q("shirt",er);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Is=q("star",sr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],ar=q("stethoscope",nr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],or=q("tag",rr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],lr=q("test-tube",ir);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dr=q("trending-up",cr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mr=q("user-plus",ur);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],xr=q("utensils",hr);function pr(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return d.useMemo(()=>a=>{s.forEach(r=>r(a))},s)}const Ht=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function st(t){const s=Object.prototype.toString.call(t);return s==="[object Window]"||s==="[object global]"}function ws(t){return"nodeType"in t}function ae(t){var s,n;return t?st(t)?t:ws(t)&&(s=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?s:window:window}function Ns(t){const{Document:s}=ae(t);return t instanceof s}function yt(t){return st(t)?!1:t instanceof ae(t).HTMLElement}function vn(t){return t instanceof ae(t).SVGElement}function nt(t){return t?st(t)?t.document:ws(t)?Ns(t)?t:yt(t)||vn(t)?t.ownerDocument:document:document:document}const Ee=Ht?d.useLayoutEffect:d.useEffect;function Wt(t){const s=d.useRef(t);return Ee(()=>{s.current=t}),d.useCallback(function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return s.current==null?void 0:s.current(...a)},[])}function fr(){const t=d.useRef(null),s=d.useCallback((a,r)=>{t.current=setInterval(a,r)},[]),n=d.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[s,n]}function gt(t,s){s===void 0&&(s=[t]);const n=d.useRef(t);return Ee(()=>{n.current!==t&&(n.current=t)},s),n}function jt(t,s){const n=d.useRef();return d.useMemo(()=>{const a=t(n.current);return n.current=a,a},[...s])}function Ot(t){const s=Wt(t),n=d.useRef(null),a=d.useCallback(r=>{r!==n.current&&s?.(r,n.current),n.current=r},[]);return[n,a]}function It(t){const s=d.useRef();return d.useEffect(()=>{s.current=t},[t]),s.current}let os={};function wt(t,s){return d.useMemo(()=>{if(s)return s;const n=os[t]==null?0:os[t]+1;return os[t]=n,t+"-"+n},[t,s])}function bn(t){return function(s){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.reduce((o,l)=>{const i=Object.entries(l);for(const[u,m]of i){const x=o[u];x!=null&&(o[u]=x+t*m)}return o},{...s})}}const tt=bn(1),vt=bn(-1);function gr(t){return"clientX"in t&&"clientY"in t}function Yt(t){if(!t)return!1;const{KeyboardEvent:s}=ae(t.target);return s&&t instanceof s}function vr(t){if(!t)return!1;const{TouchEvent:s}=ae(t.target);return s&&t instanceof s}function $t(t){if(vr(t)){if(t.touches&&t.touches.length){const{clientX:s,clientY:n}=t.touches[0];return{x:s,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:s,clientY:n}=t.changedTouches[0];return{x:s,y:n}}}return gr(t)?{x:t.clientX,y:t.clientY}:null}const He=Object.freeze({Translate:{toString(t){if(!t)return;const{x:s,y:n}=t;return"translate3d("+(s?Math.round(s):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:s,scaleY:n}=t;return"scaleX("+s+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[He.Translate.toString(t),He.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:s,duration:n,easing:a}=t;return s+" "+n+"ms "+a}}}),$s="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function br(t){return t.matches($s)?t:t.querySelector($s)}const yr={display:"none"};function jr(t){let{id:s,value:n}=t;return H.createElement("div",{id:s,style:yr},n)}function wr(t){let{id:s,announcement:n,ariaLiveType:a="assertive"}=t;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return H.createElement("div",{id:s,style:r,role:"status","aria-live":a,"aria-atomic":!0},n)}function Nr(){const[t,s]=d.useState("");return{announce:d.useCallback(a=>{a!=null&&s(a)},[]),announcement:t}}const yn=d.createContext(null);function Cr(t){const s=d.useContext(yn);d.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(t)},[t,s])}function Sr(){const[t]=d.useState(()=>new Set),s=d.useCallback(a=>(t.add(a),()=>t.delete(a)),[t]);return[d.useCallback(a=>{let{type:r,event:o}=a;t.forEach(l=>{var i;return(i=l[r])==null?void 0:i.call(l,o)})},[t]),s]}const kr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Dr={onDragStart(t){let{active:s}=t;return"Picked up draggable item "+s.id+"."},onDragOver(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was moved over droppable area "+n.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(t){let{active:s,over:n}=t;return n?"Draggable item "+s.id+" was dropped over droppable area "+n.id:"Draggable item "+s.id+" was dropped."},onDragCancel(t){let{active:s}=t;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function Er(t){let{announcements:s=Dr,container:n,hiddenTextDescribedById:a,screenReaderInstructions:r=kr}=t;const{announce:o,announcement:l}=Nr(),i=wt("DndLiveRegion"),[u,m]=d.useState(!1);if(d.useEffect(()=>{m(!0)},[]),Cr(d.useMemo(()=>({onDragStart(h){let{active:v}=h;o(s.onDragStart({active:v}))},onDragMove(h){let{active:v,over:p}=h;s.onDragMove&&o(s.onDragMove({active:v,over:p}))},onDragOver(h){let{active:v,over:p}=h;o(s.onDragOver({active:v,over:p}))},onDragEnd(h){let{active:v,over:p}=h;o(s.onDragEnd({active:v,over:p}))},onDragCancel(h){let{active:v,over:p}=h;o(s.onDragCancel({active:v,over:p}))}}),[o,s])),!u)return null;const x=H.createElement(H.Fragment,null,H.createElement(jr,{id:a,value:r.draggable}),H.createElement(wr,{id:i,announcement:l}));return n?ut.createPortal(x,n):x}var K;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(K||(K={}));function Bt(){}function is(t,s){return d.useMemo(()=>({sensor:t,options:s??{}}),[t,s])}function Ar(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return d.useMemo(()=>[...s].filter(a=>a!=null),[...s])}const Ae=Object.freeze({x:0,y:0});function Cs(t,s){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function Mr(t,s){const n=$t(t);if(!n)return"0 0";const a={x:(n.x-s.left)/s.width*100,y:(n.y-s.top)/s.height*100};return a.x+"% "+a.y+"%"}function Ss(t,s){let{data:{value:n}}=t,{data:{value:a}}=s;return n-a}function Tr(t,s){let{data:{value:n}}=t,{data:{value:a}}=s;return a-n}function hs(t){let{left:s,top:n,height:a,width:r}=t;return[{x:s,y:n},{x:s+r,y:n},{x:s,y:n+a},{x:s+r,y:n+a}]}function jn(t,s){if(!t||t.length===0)return null;const[n]=t;return n[s]}function Bs(t,s,n){return s===void 0&&(s=t.left),n===void 0&&(n=t.top),{x:s+t.width*.5,y:n+t.height*.5}}const Rr=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:a}=t;const r=Bs(s,s.left,s.top),o=[];for(const l of a){const{id:i}=l,u=n.get(i);if(u){const m=Cs(Bs(u),r);o.push({id:i,data:{droppableContainer:l,value:m}})}}return o.sort(Ss)},Lr=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:a}=t;const r=hs(s),o=[];for(const l of a){const{id:i}=l,u=n.get(i);if(u){const m=hs(u),x=r.reduce((v,p,N)=>v+Cs(m[N],p),0),h=Number((x/4).toFixed(4));o.push({id:i,data:{droppableContainer:l,value:h}})}}return o.sort(Ss)};function Fr(t,s){const n=Math.max(s.top,t.top),a=Math.max(s.left,t.left),r=Math.min(s.left+s.width,t.left+t.width),o=Math.min(s.top+s.height,t.top+t.height),l=r-a,i=o-n;if(a<r&&n<o){const u=s.width*s.height,m=t.width*t.height,x=l*i,h=x/(u+m-x);return Number(h.toFixed(4))}return 0}const wn=t=>{let{collisionRect:s,droppableRects:n,droppableContainers:a}=t;const r=[];for(const o of a){const{id:l}=o,i=n.get(l);if(i){const u=Fr(i,s);u>0&&r.push({id:l,data:{droppableContainer:o,value:u}})}}return r.sort(Tr)};function Pr(t,s){const{top:n,left:a,bottom:r,right:o}=s;return n<=t.y&&t.y<=r&&a<=t.x&&t.x<=o}const _r=t=>{let{droppableContainers:s,droppableRects:n,pointerCoordinates:a}=t;if(!a)return[];const r=[];for(const o of s){const{id:l}=o,i=n.get(l);if(i&&Pr(a,i)){const m=hs(i).reduce((h,v)=>h+Cs(a,v),0),x=Number((m/4).toFixed(4));r.push({id:l,data:{droppableContainer:o,value:x}})}}return r.sort(Ss)};function Or(t,s,n){return{...t,scaleX:s&&n?s.width/n.width:1,scaleY:s&&n?s.height/n.height:1}}function Nn(t,s){return t&&s?{x:t.left-s.left,y:t.top-s.top}:Ae}function Ir(t){return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return r.reduce((l,i)=>({...l,top:l.top+t*i.y,bottom:l.bottom+t*i.y,left:l.left+t*i.x,right:l.right+t*i.x}),{...n})}}const $r=Ir(1);function Cn(t){if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function Br(t,s,n){const a=Cn(s);if(!a)return t;const{scaleX:r,scaleY:o,x:l,y:i}=a,u=t.left-l-(1-r)*parseFloat(n),m=t.top-i-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),x=r?t.width/r:t.width,h=o?t.height/o:t.height;return{width:x,height:h,top:m,right:u+x,bottom:m+h,left:u}}const zr={ignoreTransform:!1};function at(t,s){s===void 0&&(s=zr);let n=t.getBoundingClientRect();if(s.ignoreTransform){const{transform:m,transformOrigin:x}=ae(t).getComputedStyle(t);m&&(n=Br(n,m,x))}const{top:a,left:r,width:o,height:l,bottom:i,right:u}=n;return{top:a,left:r,width:o,height:l,bottom:i,right:u}}function zs(t){return at(t,{ignoreTransform:!0})}function qr(t){const s=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:s,bottom:n,width:s,height:n}}function Ur(t,s){return s===void 0&&(s=ae(t).getComputedStyle(t)),s.position==="fixed"}function Vr(t,s){s===void 0&&(s=ae(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const o=s[r];return typeof o=="string"?n.test(o):!1})}function Xt(t,s){const n=[];function a(r){if(s!=null&&n.length>=s||!r)return n;if(Ns(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!yt(r)||vn(r)||n.includes(r))return n;const o=ae(t).getComputedStyle(r);return r!==t&&Vr(r,o)&&n.push(r),Ur(r,o)?n:a(r.parentNode)}return t?a(t):n}function Sn(t){const[s]=Xt(t,1);return s??null}function ls(t){return!Ht||!t?null:st(t)?t:ws(t)?Ns(t)||t===nt(t).scrollingElement?window:yt(t)?t:null:null}function kn(t){return st(t)?t.scrollX:t.scrollLeft}function Dn(t){return st(t)?t.scrollY:t.scrollTop}function xs(t){return{x:kn(t),y:Dn(t)}}var Z;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Z||(Z={}));function En(t){return!Ht||!t?!1:t===document.scrollingElement}function An(t){const s={x:0,y:0},n=En(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},a={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},r=t.scrollTop<=s.y,o=t.scrollLeft<=s.x,l=t.scrollTop>=a.y,i=t.scrollLeft>=a.x;return{isTop:r,isLeft:o,isBottom:l,isRight:i,maxScroll:a,minScroll:s}}const Hr={x:.2,y:.2};function Wr(t,s,n,a,r){let{top:o,left:l,right:i,bottom:u}=n;a===void 0&&(a=10),r===void 0&&(r=Hr);const{isTop:m,isBottom:x,isLeft:h,isRight:v}=An(t),p={x:0,y:0},N={x:0,y:0},y={height:s.height*r.y,width:s.width*r.x};return!m&&o<=s.top+y.height?(p.y=Z.Backward,N.y=a*Math.abs((s.top+y.height-o)/y.height)):!x&&u>=s.bottom-y.height&&(p.y=Z.Forward,N.y=a*Math.abs((s.bottom-y.height-u)/y.height)),!v&&i>=s.right-y.width?(p.x=Z.Forward,N.x=a*Math.abs((s.right-y.width-i)/y.width)):!h&&l<=s.left+y.width&&(p.x=Z.Backward,N.x=a*Math.abs((s.left+y.width-l)/y.width)),{direction:p,speed:N}}function Yr(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:s,left:n,right:a,bottom:r}=t.getBoundingClientRect();return{top:s,left:n,right:a,bottom:r,width:t.clientWidth,height:t.clientHeight}}function Mn(t){return t.reduce((s,n)=>tt(s,xs(n)),Ae)}function Xr(t){return t.reduce((s,n)=>s+kn(n),0)}function Gr(t){return t.reduce((s,n)=>s+Dn(n),0)}function Tn(t,s){if(s===void 0&&(s=at),!t)return;const{top:n,left:a,bottom:r,right:o}=s(t);Sn(t)&&(r<=0||o<=0||n>=window.innerHeight||a>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Kr=[["x",["left","right"],Xr],["y",["top","bottom"],Gr]];class ks{constructor(s,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Xt(n),r=Mn(a);this.rect={...s},this.width=s.width,this.height=s.height;for(const[o,l,i]of Kr)for(const u of l)Object.defineProperty(this,u,{get:()=>{const m=i(a),x=r[o]-m;return this.rect[u]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ht{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...n)})},this.target=s}add(s,n,a){var r;(r=this.target)==null||r.addEventListener(s,n,a),this.listeners.push([s,n,a])}}function Jr(t){const{EventTarget:s}=ae(t);return t instanceof s?t:nt(t)}function cs(t,s){const n=Math.abs(t.x),a=Math.abs(t.y);return typeof s=="number"?Math.sqrt(n**2+a**2)>s:"x"in s&&"y"in s?n>s.x&&a>s.y:"x"in s?n>s.x:"y"in s?a>s.y:!1}var we;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(we||(we={}));function qs(t){t.preventDefault()}function Zr(t){t.stopPropagation()}var O;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(O||(O={}));const Rn={start:[O.Space,O.Enter],cancel:[O.Esc],end:[O.Space,O.Enter,O.Tab]},Qr=(t,s)=>{let{currentCoordinates:n}=s;switch(t.code){case O.Right:return{...n,x:n.x+25};case O.Left:return{...n,x:n.x-25};case O.Down:return{...n,y:n.y+25};case O.Up:return{...n,y:n.y-25}}};class Ds{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:n}}=s;this.props=s,this.listeners=new ht(nt(n)),this.windowListeners=new ht(ae(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(we.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:n}=this.props,a=s.node.current;a&&Tn(a),n(Ae)}handleKeyDown(s){if(Yt(s)){const{active:n,context:a,options:r}=this.props,{keyboardCodes:o=Rn,coordinateGetter:l=Qr,scrollBehavior:i="smooth"}=r,{code:u}=s;if(o.end.includes(u)){this.handleEnd(s);return}if(o.cancel.includes(u)){this.handleCancel(s);return}const{collisionRect:m}=a.current,x=m?{x:m.left,y:m.top}:Ae;this.referenceCoordinates||(this.referenceCoordinates=x);const h=l(s,{active:n,context:a.current,currentCoordinates:x});if(h){const v=vt(h,x),p={x:0,y:0},{scrollableAncestors:N}=a.current;for(const y of N){const S=s.code,{isTop:g,isRight:k,isLeft:E,isBottom:M,maxScroll:C,minScroll:f}=An(y),w=Yr(y),j={x:Math.min(S===O.Right?w.right-w.width/2:w.right,Math.max(S===O.Right?w.left:w.left+w.width/2,h.x)),y:Math.min(S===O.Down?w.bottom-w.height/2:w.bottom,Math.max(S===O.Down?w.top:w.top+w.height/2,h.y))},D=S===O.Right&&!k||S===O.Left&&!E,L=S===O.Down&&!M||S===O.Up&&!g;if(D&&j.x!==h.x){const I=y.scrollLeft+v.x,Y=S===O.Right&&I<=C.x||S===O.Left&&I>=f.x;if(Y&&!v.y){y.scrollTo({left:I,behavior:i});return}Y?p.x=y.scrollLeft-I:p.x=S===O.Right?y.scrollLeft-C.x:y.scrollLeft-f.x,p.x&&y.scrollBy({left:-p.x,behavior:i});break}else if(L&&j.y!==h.y){const I=y.scrollTop+v.y,Y=S===O.Down&&I<=C.y||S===O.Up&&I>=f.y;if(Y&&!v.x){y.scrollTo({top:I,behavior:i});return}Y?p.y=y.scrollTop-I:p.y=S===O.Down?y.scrollTop-C.y:y.scrollTop-f.y,p.y&&y.scrollBy({top:-p.y,behavior:i});break}}this.handleMove(s,tt(vt(h,this.referenceCoordinates),p))}}}handleMove(s,n){const{onMove:a}=this.props;s.preventDefault(),a(n)}handleEnd(s){const{onEnd:n}=this.props;s.preventDefault(),this.detach(),n()}handleCancel(s){const{onCancel:n}=this.props;s.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ds.activators=[{eventName:"onKeyDown",handler:(t,s,n)=>{let{keyboardCodes:a=Rn,onActivation:r}=s,{active:o}=n;const{code:l}=t.nativeEvent;if(a.start.includes(l)){const i=o.activatorNode.current;return i&&t.target!==i?!1:(t.preventDefault(),r?.({event:t.nativeEvent}),!0)}return!1}}];function Us(t){return!!(t&&"distance"in t)}function Vs(t){return!!(t&&"delay"in t)}class Es{constructor(s,n,a){var r;a===void 0&&(a=Jr(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=n;const{event:o}=s,{target:l}=o;this.props=s,this.events=n,this.document=nt(l),this.documentListeners=new ht(this.document),this.listeners=new ht(a),this.windowListeners=new ht(ae(l)),this.initialCoordinates=(r=$t(o))!=null?r:Ae,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(we.Resize,this.handleCancel),this.windowListeners.add(we.DragStart,qs),this.windowListeners.add(we.VisibilityChange,this.handleCancel),this.windowListeners.add(we.ContextMenu,qs),this.documentListeners.add(we.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vs(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Us(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,n){const{active:a,onPending:r}=this.props;r(a,s,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:s}=this,{onStart:n}=this.props;s&&(this.activated=!0,this.documentListeners.add(we.Click,Zr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(we.SelectionChange,this.removeTextSelection),n(s))}handleMove(s){var n;const{activated:a,initialCoordinates:r,props:o}=this,{onMove:l,options:{activationConstraint:i}}=o;if(!r)return;const u=(n=$t(s))!=null?n:Ae,m=vt(r,u);if(!a&&i){if(Us(i)){if(i.tolerance!=null&&cs(m,i.tolerance))return this.handleCancel();if(cs(m,i.distance))return this.handleStart()}if(Vs(i)&&cs(m,i.tolerance))return this.handleCancel();this.handlePending(i,m);return}s.cancelable&&s.preventDefault(),l(u)}handleEnd(){const{onAbort:s,onEnd:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleCancel(){const{onAbort:s,onCancel:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleKeydown(s){s.code===O.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const eo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class As extends Es{constructor(s){const{event:n}=s,a=nt(n.target);super(s,eo,a)}}As.activators=[{eventName:"onPointerDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:a}=s;return!n.isPrimary||n.button!==0?!1:(a?.({event:n}),!0)}}];const to={move:{name:"mousemove"},end:{name:"mouseup"}};var ps;(function(t){t[t.RightClick=2]="RightClick"})(ps||(ps={}));class so extends Es{constructor(s){super(s,to,nt(s.event.target))}}so.activators=[{eventName:"onMouseDown",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:a}=s;return n.button===ps.RightClick?!1:(a?.({event:n}),!0)}}];const ds={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ln extends Es{constructor(s){super(s,ds)}static setup(){return window.addEventListener(ds.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(ds.move.name,s)};function s(){}}}Ln.activators=[{eventName:"onTouchStart",handler:(t,s)=>{let{nativeEvent:n}=t,{onActivation:a}=s;const{touches:r}=n;return r.length>1?!1:(a?.({event:n}),!0)}}];var xt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(xt||(xt={}));var zt;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(zt||(zt={}));function no(t){let{acceleration:s,activator:n=xt.Pointer,canScroll:a,draggingRect:r,enabled:o,interval:l=5,order:i=zt.TreeOrder,pointerCoordinates:u,scrollableAncestors:m,scrollableAncestorRects:x,delta:h,threshold:v}=t;const p=ro({delta:h,disabled:!o}),[N,y]=fr(),S=d.useRef({x:0,y:0}),g=d.useRef({x:0,y:0}),k=d.useMemo(()=>{switch(n){case xt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case xt.DraggableRect:return r}},[n,r,u]),E=d.useRef(null),M=d.useCallback(()=>{const f=E.current;if(!f)return;const w=S.current.x*g.current.x,j=S.current.y*g.current.y;f.scrollBy(w,j)},[]),C=d.useMemo(()=>i===zt.TreeOrder?[...m].reverse():m,[i,m]);d.useEffect(()=>{if(!o||!m.length||!k){y();return}for(const f of C){if(a?.(f)===!1)continue;const w=m.indexOf(f),j=x[w];if(!j)continue;const{direction:D,speed:L}=Wr(f,j,k,s,v);for(const I of["x","y"])p[I][D[I]]||(L[I]=0,D[I]=0);if(L.x>0||L.y>0){y(),E.current=f,N(M,l),S.current=L,g.current=D;return}}S.current={x:0,y:0},g.current={x:0,y:0},y()},[s,M,a,y,o,l,JSON.stringify(k),JSON.stringify(p),N,m,C,x,JSON.stringify(v)])}const ao={x:{[Z.Backward]:!1,[Z.Forward]:!1},y:{[Z.Backward]:!1,[Z.Forward]:!1}};function ro(t){let{delta:s,disabled:n}=t;const a=It(s);return jt(r=>{if(n||!a||!r)return ao;const o={x:Math.sign(s.x-a.x),y:Math.sign(s.y-a.y)};return{x:{[Z.Backward]:r.x[Z.Backward]||o.x===-1,[Z.Forward]:r.x[Z.Forward]||o.x===1},y:{[Z.Backward]:r.y[Z.Backward]||o.y===-1,[Z.Forward]:r.y[Z.Forward]||o.y===1}}},[n,s,a])}function oo(t,s){const n=s!=null?t.get(s):void 0,a=n?n.node.current:null;return jt(r=>{var o;return s==null?null:(o=a??r)!=null?o:null},[a,s])}function io(t,s){return d.useMemo(()=>t.reduce((n,a)=>{const{sensor:r}=a,o=r.activators.map(l=>({eventName:l.eventName,handler:s(l.handler,a)}));return[...n,...o]},[]),[t,s])}var bt;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(bt||(bt={}));var fs;(function(t){t.Optimized="optimized"})(fs||(fs={}));const Hs=new Map;function lo(t,s){let{dragging:n,dependencies:a,config:r}=s;const[o,l]=d.useState(null),{frequency:i,measure:u,strategy:m}=r,x=d.useRef(t),h=S(),v=gt(h),p=d.useCallback(function(g){g===void 0&&(g=[]),!v.current&&l(k=>k===null?g:k.concat(g.filter(E=>!k.includes(E))))},[v]),N=d.useRef(null),y=jt(g=>{if(h&&!n)return Hs;if(!g||g===Hs||x.current!==t||o!=null){const k=new Map;for(let E of t){if(!E)continue;if(o&&o.length>0&&!o.includes(E.id)&&E.rect.current){k.set(E.id,E.rect.current);continue}const M=E.node.current,C=M?new ks(u(M),M):null;E.rect.current=C,C&&k.set(E.id,C)}return k}return g},[t,o,n,h,u]);return d.useEffect(()=>{x.current=t},[t]),d.useEffect(()=>{h||p()},[n,h]),d.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),d.useEffect(()=>{h||typeof i!="number"||N.current!==null||(N.current=setTimeout(()=>{p(),N.current=null},i))},[i,h,p,...a]),{droppableRects:y,measureDroppableContainers:p,measuringScheduled:o!=null};function S(){switch(m){case bt.Always:return!1;case bt.BeforeDragging:return n;default:return!n}}}function Ms(t,s){return jt(n=>t?n||(typeof s=="function"?s(t):t):null,[s,t])}function co(t,s){return Ms(t,s)}function uo(t){let{callback:s,disabled:n}=t;const a=Wt(s),r=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(a)},[a,n]);return d.useEffect(()=>()=>r?.disconnect(),[r]),r}function Gt(t){let{callback:s,disabled:n}=t;const a=Wt(s),r=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(a)},[n]);return d.useEffect(()=>()=>r?.disconnect(),[r]),r}function mo(t){return new ks(at(t),t)}function Ws(t,s,n){s===void 0&&(s=mo);const[a,r]=d.useState(null);function o(){r(u=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=u??n)!=null?m:null}const x=s(t);return JSON.stringify(u)===JSON.stringify(x)?u:x})}const l=uo({callback(u){if(t)for(const m of u){const{type:x,target:h}=m;if(x==="childList"&&h instanceof HTMLElement&&h.contains(t)){o();break}}}}),i=Gt({callback:o});return Ee(()=>{o(),t?(i?.observe(t),l?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),l?.disconnect())},[t]),a}function ho(t){const s=Ms(t);return Nn(t,s)}const Ys=[];function xo(t){const s=d.useRef(t),n=jt(a=>t?a&&a!==Ys&&t&&s.current&&t.parentNode===s.current.parentNode?a:Xt(t):Ys,[t]);return d.useEffect(()=>{s.current=t},[t]),n}function po(t){const[s,n]=d.useState(null),a=d.useRef(t),r=d.useCallback(o=>{const l=ls(o.target);l&&n(i=>i?(i.set(l,xs(l)),new Map(i)):null)},[]);return d.useEffect(()=>{const o=a.current;if(t!==o){l(o);const i=t.map(u=>{const m=ls(u);return m?(m.addEventListener("scroll",r,{passive:!0}),[m,xs(m)]):null}).filter(u=>u!=null);n(i.length?new Map(i):null),a.current=t}return()=>{l(t),l(o)};function l(i){i.forEach(u=>{const m=ls(u);m?.removeEventListener("scroll",r)})}},[r,t]),d.useMemo(()=>t.length?s?Array.from(s.values()).reduce((o,l)=>tt(o,l),Ae):Mn(t):Ae,[t,s])}function Xs(t,s){s===void 0&&(s=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},s),d.useEffect(()=>{const a=t!==Ae;a&&!n.current&&(n.current=t),!a&&n.current&&(n.current=null)},[t]),n.current?vt(t,n.current):Ae}function fo(t){d.useEffect(()=>{if(!Ht)return;const s=t.map(n=>{let{sensor:a}=n;return a.setup==null?void 0:a.setup()});return()=>{for(const n of s)n?.()}},t.map(s=>{let{sensor:n}=s;return n}))}function go(t,s){return d.useMemo(()=>t.reduce((n,a)=>{let{eventName:r,handler:o}=a;return n[r]=l=>{o(l,s)},n},{}),[t,s])}function Fn(t){return d.useMemo(()=>t?qr(t):null,[t])}const Gs=[];function vo(t,s){s===void 0&&(s=at);const[n]=t,a=Fn(n?ae(n):null),[r,o]=d.useState(Gs);function l(){o(()=>t.length?t.map(u=>En(u)?a:new ks(s(u),u)):Gs)}const i=Gt({callback:l});return Ee(()=>{i?.disconnect(),l(),t.forEach(u=>i?.observe(u))},[t]),r}function Pn(t){if(!t)return null;if(t.children.length>1)return t;const s=t.children[0];return yt(s)?s:t}function bo(t){let{measure:s}=t;const[n,a]=d.useState(null),r=d.useCallback(m=>{for(const{target:x}of m)if(yt(x)){a(h=>{const v=s(x);return h?{...h,width:v.width,height:v.height}:v});break}},[s]),o=Gt({callback:r}),l=d.useCallback(m=>{const x=Pn(m);o?.disconnect(),x&&o?.observe(x),a(x?s(x):null)},[s,o]),[i,u]=Ot(l);return d.useMemo(()=>({nodeRef:i,rect:n,setRef:u}),[n,i,u])}const yo=[{sensor:As,options:{}},{sensor:Ds,options:{}}],jo={current:{}},Lt={draggable:{measure:zs},droppable:{measure:zs,strategy:bt.WhileDragging,frequency:fs.Optimized},dragOverlay:{measure:at}};class pt extends Map{get(s){var n;return s!=null&&(n=super.get(s))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:n}=s;return!n})}getNodeFor(s){var n,a;return(n=(a=this.get(s))==null?void 0:a.node.current)!=null?n:void 0}}const wo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new pt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Bt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Lt,measureDroppableContainers:Bt,windowRect:null,measuringScheduled:!1},_n={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Bt,draggableNodes:new Map,over:null,measureDroppableContainers:Bt},Nt=d.createContext(_n),On=d.createContext(wo);function No(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new pt}}}function Co(t,s){switch(s.type){case K.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case K.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:s.coordinates.x-t.draggable.initialCoordinates.x,y:s.coordinates.y-t.draggable.initialCoordinates.y}}};case K.DragEnd:case K.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case K.RegisterDroppable:{const{element:n}=s,{id:a}=n,r=new pt(t.droppable.containers);return r.set(a,n),{...t,droppable:{...t.droppable,containers:r}}}case K.SetDroppableDisabled:{const{id:n,key:a,disabled:r}=s,o=t.droppable.containers.get(n);if(!o||a!==o.key)return t;const l=new pt(t.droppable.containers);return l.set(n,{...o,disabled:r}),{...t,droppable:{...t.droppable,containers:l}}}case K.UnregisterDroppable:{const{id:n,key:a}=s,r=t.droppable.containers.get(n);if(!r||a!==r.key)return t;const o=new pt(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function So(t){let{disabled:s}=t;const{active:n,activatorEvent:a,draggableNodes:r}=d.useContext(Nt),o=It(a),l=It(n?.id);return d.useEffect(()=>{if(!s&&!a&&o&&l!=null){if(!Yt(o)||document.activeElement===o.target)return;const i=r.get(l);if(!i)return;const{activatorNode:u,node:m}=i;if(!u.current&&!m.current)return;requestAnimationFrame(()=>{for(const x of[u.current,m.current]){if(!x)continue;const h=br(x);if(h){h.focus();break}}})}},[a,s,r,l,o]),null}function In(t,s){let{transform:n,...a}=s;return t!=null&&t.length?t.reduce((r,o)=>o({transform:r,...a}),n):n}function ko(t){return d.useMemo(()=>({draggable:{...Lt.draggable,...t?.draggable},droppable:{...Lt.droppable,...t?.droppable},dragOverlay:{...Lt.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function Do(t){let{activeNode:s,measure:n,initialRect:a,config:r=!0}=t;const o=d.useRef(!1),{x:l,y:i}=typeof r=="boolean"?{x:r,y:r}:r;Ee(()=>{if(!l&&!i||!s){o.current=!1;return}if(o.current||!a)return;const m=s?.node.current;if(!m||m.isConnected===!1)return;const x=n(m),h=Nn(x,a);if(l||(h.x=0),i||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const v=Sn(m);v&&v.scrollBy({top:h.y,left:h.x})}},[s,l,i,a,n])}const Kt=d.createContext({...Ae,scaleX:1,scaleY:1});var Ve;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ve||(Ve={}));const Eo=d.memo(function(s){var n,a,r,o;let{id:l,accessibility:i,autoScroll:u=!0,children:m,sensors:x=yo,collisionDetection:h=wn,measuring:v,modifiers:p,...N}=s;const y=d.useReducer(Co,void 0,No),[S,g]=y,[k,E]=Sr(),[M,C]=d.useState(Ve.Uninitialized),f=M===Ve.Initialized,{draggable:{active:w,nodes:j,translate:D},droppable:{containers:L}}=S,I=w!=null?j.get(w):null,Y=d.useRef({initial:null,translated:null}),ie=d.useMemo(()=>{var J;return w!=null?{id:w,data:(J=I?.data)!=null?J:jo,rect:Y}:null},[w,I]),ve=d.useRef(null),[Ie,Ne]=d.useState(null),[Q,Ce]=d.useState(null),le=gt(N,Object.values(N)),ce=wt("DndDescribedBy",l),$e=d.useMemo(()=>L.getEnabled(),[L]),X=ko(v),{droppableRects:be,measureDroppableContainers:Se,measuringScheduled:We}=lo($e,{dragging:f,dependencies:[D.x,D.y],config:X.droppable}),ee=oo(j,w),Ze=d.useMemo(()=>Q?$t(Q):null,[Q]),Me=At(),ke=co(ee,X.draggable.measure);Do({activeNode:w!=null?j.get(w):null,config:Me.layoutShiftCompensation,initialRect:ke,measure:X.draggable.measure});const $=Ws(ee,X.draggable.measure,ke),z=Ws(ee?ee.parentElement:null),W=d.useRef({activatorEvent:null,active:null,activeNode:ee,collisionRect:null,collisions:null,droppableRects:be,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=L.getNodeFor((n=W.current.over)==null?void 0:n.id),re=bo({measure:X.dragOverlay.measure}),F=(a=re.nodeRef.current)!=null?a:ee,Be=f?(r=re.rect)!=null?r:$:null,Jt=!!(re.nodeRef.current&&re.rect),Zt=ho(Jt?null:$),rt=Fn(F?ae(F):null),Te=xo(f?Pe??ee:null),P=vo(Te),Ye=In(p,{transform:{x:D.x-Zt.x,y:D.y-Zt.y,scaleX:1,scaleY:1},activatorEvent:Q,active:ie,activeNodeRect:$,containerNodeRect:z,draggingNodeRect:Be,over:W.current.over,overlayNodeRect:re.rect,scrollableAncestors:Te,scrollableAncestorRects:P,windowRect:rt}),Xe=Ze?tt(Ze,D):null,Ct=po(Te),ot=Xs(Ct),U=Xs(Ct,[$]),ze=tt(Ye,ot),oe=Be?$r(Be,Ye):null,de=ie&&oe?h({active:ie,collisionRect:oe,droppableRects:be,droppableContainers:$e,pointerCoordinates:Xe}):null,St=jn(de,"id"),[Re,Ge]=d.useState(null),Qt=Jt?Ye:tt(Ye,U),it=Or(Qt,(o=Re?.rect)!=null?o:null,$),Qe=d.useRef(null),kt=d.useCallback((J,se)=>{let{sensor:ne,options:Le}=se;if(ve.current==null)return;const c=j.get(ve.current);if(!c)return;const b=J.nativeEvent,A=new ne({active:ve.current,activeNode:c,event:b,options:Le,context:W,onAbort(R){if(!j.get(R))return;const{onDragAbort:ye}=le.current,_e={id:R};ye?.(_e),k({type:"onDragAbort",event:_e})},onPending(R,te,ye,_e){if(!j.get(R))return;const{onDragPending:ct}=le.current,qe={id:R,constraint:te,initialCoordinates:ye,offset:_e};ct?.(qe),k({type:"onDragPending",event:qe})},onStart(R){const te=ve.current;if(te==null)return;const ye=j.get(te);if(!ye)return;const{onDragStart:_e}=le.current,lt={activatorEvent:b,active:{id:te,data:ye.data,rect:Y}};ut.unstable_batchedUpdates(()=>{_e?.(lt),C(Ve.Initializing),g({type:K.DragStart,initialCoordinates:R,active:te}),k({type:"onDragStart",event:lt}),Ne(Qe.current),Ce(b)})},onMove(R){g({type:K.DragMove,coordinates:R})},onEnd:T(K.DragEnd),onCancel:T(K.DragCancel)});Qe.current=A;function T(R){return async function(){const{active:ye,collisions:_e,over:lt,scrollAdjustedTranslate:ct}=W.current;let qe=null;if(ye&&ct){const{cancelDrop:dt}=le.current;qe={activatorEvent:b,active:ye,collisions:_e,delta:ct,over:lt},R===K.DragEnd&&typeof dt=="function"&&await Promise.resolve(dt(qe))&&(R=K.DragCancel)}ve.current=null,ut.unstable_batchedUpdates(()=>{g({type:R}),C(Ve.Uninitialized),Ge(null),Ne(null),Ce(null),Qe.current=null;const dt=R===K.DragEnd?"onDragEnd":"onDragCancel";if(qe){const ss=le.current[dt];ss?.(qe),k({type:dt,event:qe})}})}}},[j]),es=d.useCallback((J,se)=>(ne,Le)=>{const c=ne.nativeEvent,b=j.get(Le);if(ve.current!==null||!b||c.dndKit||c.defaultPrevented)return;const A={active:b};J(ne,se.options,A)===!0&&(c.dndKit={capturedBy:se.sensor},ve.current=Le,kt(ne,se))},[j,kt]),Dt=io(x,es);fo(x),Ee(()=>{$&&M===Ve.Initializing&&C(Ve.Initialized)},[$,M]),d.useEffect(()=>{const{onDragMove:J}=le.current,{active:se,activatorEvent:ne,collisions:Le,over:c}=W.current;if(!se||!ne)return;const b={active:se,activatorEvent:ne,collisions:Le,delta:{x:ze.x,y:ze.y},over:c};ut.unstable_batchedUpdates(()=>{J?.(b),k({type:"onDragMove",event:b})})},[ze.x,ze.y]),d.useEffect(()=>{const{active:J,activatorEvent:se,collisions:ne,droppableContainers:Le,scrollAdjustedTranslate:c}=W.current;if(!J||ve.current==null||!se||!c)return;const{onDragOver:b}=le.current,A=Le.get(St),T=A&&A.rect.current?{id:A.id,rect:A.rect.current,data:A.data,disabled:A.disabled}:null,R={active:J,activatorEvent:se,collisions:ne,delta:{x:c.x,y:c.y},over:T};ut.unstable_batchedUpdates(()=>{Ge(T),b?.(R),k({type:"onDragOver",event:R})})},[St]),Ee(()=>{W.current={activatorEvent:Q,active:ie,activeNode:ee,collisionRect:oe,collisions:de,droppableRects:be,draggableNodes:j,draggingNode:F,draggingNodeRect:Be,droppableContainers:L,over:Re,scrollableAncestors:Te,scrollAdjustedTranslate:ze},Y.current={initial:Be,translated:oe}},[ie,ee,de,oe,j,F,Be,be,L,Re,Te,ze]),no({...Me,delta:D,draggingRect:oe,pointerCoordinates:Xe,scrollableAncestors:Te,scrollableAncestorRects:P});const ts=d.useMemo(()=>({active:ie,activeNode:ee,activeNodeRect:$,activatorEvent:Q,collisions:de,containerNodeRect:z,dragOverlay:re,draggableNodes:j,droppableContainers:L,droppableRects:be,over:Re,measureDroppableContainers:Se,scrollableAncestors:Te,scrollableAncestorRects:P,measuringConfiguration:X,measuringScheduled:We,windowRect:rt}),[ie,ee,$,Q,de,z,re,j,L,be,Re,Se,Te,P,X,We,rt]),Et=d.useMemo(()=>({activatorEvent:Q,activators:Dt,active:ie,activeNodeRect:$,ariaDescribedById:{draggable:ce},dispatch:g,draggableNodes:j,over:Re,measureDroppableContainers:Se}),[Q,Dt,ie,$,g,ce,j,Re,Se]);return H.createElement(yn.Provider,{value:E},H.createElement(Nt.Provider,{value:Et},H.createElement(On.Provider,{value:ts},H.createElement(Kt.Provider,{value:it},m)),H.createElement(So,{disabled:i?.restoreFocus===!1})),H.createElement(Er,{...i,hiddenTextDescribedById:ce}));function At(){const J=Ie?.autoScrollEnabled===!1,se=typeof u=="object"?u.enabled===!1:u===!1,ne=f&&!J&&!se;return typeof u=="object"?{...u,enabled:ne}:{enabled:ne}}}),Ao=d.createContext(null),Ks="button",Mo="Draggable";function To(t){let{id:s,data:n,disabled:a=!1,attributes:r}=t;const o=wt(Mo),{activators:l,activatorEvent:i,active:u,activeNodeRect:m,ariaDescribedById:x,draggableNodes:h,over:v}=d.useContext(Nt),{role:p=Ks,roleDescription:N="draggable",tabIndex:y=0}=r??{},S=u?.id===s,g=d.useContext(S?Kt:Ao),[k,E]=Ot(),[M,C]=Ot(),f=go(l,s),w=gt(n);Ee(()=>(h.set(s,{id:s,key:o,node:k,activatorNode:M,data:w}),()=>{const D=h.get(s);D&&D.key===o&&h.delete(s)}),[h,s]);const j=d.useMemo(()=>({role:p,tabIndex:y,"aria-disabled":a,"aria-pressed":S&&p===Ks?!0:void 0,"aria-roledescription":N,"aria-describedby":x.draggable}),[a,p,y,S,N,x.draggable]);return{active:u,activatorEvent:i,activeNodeRect:m,attributes:j,isDragging:S,listeners:a?void 0:f,node:k,over:v,setNodeRef:E,setActivatorNodeRef:C,transform:g}}function $n(){return d.useContext(On)}const Ro="Droppable",Lo={timeout:25};function Fo(t){let{data:s,disabled:n=!1,id:a,resizeObserverConfig:r}=t;const o=wt(Ro),{active:l,dispatch:i,over:u,measureDroppableContainers:m}=d.useContext(Nt),x=d.useRef({disabled:n}),h=d.useRef(!1),v=d.useRef(null),p=d.useRef(null),{disabled:N,updateMeasurementsFor:y,timeout:S}={...Lo,...r},g=gt(y??a),k=d.useCallback(()=>{if(!h.current){h.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{m(Array.isArray(g.current)?g.current:[g.current]),p.current=null},S)},[S]),E=Gt({callback:k,disabled:N||!l}),M=d.useCallback((j,D)=>{E&&(D&&(E.unobserve(D),h.current=!1),j&&E.observe(j))},[E]),[C,f]=Ot(M),w=gt(s);return d.useEffect(()=>{!E||!C.current||(E.disconnect(),h.current=!1,E.observe(C.current))},[C,E]),d.useEffect(()=>(i({type:K.RegisterDroppable,element:{id:a,key:o,disabled:n,node:C,rect:v,data:w}}),()=>i({type:K.UnregisterDroppable,key:o,id:a})),[a]),d.useEffect(()=>{n!==x.current.disabled&&(i({type:K.SetDroppableDisabled,id:a,key:o,disabled:n}),x.current.disabled=n)},[a,o,n,i]),{active:l,rect:v,isOver:u?.id===a,node:C,over:u,setNodeRef:f}}function Po(t){let{animation:s,children:n}=t;const[a,r]=d.useState(null),[o,l]=d.useState(null),i=It(n);return!n&&!a&&i&&r(i),Ee(()=>{if(!o)return;const u=a?.key,m=a?.props.id;if(u==null||m==null){r(null);return}Promise.resolve(s(m,o)).then(()=>{r(null)})},[s,a,o]),H.createElement(H.Fragment,null,n,a?d.cloneElement(a,{ref:l}):null)}const _o={x:0,y:0,scaleX:1,scaleY:1};function Oo(t){let{children:s}=t;return H.createElement(Nt.Provider,{value:_n},H.createElement(Kt.Provider,{value:_o},s))}const Io={position:"fixed",touchAction:"none"},$o=t=>Yt(t)?"transform 250ms ease":void 0,Bo=d.forwardRef((t,s)=>{let{as:n,activatorEvent:a,adjustScale:r,children:o,className:l,rect:i,style:u,transform:m,transition:x=$o}=t;if(!i)return null;const h=r?m:{...m,scaleX:1,scaleY:1},v={...Io,width:i.width,height:i.height,top:i.top,left:i.left,transform:He.Transform.toString(h),transformOrigin:r&&a?Mr(a,i):void 0,transition:typeof x=="function"?x(a):x,...u};return H.createElement(n,{className:l,style:v,ref:s},o)}),zo=t=>s=>{let{active:n,dragOverlay:a}=s;const r={},{styles:o,className:l}=t;if(o!=null&&o.active)for(const[i,u]of Object.entries(o.active))u!==void 0&&(r[i]=n.node.style.getPropertyValue(i),n.node.style.setProperty(i,u));if(o!=null&&o.dragOverlay)for(const[i,u]of Object.entries(o.dragOverlay))u!==void 0&&a.node.style.setProperty(i,u);return l!=null&&l.active&&n.node.classList.add(l.active),l!=null&&l.dragOverlay&&a.node.classList.add(l.dragOverlay),function(){for(const[u,m]of Object.entries(r))n.node.style.setProperty(u,m);l!=null&&l.active&&n.node.classList.remove(l.active)}},qo=t=>{let{transform:{initial:s,final:n}}=t;return[{transform:He.Transform.toString(s)},{transform:He.Transform.toString(n)}]},Uo={duration:250,easing:"ease",keyframes:qo,sideEffects:zo({styles:{active:{opacity:"0"}}})};function Vo(t){let{config:s,draggableNodes:n,droppableContainers:a,measuringConfiguration:r}=t;return Wt((o,l)=>{if(s===null)return;const i=n.get(o);if(!i)return;const u=i.node.current;if(!u)return;const m=Pn(l);if(!m)return;const{transform:x}=ae(l).getComputedStyle(l),h=Cn(x);if(!h)return;const v=typeof s=="function"?s:Ho(s);return Tn(u,r.draggable.measure),v({active:{id:o,data:i.data,node:u,rect:r.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:l,rect:r.dragOverlay.measure(m)},droppableContainers:a,measuringConfiguration:r,transform:h})})}function Ho(t){const{duration:s,easing:n,sideEffects:a,keyframes:r}={...Uo,...t};return o=>{let{active:l,dragOverlay:i,transform:u,...m}=o;if(!s)return;const x={x:i.rect.left-l.rect.left,y:i.rect.top-l.rect.top},h={scaleX:u.scaleX!==1?l.rect.width*u.scaleX/i.rect.width:1,scaleY:u.scaleY!==1?l.rect.height*u.scaleY/i.rect.height:1},v={x:u.x-x.x,y:u.y-x.y,...h},p=r({...m,active:l,dragOverlay:i,transform:{initial:u,final:v}}),[N]=p,y=p[p.length-1];if(JSON.stringify(N)===JSON.stringify(y))return;const S=a?.({active:l,dragOverlay:i,...m}),g=i.node.animate(p,{duration:s,easing:n,fill:"forwards"});return new Promise(k=>{g.onfinish=()=>{S?.(),k()}})}}let Js=0;function Wo(t){return d.useMemo(()=>{if(t!=null)return Js++,Js},[t])}const Yo=H.memo(t=>{let{adjustScale:s=!1,children:n,dropAnimation:a,style:r,transition:o,modifiers:l,wrapperElement:i="div",className:u,zIndex:m=999}=t;const{activatorEvent:x,active:h,activeNodeRect:v,containerNodeRect:p,draggableNodes:N,droppableContainers:y,dragOverlay:S,over:g,measuringConfiguration:k,scrollableAncestors:E,scrollableAncestorRects:M,windowRect:C}=$n(),f=d.useContext(Kt),w=Wo(h?.id),j=In(l,{activatorEvent:x,active:h,activeNodeRect:v,containerNodeRect:p,draggingNodeRect:S.rect,over:g,overlayNodeRect:S.rect,scrollableAncestors:E,scrollableAncestorRects:M,transform:f,windowRect:C}),D=Ms(v),L=Vo({config:a,draggableNodes:N,droppableContainers:y,measuringConfiguration:k}),I=D?S.setRef:void 0;return H.createElement(Oo,null,H.createElement(Po,{animation:L},h&&w?H.createElement(Bo,{key:w,id:h.id,ref:I,as:i,activatorEvent:x,adjustScale:s,className:u,transition:o,rect:D,style:{zIndex:m,...r},transform:j},n):null))});function Bn(t,s,n){const a=t.slice();return a.splice(n<0?a.length+n:n,0,a.splice(s,1)[0]),a}function Xo(t,s){return t.reduce((n,a,r)=>{const o=s.get(a);return o&&(n[r]=o),n},Array(t.length))}function Mt(t){return t!==null&&t>=0}function Go(t,s){if(t===s)return!0;if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==s[n])return!1;return!0}function Ko(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const zn=t=>{let{rects:s,activeIndex:n,overIndex:a,index:r}=t;const o=Bn(s,a,n),l=s[r],i=o[r];return!i||!l?null:{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}},Tt={scaleX:1,scaleY:1},Jo=t=>{var s;let{activeIndex:n,activeNodeRect:a,index:r,rects:o,overIndex:l}=t;const i=(s=o[n])!=null?s:a;if(!i)return null;if(r===n){const m=o[l];return m?{x:0,y:n<l?m.top+m.height-(i.top+i.height):m.top-i.top,...Tt}:null}const u=Zo(o,r,n);return r>n&&r<=l?{x:0,y:-i.height-u,...Tt}:r<n&&r>=l?{x:0,y:i.height+u,...Tt}:{x:0,y:0,...Tt}};function Zo(t,s,n){const a=t[s],r=t[s-1],o=t[s+1];return a?n<s?r?a.top-(r.top+r.height):o?o.top-(a.top+a.height):0:o?o.top-(a.top+a.height):r?a.top-(r.top+r.height):0:0}const qn="Sortable",Un=H.createContext({activeIndex:-1,containerId:qn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:zn,disabled:{draggable:!1,droppable:!1}});function Qo(t){let{children:s,id:n,items:a,strategy:r=zn,disabled:o=!1}=t;const{active:l,dragOverlay:i,droppableRects:u,over:m,measureDroppableContainers:x}=$n(),h=wt(qn,n),v=i.rect!==null,p=d.useMemo(()=>a.map(f=>typeof f=="object"&&"id"in f?f.id:f),[a]),N=l!=null,y=l?p.indexOf(l.id):-1,S=m?p.indexOf(m.id):-1,g=d.useRef(p),k=!Go(p,g.current),E=S!==-1&&y===-1||k,M=Ko(o);Ee(()=>{k&&N&&x(p)},[k,p,N,x]),d.useEffect(()=>{g.current=p},[p]);const C=d.useMemo(()=>({activeIndex:y,containerId:h,disabled:M,disableTransforms:E,items:p,overIndex:S,useDragOverlay:v,sortedRects:Xo(p,u),strategy:r}),[y,h,M.draggable,M.droppable,E,p,S,u,v,r]);return H.createElement(Un.Provider,{value:C},s)}const ei=t=>{let{id:s,items:n,activeIndex:a,overIndex:r}=t;return Bn(n,a,r).indexOf(s)},ti=t=>{let{containerId:s,isSorting:n,wasDragging:a,index:r,items:o,newIndex:l,previousItems:i,previousContainerId:u,transition:m}=t;return!m||!a||i!==o&&r===l?!1:n?!0:l!==r&&s===u},si={duration:200,easing:"ease"},Vn="transform",ni=He.Transition.toString({property:Vn,duration:0,easing:"linear"}),ai={roleDescription:"sortable"};function ri(t){let{disabled:s,index:n,node:a,rect:r}=t;const[o,l]=d.useState(null),i=d.useRef(n);return Ee(()=>{if(!s&&n!==i.current&&a.current){const u=r.current;if(u){const m=at(a.current,{ignoreTransform:!0}),x={x:u.left-m.left,y:u.top-m.top,scaleX:u.width/m.width,scaleY:u.height/m.height};(x.x||x.y)&&l(x)}}n!==i.current&&(i.current=n)},[s,n,a,r]),d.useEffect(()=>{o&&l(null)},[o]),o}function oi(t){let{animateLayoutChanges:s=ti,attributes:n,disabled:a,data:r,getNewIndex:o=ei,id:l,strategy:i,resizeObserverConfig:u,transition:m=si}=t;const{items:x,containerId:h,activeIndex:v,disabled:p,disableTransforms:N,sortedRects:y,overIndex:S,useDragOverlay:g,strategy:k}=d.useContext(Un),E=ii(a,p),M=x.indexOf(l),C=d.useMemo(()=>({sortable:{containerId:h,index:M,items:x},...r}),[h,r,M,x]),f=d.useMemo(()=>x.slice(x.indexOf(l)),[x,l]),{rect:w,node:j,isOver:D,setNodeRef:L}=Fo({id:l,data:C,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:f,...u}}),{active:I,activatorEvent:Y,activeNodeRect:ie,attributes:ve,setNodeRef:Ie,listeners:Ne,isDragging:Q,over:Ce,setActivatorNodeRef:le,transform:ce}=To({id:l,data:C,attributes:{...ai,...n},disabled:E.draggable}),$e=pr(L,Ie),X=!!I,be=X&&!N&&Mt(v)&&Mt(S),Se=!g&&Q,We=Se&&be?ce:null,Ze=be?We??(i??k)({rects:y,activeNodeRect:ie,activeIndex:v,overIndex:S,index:M}):null,Me=Mt(v)&&Mt(S)?o({id:l,items:x,activeIndex:v,overIndex:S}):M,ke=I?.id,$=d.useRef({activeId:ke,items:x,newIndex:Me,containerId:h}),z=x!==$.current.items,W=s({active:I,containerId:h,isDragging:Q,isSorting:X,id:l,index:M,items:x,newIndex:$.current.newIndex,previousItems:$.current.items,previousContainerId:$.current.containerId,transition:m,wasDragging:$.current.activeId!=null}),Pe=ri({disabled:!W,index:M,node:j,rect:w});return d.useEffect(()=>{X&&$.current.newIndex!==Me&&($.current.newIndex=Me),h!==$.current.containerId&&($.current.containerId=h),x!==$.current.items&&($.current.items=x)},[X,Me,h,x]),d.useEffect(()=>{if(ke===$.current.activeId)return;if(ke!=null&&$.current.activeId==null){$.current.activeId=ke;return}const F=setTimeout(()=>{$.current.activeId=ke},50);return()=>clearTimeout(F)},[ke]),{active:I,activeIndex:v,attributes:ve,data:C,rect:w,index:M,newIndex:Me,items:x,isOver:D,isSorting:X,isDragging:Q,listeners:Ne,node:j,overIndex:S,over:Ce,setNodeRef:$e,setActivatorNodeRef:le,setDroppableNodeRef:L,setDraggableNodeRef:Ie,transform:Pe??Ze,transition:re()};function re(){if(Pe||z&&$.current.newIndex===M)return ni;if(!(Se&&!Yt(Y)||!m)&&(X||W))return He.Transition.toString({...m,property:Vn})}}function ii(t,s){var n,a;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:s.draggable,droppable:(a=t?.droppable)!=null?a:s.droppable}}function qt(t){if(!t)return!1;const s=t.data.current;return!!(s&&"sortable"in s&&typeof s.sortable=="object"&&"containerId"in s.sortable&&"items"in s.sortable&&"index"in s.sortable)}const li=[O.Down,O.Right,O.Up,O.Left],ci=(t,s)=>{let{context:{active:n,collisionRect:a,droppableRects:r,droppableContainers:o,over:l,scrollableAncestors:i}}=s;if(li.includes(t.code)){if(t.preventDefault(),!n||!a)return;const u=[];o.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const v=r.get(h.id);if(v)switch(t.code){case O.Down:a.top<v.top&&u.push(h);break;case O.Up:a.top>v.top&&u.push(h);break;case O.Left:a.left>v.left&&u.push(h);break;case O.Right:a.left<v.left&&u.push(h);break}});const m=Lr({collisionRect:a,droppableRects:r,droppableContainers:u});let x=jn(m,"id");if(x===l?.id&&m.length>1&&(x=m[1].id),x!=null){const h=o.get(n.id),v=o.get(x),p=v?r.get(v.id):null,N=v?.node.current;if(N&&p&&h&&v){const S=Xt(N).some((f,w)=>i[w]!==f),g=Hn(h,v),k=di(h,v),E=S||!g?{x:0,y:0}:{x:k?a.width-p.width:0,y:k?a.height-p.height:0},M={x:p.left,y:p.top};return E.x&&E.y?M:vt(M,E)}}}};function Hn(t,s){return!qt(t)||!qt(s)?!1:t.data.current.sortable.containerId===s.data.current.sortable.containerId}function di(t,s){return!qt(t)||!qt(s)||!Hn(t,s)?!1:t.data.current.sortable.index<s.data.current.sortable.index}function ui(t,s,n){const a={...t};return s.top+t.y<=n.top?a.y=n.top-s.top:s.bottom+t.y>=n.top+n.height&&(a.y=n.top+n.height-s.bottom),s.left+t.x<=n.left?a.x=n.left-s.left:s.right+t.x>=n.left+n.width&&(a.x=n.left+n.width-s.right),a}const mi=t=>{let{transform:s,draggingNodeRect:n,windowRect:a}=t;return!n||!a?s:ui(s,n,a)},hi=t=>{const s=Rr(t);if(s.length>0)return s;const n=_r(t);return n.length>0?n:wn(t)},xi=()=>Ar(is(As,{activationConstraint:{distance:8}}),is(Ln,{activationConstraint:{delay:150,tolerance:5}}),is(Ds,{coordinateGetter:ci})),us={formBuilder:{collisionDetection:hi,modifiers:[mi],autoScroll:{threshold:{x:.2,y:.2},acceleration:10}}},Wn=(t="drag")=>typeof crypto<"u"&&"randomUUID"in crypto?`${t}_${crypto.randomUUID()}`:`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;class pi{contexts=new Map;registerContext(s,n){this.contexts.set(s,new Set(n))}getContextItems(s){const n=this.contexts.get(s);return n?Array.from(n):[]}ensureUniqueIds(s,n){const a=new Set;return this.contexts.forEach((r,o)=>{o!==s&&r.forEach(l=>a.add(l))}),n.map(r=>a.has(r)?Wn(`${s}_${r}`):r)}clearContext(s){this.contexts.delete(s)}clearAll(){this.contexts.clear()}}const fi=new pi,gi=()=>{let t={isDragging:!1,draggedItem:null,dragOverId:null};const s=new Set,n=a=>{t={...t,...a},s.forEach(r=>r(t))};return{getState:()=>t,setState:n,subscribe:a=>(s.add(a),()=>s.delete(a)),handleDragStart:(a,r)=>{n({isDragging:!0,draggedItem:r,dragOverId:null})},handleDragOver:a=>{n({dragOverId:a.over?.id||null})},handleDragEnd:()=>{n({isDragging:!1,draggedItem:null,dragOverId:null})}}},vi=({show:t})=>t?e.jsxs("div",{className:"flex justify-between items-start mb-6 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold",children:"FormPro"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Form powered by IPLC"})]}):null,bi=({components:t,pages:s,isMultiPage:n=!1,title:a,description:r="",className:o="",showIplcLogo:l})=>{const[i,u]=d.useState(0),m=n&&s?s[i]?.components||[]:t||[],x=[...m].sort((N,y)=>N.order-y.order),h=s?.length||1,v=s?.[i],p=N=>{const{type:y,label:S,props:g={}}=N,k=g.required||!1,E=g.placeholder||"",M=g.description||"",C=g.options||[],f=e.jsxs(mt,{className:"text-sm font-medium text-gray-700",children:[S,k&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),M&&e.jsx("span",{className:"text-xs text-gray-500 font-normal block mt-1",children:M})]});switch(y){case"text_input":return e.jsxs("div",{className:"space-y-2",children:[f,e.jsx(B,{placeholder:E,disabled:!0,className:"bg-gray-50"})]},N.id);case"textarea":return e.jsxs("div",{className:"space-y-2",children:[f,e.jsx(ft,{placeholder:E,disabled:!0,className:"bg-gray-50 min-h-[100px]"})]},N.id);case"select":return e.jsxs("div",{className:"space-y-2",children:[f,e.jsxs("select",{disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:E||"Select an option..."}),C.map((w,j)=>e.jsx("option",{value:w,children:w},j))]})]},N.id);case"radio":return e.jsxs("div",{className:"space-y-3",children:[f,e.jsx("div",{className:"space-y-2",children:C.map((w,j)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:w,disabled:!0,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx(mt,{className:"text-sm text-gray-600",children:w})]},j))})]},N.id);case"checkbox":return e.jsxs("div",{className:"space-y-3",children:[f,e.jsx("div",{className:"space-y-2",children:C.map((w,j)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",disabled:!0,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx(mt,{className:"text-sm text-gray-600",children:w})]},j))})]},N.id);case"date":return e.jsxs("div",{className:"space-y-2",children:[f,e.jsxs("div",{className:"relative",children:[e.jsx(B,{type:"date",disabled:!0,className:"bg-gray-50"}),e.jsx(_t,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]},N.id);case"number":return e.jsxs("div",{className:"space-y-2",children:[f,e.jsx(B,{type:"number",placeholder:E,min:g.min,max:g.max,disabled:!0,className:"bg-gray-50"}),(g.min!==void 0||g.max!==void 0)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Range: ",g.min||0," - ",g.max||"∞"]})]},N.id);case"scale":return e.jsxs("div",{className:"space-y-3",children:[f,e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:g.min||1}),e.jsx("span",{className:"text-sm text-gray-500",children:g.max||10})]}),e.jsx("div",{className:"flex space-x-2",children:Array.from({length:(g.max||10)-(g.min||1)+1},(w,j)=>{const D=(g.min||1)+j;return e.jsx("button",{disabled:!0,className:"w-8 h-8 rounded-full border-2 border-gray-300 bg-gray-50 text-sm text-gray-600 flex items-center justify-center font-medium shadow-sm",children:D},D)})})]})]},N.id);case"ai_summary":return e.jsx("div",{children:e.jsx(on,{component:N,isEditing:!1,allComponents:m})},N.id);case"title_subtitle":return e.jsx(an,{component:N},N.id);case"subtitle":return e.jsx(nn,{props:N.props},N.id);case"line_separator":return e.jsx(sn,{props:N.props},N.id);case"evaluation_section":{const j=bs.evaluationSections.find(D=>D.id===N.sectionId);return j?e.jsxs("div",{className:"space-y-4 p-4 border-2 border-blue-200 rounded-lg bg-blue-50/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:N.label}),e.jsx(G,{variant:"outline",className:"text-xs",children:j.discipline})]}),j.description&&e.jsx("p",{className:"text-sm text-gray-600",children:j.description}),e.jsx("div",{className:"space-y-3 mt-4",children:j.fields.map((D,L)=>{switch(`${N.id}${D.id}`,D.type){case"section_header":return e.jsx("div",{className:`mt-${D.level===1?"4":"3"} mb-2`,children:e.jsx("h4",{className:`text-${D.level===1?"lg":"md"} font-semibold text-gray-800`,children:D.label})},L);case"text":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[D.label,D.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(B,{disabled:!0,placeholder:`Enter ${D.label.toLowerCase()}`,className:"bg-gray-50"})]},L);case"textarea":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[D.label,D.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(ft,{disabled:!0,placeholder:`Enter ${D.label.toLowerCase()}`,rows:D.rows||3,className:"bg-gray-50 min-h-[60px]"})]},L);case"date":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[D.label,D.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{type:"date",disabled:!0,className:"bg-gray-50"}),e.jsx(_t,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]},L);case"select":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[D.label,D.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("select",{disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",children:[e.jsxs("option",{value:"",children:["Select ",D.label.toLowerCase()]}),D.options?.map((I,Y)=>e.jsx("option",{value:I,children:I},Y))]})]},L);case"number":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[D.label,D.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(B,{type:"number",disabled:!0,placeholder:`Enter ${D.label.toLowerCase()}`,min:D.min,max:D.max,className:"bg-gray-50"})]},L);case"subsection":return e.jsx("div",{className:"mt-3 mb-2",children:e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:D.label})},L);default:return e.jsxs("div",{className:"text-sm text-gray-500",children:[D.label," (",D.type,")"]},L)}})})]},N.id):e.jsx("div",{className:"p-4 border border-red-300 rounded bg-red-50",children:e.jsxs("p",{className:"text-sm text-red-600",children:["Evaluation section not found: ",N.sectionId]})},N.id)}default:return e.jsx("div",{className:"space-y-2",children:e.jsxs(mt,{className:"text-sm text-gray-500",children:["Unknown Component Type: ",y]})},N.id)}};return e.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg h-full overflow-y-auto ${o}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Preview"}),e.jsxs(G,{variant:"secondary",className:"text-xs",children:[x.length," ",x.length===1?"field":"fields"]})]}),n&&s&&s.length>1&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["Page ",i+1," of ",h]})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"This is how your form will appear to users"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx(vi,{show:l??!0}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a||"Untitled Form"}),r&&e.jsx("p",{className:"text-gray-600",children:r}),n&&s&&s.length>1&&e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx(sa,{value:(i+1)/h*100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Step ",i+1," of ",h]}),v&&e.jsx("span",{className:"font-medium",children:v.title})]})]})]}),n&&v&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:v.title}),v.description&&e.jsx("p",{className:"text-gray-600 text-sm",children:v.description})]}),x.length>0?e.jsxs("div",{className:"space-y-6",children:[x.map(p),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:n&&s&&s.length>1?e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(V,{disabled:!0,variant:"outline",className:i===0?"invisible":"",children:[e.jsx(mn,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsx(V,{disabled:!0,className:"bg-blue-600 hover:bg-blue-700",children:i===h-1?"Submit Form":e.jsxs(e.Fragment,{children:["Next",e.jsx(Pt,{className:"h-4 w-4 ml-1"})]})})]}):e.jsx(V,{disabled:!0,className:"bg-blue-600 hover:bg-blue-700",children:"Submit Form"})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(Ft,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No components yet"}),e.jsx("p",{className:"text-gray-400",children:"Drag components from the palette to start building your form"})]})]})})]})},Zs={ClipboardList:e.jsx(rn,{className:"h-4 w-4"}),Brain:e.jsx(ln,{className:"h-4 w-4"}),Hand:e.jsx(gn,{className:"h-4 w-4"}),MessageSquare:e.jsx(ma,{className:"h-4 w-4"}),Award:e.jsx(ja,{className:"h-4 w-4"}),FileText:e.jsx(Je,{className:"h-4 w-4"}),TrendingUp:e.jsx(dr,{className:"h-4 w-4"})},yi={"Initial Assessment":"bg-[#219FD9]/20 text-[#219FD9] border-[#219FD9]/30","Cognitive Assessment":"bg-purple-500/20 text-purple-300 border-purple-500/30","Motor Assessment":"bg-[#80C97B]/20 text-[#80C97B] border-[#80C97B]/30","Communication Assessment":"bg-blue-500/20 text-blue-300 border-blue-500/30","Functional Assessment":"bg-[#F9C04D]/20 text-[#F9C04D] border-[#F9C04D]/30","Testing Results":"bg-yellow-500/20 text-yellow-300 border-yellow-500/30",Summary:"bg-gray-500/20 text-gray-300 border-gray-500/30","Progress Monitoring":"bg-[#27599F]/20 text-[#219FD9] border-[#27599F]/30"},Qs={SLP:"bg-blue-500/20 text-blue-300 border-blue-500/30",OT:"bg-[#80C97B]/20 text-[#80C97B] border-[#80C97B]/30",Both:"bg-[#219FD9]/20 text-[#219FD9] border-[#219FD9]/30"},ji=({className:t="",onSectionDrag:s,onComponentClick:n,selectedDiscipline:a="Both",isCollapsed:r,onCollapsedChange:o})=>{H.useEffect(()=>{console.log("EvaluationSectionsModule mounted at",new Date().toISOString()),console.log("Props received:",{hasOnSectionDrag:!!s,hasOnComponentClick:!!n,onComponentClickType:typeof n,selectedDiscipline:a})},[]);const[l,i]=d.useState(new Set),[u,m]=d.useState(!1),[x,h]=d.useState(!1),v=r!==void 0?r:u,p=o||m;d.useEffect(()=>{const f=()=>{h(window.innerWidth<768)};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),d.useEffect(()=>{x&&!v&&p(!0)},[x]);const N=bs.evaluationSections,y=f=>({id:`evaluation_section_${Date.now()}`,type:"evaluation_section",sectionId:f.id,label:f.label,collapsed:!1,fieldValues:{},props:{required:!1,description:f.description,editable:!0}}),S=(f,w)=>{console.log("EvaluationSectionsModule: handleDragStart called for section",w.label);const j=y(w);s&&(console.log("EvaluationSectionsModule: Calling onSectionDrag with component",j),s(j)),f.dataTransfer.setData("application/json",JSON.stringify(j)),f.dataTransfer.effectAllowed="copy"},g=f=>{if(console.log("EvaluationSectionsModule: handleClick called for",f.type),n){const w=y(f);console.log("EvaluationSectionsModule: calling onComponentClick with",w),n(w)}else console.log("EvaluationSectionsModule: onComponentClick not provided")},k=f=>{i(w=>{const j=new Set(w);return j.has(f)?j.delete(f):j.add(f),j})},E=N.filter(f=>a==="Both"||f.discipline===a||f.discipline==="Both"),M=E.reduce((f,w)=>(f[w.category]||(f[w.category]=[]),f[w.category].push(w),f),{}),C=f=>{switch(f.type){case"section_header":return e.jsx("h3",{className:`font-bold text-white ${f.level===1?"text-lg":"text-base"}`,children:f.label});case"subsection":return e.jsx("h4",{className:"font-semibold text-[#219FD9] text-sm mt-2",children:f.label});case"text":case"date":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[f.label," ",f.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsx("div",{className:"h-8 bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1"})]});case"textarea":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[f.label," ",f.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsx("div",{className:"bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1",style:{height:`${(typeof f.rows=="number"?f.rows:3)*1.5}rem`}})]});case"select":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[f.label," ",f.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsxs("div",{className:"h-8 bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1 flex items-center px-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:f.options?.[0]||"Select..."}),e.jsx(Os,{className:"h-3 w-3 ml-auto text-gray-400"})]})]});case"number":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[f.label," ",f.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsx("div",{className:"h-8 bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1"})]});case"rating_scale":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:f.label}),e.jsx("div",{className:"flex gap-1 mt-1",children:f.scale?.map((w,j)=>e.jsx("div",{className:"flex-1 h-6 bg-[#27599F]/20 border border-[#27599F]/30 rounded text-xs flex items-center justify-center text-gray-300",children:w},w))}),f.labels&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:f.labels[0]}),e.jsx("span",{children:f.labels[f.labels.length-1]})]})]});case"checkbox_group":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:f.label}),e.jsxs("div",{className:"space-y-1 mt-1",children:[f.options?.slice(0,3).map((w,j)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 border border-[#27599F]/30 rounded"}),e.jsx("span",{className:"text-xs text-gray-300",children:w})]},j)),f.options&&f.options.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",f.options.length-3," more"]})]})]});case"rating_grid":case"assistance_grid":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:f.label}),e.jsxs("div",{className:"bg-[#27599F]/10 rounded border border-[#27599F]/30 p-2 mt-1",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-1 text-xs",children:[e.jsx("div",{}),f.columns?.slice(0,4).map((w,j)=>e.jsx("div",{className:"text-center text-gray-400 truncate",children:w},j)),Array.isArray(f.rows)&&f.rows.slice(0,2).map((w,j)=>e.jsxs(H.Fragment,{children:[e.jsx("div",{className:"text-gray-300 truncate",children:w}),f.columns?.slice(0,4).map((D,L)=>e.jsx("div",{className:"h-4 bg-[#27599F]/20 rounded"},L))]},j))]}),Array.isArray(f.rows)&&f.rows.length>2&&e.jsxs("div",{className:"text-xs text-gray-400 text-center mt-1",children:["+",f.rows.length-2," more rows"]})]})]});case"repeating_group":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:f.label}),e.jsxs("div",{className:"bg-[#27599F]/10 rounded border border-[#27599F]/30 p-2 mt-1",children:[e.jsx("div",{className:"space-y-1",children:f.fields?.slice(0,2).map((w,j)=>e.jsxs("div",{className:"text-xs text-gray-300",children:["• ",w.label]},j))}),e.jsxs(V,{variant:"outline",size:"sm",className:"mt-2 h-6 text-xs border-[#219FD9]/30 text-[#219FD9] hover:bg-[#219FD9]/10",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),f.addButtonLabel||"Add Item"]})]})]});default:return null}};return e.jsxs("div",{className:Fe("evaluation-sections-module relative h-full flex flex-col bg-[#153F81] transition-all duration-300 ease-in-out","iplc-shadow-xl border-r-2 border-[#27599F]/30",v?"w-16":"w-80",x&&"fixed top-0 left-0 z-50 h-screen",x&&v&&"-translate-x-full",t),children:[e.jsx("button",{onClick:()=>p(!v),className:Fe("absolute -right-3 top-20 z-50","w-6 h-6 rounded-full bg-gradient-metallic-primary iplc-shadow-md","flex items-center justify-center","hover:iplc-shadow-lg transition-all duration-200","text-white"),"aria-label":v?"Expand sidebar":"Collapse sidebar",children:v?e.jsx(Pt,{className:"h-3 w-3"}):e.jsx(mn,{className:"h-3 w-3"})}),x&&e.jsx("button",{onClick:()=>p(!v),className:Fe("fixed top-4 left-4 z-50","w-10 h-10 rounded-lg bg-gradient-metallic-primary iplc-shadow-md","flex items-center justify-center","hover:iplc-shadow-lg transition-all duration-200",v?"visible":"invisible"),"aria-label":"Open evaluation sections",children:e.jsx(ua,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:Fe("p-4 border-b border-[#27599F]/30 flex-shrink-0 bg-gradient-to-br from-[#153F81] to-[#27599F]/50",v&&"px-2"),children:[e.jsxs("div",{className:Fe("flex items-center gap-2 mb-2",v&&"justify-center"),children:[e.jsx(Je,{className:"h-5 w-5 text-[#F9C04D] flex-shrink-0"}),!v&&e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Evaluation Sections"})]}),!v&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Comprehensive evaluation modules for clinical assessments"}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx(G,{variant:"outline",className:`text-xs px-2 py-0.5 border ${Qs[a]}`,children:a==="Both"?"All Disciplines":a}),e.jsxs(G,{variant:"outline",className:"text-xs px-2 py-0.5 border border-[#27599F]/30 text-gray-300",children:[E.length," sections"]})]})]})]}),e.jsx("div",{className:Fe("flex-1 overflow-y-auto custom-scrollbar space-y-6",v?"px-2 py-4":"p-4"),children:Object.entries(M).map(([f,w])=>e.jsxs("div",{children:[!v&&e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:f}),e.jsx(G,{variant:"outline",className:`text-xs px-2 py-0.5 border ${yi[f]||"bg-gray-500/20 text-gray-300 border-gray-500/30"}`,children:w.length})]}),e.jsx("div",{className:Fe("space-y-2",v&&"space-y-3"),children:w.map(j=>v?e.jsxs("div",{className:"group relative",children:[e.jsx("button",{className:Fe("w-full p-2 rounded-lg","bg-gradient-to-br from-[#27599F]/30 to-[#153F81]/30","hover:from-[#219FD9]/40 hover:to-[#27599F]/40","border border-[#27599F]/30 hover:border-[#219FD9]/50","iplc-shadow-md hover:iplc-shadow-lg","transition-all duration-200","flex items-center justify-center"),onClick:()=>g(j),title:j.label,children:e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-[#219FD9]/20 to-[#27599F]/20 rounded",children:Zs[j.icon]||e.jsx(Je,{className:"h-4 w-4 text-[#F9C04D]"})})}),e.jsx("div",{className:Fe("absolute left-full ml-2 top-1/2 -translate-y-1/2 z-50","bg-[#153F81] border border-[#27599F]/30 rounded-lg iplc-shadow-xl","px-3 py-2 text-sm text-white","opacity-0 group-hover:opacity-100 pointer-events-none","transition-opacity duration-200","whitespace-nowrap"),children:j.label})]},j.id):e.jsx(Ut,{className:Fe("cursor-pointer transition-all duration-200","bg-gradient-to-br from-[#27599F]/20 to-[#153F81]/20","border border-[#27599F]/30 hover:border-[#219FD9]/50","hover:iplc-shadow-lg","overflow-hidden"),"data-section-id":j.id,onClick:D=>{console.log("EvaluationSectionsModule: Card onClick triggered for",j.label),console.log("Event target:",D.target),console.log("Current target:",D.currentTarget),console.log("Event type:",D.type),console.log("onComponentClick exists:",!!n),console.log("onComponentClick type:",typeof n);const L=D.target;if(L.closest(".grip-handle")||L.closest("button")){console.log("EvaluationSectionsModule: Click on interactive element, ignoring");return}if(D.stopPropagation(),n){const I=y(j);console.log("EvaluationSectionsModule: Calling onComponentClick with component",I),n(I)}else console.error("EvaluationSectionsModule: No onComponentClick handler provided!")},onMouseDown:D=>{console.log("EvaluationSectionsModule: Card onMouseDown triggered for",j.label),console.log("MouseDown target:",D.target)},onPointerDown:D=>{console.log("EvaluationSectionsModule: Card onPointerDown triggered for",j.label),console.log("PointerDown target:",D.target)},children:e.jsx(Vt,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 p-2 bg-gradient-to-br from-[#219FD9]/20 to-[#27599F]/20 rounded-md",children:Zs[j.icon]||e.jsx(Je,{className:"h-4 w-4 text-[#F9C04D]"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"text-sm font-medium text-white truncate",children:j.label}),e.jsx(G,{variant:"outline",className:`text-xs px-2 py-0.5 border ${Qs[j.discipline]}`,children:j.discipline})]}),e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:j.description}),e.jsx(V,{variant:"ghost",size:"sm",className:"h-6 text-xs p-0 hover:bg-[#27599F]/20 text-gray-300",onClick:D=>{D.stopPropagation(),k(j.id)},children:l.has(j.id)?e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"h-3 w-3 mr-1"}),"Hide Fields"]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"h-3 w-3 mr-1"}),"Preview Fields (",j.fields.length,")"]})}),l.has(j.id)&&e.jsx("div",{className:"mt-3 space-y-2 p-3 bg-[#153F81]/50 rounded-md max-h-60 overflow-y-auto border border-[#27599F]/30",children:j.fields.map((D,L)=>e.jsx("div",{children:C(D)},L))})]}),e.jsx("div",{className:"flex-shrink-0 grip-handle cursor-move p-1 hover:bg-[#27599F]/20 rounded transition-colors duration-200",draggable:!0,onDragStart:D=>{console.log("EvaluationSectionsModule: Grip handle dragStart for",j.label),D.stopPropagation(),S(D,j)},onDragEnd:D=>{console.log("EvaluationSectionsModule: Grip handle dragEnd"),D.stopPropagation()},children:e.jsx(js,{className:"h-4 w-4 text-gray-400"})})]})})},j.id))})]},f))}),!v&&e.jsx("div",{className:"p-4 border-t border-[#27599F]/30 bg-gradient-to-br from-[#27599F]/20 to-[#153F81]/20 flex-shrink-0",children:e.jsxs("div",{className:"text-xs text-gray-300",children:[e.jsxs("p",{className:"font-medium mb-2 flex items-center gap-1 text-[#F9C04D]",children:[e.jsx(rn,{className:"h-3 w-3"}),"Usage Tips:"]}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Drag sections to add comprehensive evaluations"}),e.jsx("li",{children:"• Each section includes multiple assessment fields"}),e.jsx("li",{children:"• Fields are customizable via Property Grid"}),e.jsx("li",{children:"• Sections follow clinical best practices"})]})]})})]})},wi=[{id:"assessment-tools",name:"Assessment Tools",icon:"stethoscope",description:"Standardized assessment instruments and evaluation tools",subcategories:[{id:"motor-assessments",name:"Motor & Physical Assessments",components:[{id:"rom-assessment",name:"Range of Motion Assessment",type:"rom_assessment",discipline:"OT",description:"Document joint range of motion measurements",fields:[{name:"joint",type:"select",label:"Joint",options:["Shoulder","Elbow","Wrist","Hip","Knee","Ankle"]},{name:"movement",type:"select",label:"Movement",options:["Flexion","Extension","Abduction","Adduction","Rotation"]},{name:"degrees",type:"number",label:"Degrees"}]},{id:"strength-assessment",name:"Manual Muscle Testing",type:"mmt_assessment",discipline:"OT",description:"Document muscle strength using standard MMT scale",config:{scale:"0-5",includeGravity:!0}},{id:"balance-assessment",name:"Balance Assessment",type:"balance_assessment",discipline:"Both",description:"Evaluate static and dynamic balance",fields:[{name:"testType",type:"select",label:"Test Type",options:["Berg Balance Scale","Tinetti","Single Leg Stance","Functional Reach"]}]}]},{id:"cognitive-assessments",name:"Cognitive & Language Assessments",components:[{id:"moca-assessment",name:"Montreal Cognitive Assessment (MoCA)",type:"moca_assessment",discipline:"Both",description:"Standardized cognitive screening tool"},{id:"mmse-assessment",name:"Mini-Mental State Exam (MMSE)",type:"mmse_assessment",discipline:"Both",description:"Brief cognitive status examination"},{id:"language-assessment",name:"Language Assessment Battery",type:"language_assessment",discipline:"SLP",description:"Comprehensive language evaluation",fields:[{name:"domain",type:"checkbox",label:"Domains Assessed",options:["Expressive Language","Receptive Language","Pragmatics","Reading","Writing"]}]}]}]},{id:"adl-iadl",name:"ADL & IADL Assessments",icon:"home",description:"Activities of Daily Living evaluations",subcategories:[{id:"basic-adl",name:"Basic ADLs",components:[{id:"bathing-assessment",name:"Bathing/Hygiene Assessment",type:"bathing_assessment",discipline:"OT",description:"Evaluate bathing and personal hygiene skills"},{id:"dressing-assessment",name:"Dressing Assessment",type:"dressing_assessment",discipline:"OT",description:"Assess upper and lower body dressing abilities"},{id:"feeding-assessment",name:"Feeding/Eating Assessment",type:"feeding_assessment",discipline:"Both",description:"Evaluate feeding and swallowing function"},{id:"toileting-assessment",name:"Toileting Assessment",type:"toileting_assessment",discipline:"OT",description:"Assess toilet transfer and hygiene"}]},{id:"instrumental-adl",name:"Instrumental ADLs",components:[{id:"cooking-assessment",name:"Meal Preparation Assessment",type:"cooking_assessment",discipline:"OT",description:"Evaluate cooking and kitchen safety skills"},{id:"medication-management",name:"Medication Management",type:"medication_assessment",discipline:"OT",description:"Assess ability to manage medications independently"},{id:"money-management",name:"Financial Management",type:"money_assessment",discipline:"OT",description:"Evaluate money handling and budgeting skills"}]}]},{id:"communication",name:"Communication & Swallowing",icon:"user",description:"Speech, language, and swallowing assessments",subcategories:[{id:"speech-assessments",name:"Speech Production",components:[{id:"articulation-assessment",name:"Articulation Assessment",type:"articulation_assessment",discipline:"SLP",description:"Evaluate speech sound production"},{id:"fluency-assessment",name:"Fluency Assessment",type:"fluency_assessment",discipline:"SLP",description:"Assess stuttering and fluency disorders"},{id:"voice-assessment",name:"Voice Assessment",type:"voice_assessment",discipline:"SLP",description:"Evaluate vocal quality and function"}]},{id:"swallowing-assessments",name:"Swallowing & Dysphagia",components:[{id:"bedside-swallow",name:"Bedside Swallow Evaluation",type:"bedside_swallow",discipline:"SLP",description:"Clinical swallowing assessment"},{id:"oral-motor-exam",name:"Oral Motor Examination",type:"oral_motor_exam",discipline:"SLP",description:"Assess oral motor structure and function"}]}]},{id:"pediatric",name:"Pediatric Assessments",icon:"baby",description:"Child-specific evaluation tools",subcategories:[{id:"developmental",name:"Developmental Assessments",components:[{id:"peabody-assessment",name:"Peabody Developmental Motor Scales",type:"peabody_assessment",discipline:"OT",description:"Assess gross and fine motor development"},{id:"sensory-profile",name:"Sensory Profile",type:"sensory_profile",discipline:"OT",description:"Evaluate sensory processing patterns"},{id:"pls-assessment",name:"Preschool Language Scales",type:"pls_assessment",discipline:"SLP",description:"Comprehensive language assessment for young children"}]},{id:"school-function",name:"School Function",components:[{id:"handwriting-assessment",name:"Handwriting Assessment",type:"handwriting_assessment",discipline:"OT",description:"Evaluate handwriting legibility and speed"},{id:"school-amps",name:"School AMPS",type:"school_amps",discipline:"OT",description:"Assessment of Motor and Process Skills in school"}]}]},{id:"specialized",name:"Specialized Assessments",icon:"brain",description:"Condition-specific evaluation tools",subcategories:[{id:"neurological",name:"Neurological Conditions",components:[{id:"stroke-assessment",name:"Stroke Impact Scale",type:"stroke_assessment",discipline:"Both",description:"Assess stroke recovery across multiple domains"},{id:"aphasia-assessment",name:"Aphasia Assessment",type:"aphasia_assessment",discipline:"SLP",description:"Comprehensive aphasia evaluation"},{id:"apraxia-assessment",name:"Apraxia Battery",type:"apraxia_assessment",discipline:"Both",description:"Assess motor planning and execution"}]},{id:"cognitive-communication",name:"Cognitive-Communication",components:[{id:"rbans-assessment",name:"RBANS",type:"rbans_assessment",discipline:"SLP",description:"Repeatable Battery for Assessment of Neuropsychological Status"},{id:"executive-function",name:"Executive Function Assessment",type:"executive_assessment",discipline:"Both",description:"Evaluate planning, organization, and problem-solving"}]}]}],Ni={categories:wi},Ci={activity:e.jsx(ba,{className:"h-4 w-4"}),brain:e.jsx(ln,{className:"h-4 w-4"}),heart:e.jsx(Ya,{className:"h-4 w-4"}),stethoscope:e.jsx(ar,{className:"h-4 w-4"}),user:e.jsx(la,{className:"h-4 w-4"}),filetext:e.jsx(Je,{className:"h-4 w-4"}),calendar:e.jsx(_t,{className:"h-4 w-4"}),clock:e.jsx(dn,{className:"h-4 w-4"}),pill:e.jsx(Qa,{className:"h-4 w-4"}),testtube:e.jsx(lr,{className:"h-4 w-4"}),eye:e.jsx(Ft,{className:"h-4 w-4"}),ear:e.jsx(Pa,{className:"h-4 w-4"}),hand:e.jsx(gn,{className:"h-4 w-4"}),footprints:e.jsx(Oa,{className:"h-4 w-4"}),users:e.jsx(hn,{className:"h-4 w-4"}),baby:e.jsx(Na,{className:"h-4 w-4"}),userplus:e.jsx(mr,{className:"h-4 w-4"}),briefcase:e.jsx(Da,{className:"h-4 w-4"}),home:e.jsx(Ga,{className:"h-4 w-4"}),car:e.jsx(Aa,{className:"h-4 w-4"}),utensils:e.jsx(xr,{className:"h-4 w-4"}),bath:e.jsx(Sa,{className:"h-4 w-4"}),shirt:e.jsx(tr,{className:"h-4 w-4"}),bookopen:e.jsx(ia,{className:"h-4 w-4"}),gamepad:e.jsx($a,{className:"h-4 w-4"})};function Si({onComponentDrag:t,onComponentClick:s,selectedDiscipline:n="Both"}){const[a,r]=d.useState(""),[o,l]=d.useState("all"),[i,u]=d.useState(new Set),[m,x]=d.useState(n),h=Ni.categories.map(g=>({id:g.id,name:g.name,description:g.description,icon:Ci[g.icon]||e.jsx(ms,{className:"h-4 w-4"}),subcategories:g.subcategories.map(k=>({id:k.id,name:k.name,components:k.components.map(E=>({id:E.id,name:E.name,type:E.type,discipline:E.discipline,description:E.description,fields:E.fields,config:E.config??{}}))}))})),v=g=>g.filter(k=>{const E=a===""||k.name.toLowerCase().includes(a.toLowerCase())||k.description?.toLowerCase().includes(a.toLowerCase()),M=m==="Both"||k.discipline==="Both"||k.discipline===m;return E&&M}),p=o==="all"?h:h.filter(g=>g.id===o),N=g=>{const k=new Set(i);k.has(g)?k.delete(g):k.add(g),u(k)},y=g=>{const k=g.config??{},E=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now()}`,M={id:`${g.type}_${E}`,type:"clinical_component",label:g.name,order:0,props:{componentType:g.type,discipline:g.discipline,...k},fields:g.fields};s(M)},S=(g,k)=>{const E=k.config??{},M=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now()}`,C={id:`${k.type}_${M}`,type:"clinical_component",label:k.name,order:0,props:{componentType:k.type,discipline:k.discipline,...E},fields:k.fields};g.dataTransfer.effectAllowed="copy",t(C)};return d.useEffect(()=>{if(a){const g=new Set;h.forEach(k=>{k.subcategories.forEach(E=>{v(E.components).length>0&&g.add(k.id)})}),u(g)}},[a]),e.jsxs("div",{className:"h-full flex flex-col p-4 bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5 text-blue-600"}),"Clinical Components"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Specialized components for clinical assessments and documentation"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(B,{placeholder:"Search clinical components...",value:a,onChange:g=>r(g.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(xe,{value:m,onValueChange:g=>x(g),children:[e.jsx(pe,{className:"w-[140px]",children:e.jsx(fe,{})}),e.jsxs(ge,{children:[e.jsx(_,{value:"Both",children:"All Disciplines"}),e.jsx(_,{value:"OT",children:"OT Only"}),e.jsx(_,{value:"SLP",children:"SLP Only"})]})]}),e.jsxs(xe,{value:o,onValueChange:l,children:[e.jsx(pe,{className:"flex-1",children:e.jsx(fe,{placeholder:"All Categories"})}),e.jsxs(ge,{children:[e.jsx(_,{value:"all",children:"All Categories"}),h.map(g=>e.jsx(_,{value:g.id,children:g.name},g.id))]})]})]})]})]}),e.jsx(oa,{className:"flex-1",children:e.jsx("div",{className:"space-y-4",children:p.map(g=>{const k=i.has(g.id);return!g.subcategories.some(M=>v(M.components).length>0)&&a?null:e.jsxs(Ut,{className:"border-l-4 border-l-blue-500",children:[e.jsxs(gs,{className:"cursor-pointer pb-3",onClick:()=>N(g.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g.icon,e.jsx(vs,{className:"text-base",children:g.name})]}),e.jsx(Pt,{className:`h-4 w-4 transition-transform ${k?"rotate-90":""}`})]}),e.jsx(tn,{className:"text-xs mt-1",children:g.description})]}),k&&e.jsx(Vt,{className:"pt-0",children:g.subcategories.map(M=>{const C=v(M.components);return C.length===0?null:e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:M.name}),e.jsx("div",{className:"grid gap-2",children:C.map(f=>e.jsxs("div",{draggable:!0,onDragStart:w=>S(w,f),onClick:()=>y(f),className:"group relative p-3 bg-white border rounded-lg cursor-move hover:shadow-md hover:border-blue-300 transition-all duration-150",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:f.name}),e.jsx(G,{variant:f.discipline==="OT"?"default":f.discipline==="SLP"?"secondary":"outline",className:"text-xs",children:f.discipline})]}),f.description&&e.jsx("p",{className:"text-xs text-gray-600",children:f.description})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none"})]},f.id))})]},M.id)})})]},g.id)})})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Tip:"})," Drag components to the form canvas or click to add them. Use the discipline filter to show components specific to OT or SLP."]})})]})}function ki({component:t,allComponents:s,onUpdate:n}){const a=s.filter(h=>h.id!==t.id&&!["title_subtitle","line_separator","evaluation_section","ai_summary"].includes(h.type)),r=t.props?.visibilityCondition?{field:t.props.visibilityCondition.field??"",operator:t.props.visibilityCondition.operator??"equals",value:String(t.props.visibilityCondition.value??"")}:void 0,o=!!r,l=h=>{if(h)n({props:{...t.props,visibilityCondition:{field:a[0]?.id||"",operator:"equals",value:""}}});else{const{visibilityCondition:v,...p}=t.props||{};n({props:p})}},i=h=>{n({props:{...t.props,visibilityCondition:{...r,field:h,value:""}}})},u=h=>{n({props:{...t.props,visibilityCondition:{...r,operator:h}}})},m=h=>{n({props:{...t.props,visibilityCondition:{...r,value:h}}})},x=a.find(h=>h.id===r?.field);return e.jsxs(Ut,{className:"border-0 shadow-none",children:[e.jsx(gs,{className:"px-0 pt-0 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(za,{className:"h-4 w-4 text-blue-600"}),e.jsx(vs,{className:"text-sm font-medium",children:"Conditional Logic"})]}),e.jsx(Rt,{checked:o,onCheckedChange:l})]})}),o&&e.jsxs(Vt,{className:"px-0 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(mt,{className:"text-xs",children:"Show this field when:"}),e.jsx("div",{className:"space-y-2",children:e.jsxs(xe,{value:r.field,onValueChange:i,children:[e.jsx(pe,{className:"h-9",children:e.jsx(fe,{placeholder:"Select a field"})}),e.jsx(ge,{children:a.map(h=>e.jsx(_,{value:h.id,children:h.label||h.id},h.id))})]})}),e.jsx("div",{className:"space-y-2",children:e.jsxs(xe,{value:r?.operator??"equals",onValueChange:h=>u(h),children:[e.jsx(pe,{className:"h-9",children:e.jsx(fe,{placeholder:"Select operator"})}),e.jsxs(ge,{children:[e.jsx(_,{value:"equals",children:"Equals"}),e.jsx(_,{value:"not_equals",children:"Does not equal"}),e.jsx(_,{value:"contains",children:"Contains"}),e.jsx(_,{value:"greater_than",children:"Greater than"}),e.jsx(_,{value:"less_than",children:"Less than"})]})]})}),e.jsx("div",{className:"space-y-2",children:x?.type==="select"||x?.type==="radio"?e.jsxs(xe,{value:r?.value??"",onValueChange:m,children:[e.jsx(pe,{className:"h-9",children:e.jsx(fe,{placeholder:"Select value"})}),e.jsx(ge,{children:x.props?.options?.map(h=>e.jsx(_,{value:h,children:h},h))})]}):x?.type==="checkbox"?e.jsxs(xe,{value:r?.value??"",onValueChange:m,children:[e.jsx(pe,{className:"h-9",children:e.jsx(fe,{placeholder:"Select state"})}),e.jsxs(ge,{children:[e.jsx(_,{value:"true",children:"Checked"}),e.jsx(_,{value:"false",children:"Unchecked"})]})]}):e.jsx(B,{value:r?.value??"",onChange:h=>m(h.target.value),placeholder:x?.type==="number"?"Enter number":x?.type==="date"?"YYYY-MM-DD":"Enter value",type:x?.type==="number"?"number":"text",className:"h-9"})})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"Preview:"})," Show when"," ",e.jsx("span",{className:"font-mono bg-blue-100 px-1 rounded",children:x?.label||"field"})," ",(r?.operator??"equals")==="equals"&&"equals",(r?.operator??"equals")==="not_equals"&&"does not equal",(r?.operator??"equals")==="contains"&&"contains",(r?.operator??"equals")==="greater_than"&&"is greater than",(r?.operator??"equals")==="less_than"&&"is less than"," ",e.jsx("span",{className:"font-mono bg-blue-100 px-1 rounded",children:(r?.value??"")||"..."})]})})]})]})}const Di=async(t,s,n)=>{const a=new URL(`${t}/api/form-templates`);n&&Object.entries(n).forEach(([o,l])=>{l!=null&&(Array.isArray(l)?l.forEach(i=>a.searchParams.append(o,i.toString())):a.searchParams.append(o,l.toString()))});const r=await fetch(a.toString(),{headers:{Authorization:`Bearer ${s}`}});if(r.ok){const o=await r.json();return{templates:o.templates,success:!0,total:o.total||o.templates.length,hasMore:o.hasMore||!1}}else return console.error("Failed to fetch form templates"),{templates:[],success:!1,total:0,hasMore:!1}},Ei=async(t,s,n)=>{const a=await fetch(`${t}/api/form-templates`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(n)});return a.ok?{template:(await a.json()).template,success:!0}:(console.error("Failed to create form template"),{template:null,success:!1})},Ai=async(t,s,n,a)=>{const r=await fetch(`${s}/api/form-templates/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(a)});return r.ok?{template:(await r.json()).template,success:!0}:(console.error("Failed to update form template"),{template:null,success:!1})};function Yn(t,s){let n=null,a=null,r=null;const o=function(...l){a=l,r=this;const i=()=>{n=null,a&&t.apply(r,a)};n&&clearTimeout(n),n=setTimeout(i,s)};return o.cancel=()=>{n&&(clearTimeout(n),n=null),a=null,r=null},o.flush=()=>{n&&a&&(clearTimeout(n),t.apply(r,a),n=null,a=null,r=null)},o}function Mi({sessionId:t,formId:s,userId:n,userName:a,onSaveSuccess:r,onSaveError:o,debounceMs:l=2e3}){const[i,u]=d.useState({saving:!1,lastSaved:null,error:null}),m=d.useRef(null),x=d.useCallback(async v=>{m.current&&m.current.abort(),m.current=new AbortController,u(p=>({...p,saving:!0,error:null}));try{const p=await fetch("/api/form-sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:t,formData:v,templateId:parseInt(s,10),userName:a,timestamp:new Date().toISOString()}),signal:m.current.signal});if(!p.ok){const y=await p.text();let S=`Save failed: ${p.statusText}`;try{const g=JSON.parse(y);g.error&&(S=`Save failed: ${g.error}`),g.details&&(S+=` - ${g.details}`)}catch{y&&(S=`Save failed: ${y}`)}throw new Error(S)}const N=await p.json();return u({saving:!1,lastSaved:new Date,error:null}),r?.(),N}catch(p){if(p.name==="AbortError")return;const N=p instanceof Error?p:new Error(String(p));u(y=>({...y,saving:!1,error:N})),o?.(N);try{await Ti(t,{formId:s,userId:n,userName:a,data:v,lastSaved:new Date().toISOString()})}catch(y){console.error("Failed to save to IndexedDB:",y)}}},[t,s,n,a,r,o]),h=d.useRef(Yn(x,l)).current;return d.useEffect(()=>()=>{m.current&&m.current.abort(),h.cancel()},[h]),d.useEffect(()=>{(async()=>{try{const p=await fetch(`/api/form-sessions?sessionId=${t}`);if(p.ok)return await p.json()}catch(p){console.error("Failed to load session:",p)}try{return await Ri(t)}catch(p){console.error("Failed to load from IndexedDB:",p)}return null})()},[t]),{save:h,status:i,flush:()=>{h.flush()},deleteSession:async()=>{try{h.flush(),await fetch(`/api/form-sessions?sessionId=${t}`,{method:"DELETE"}),await Li(t)}catch(v){console.error("Failed to delete session:",v)}}}}async function Ts(){return new Promise((t,s)=>{const n=indexedDB.open("FormAutosave",1);n.onerror=()=>s(n.error),n.onsuccess=()=>t(n.result),n.onupgradeneeded=a=>{const r=a.target.result;r.objectStoreNames.contains("sessions")||r.createObjectStore("sessions",{keyPath:"sessionId"})}})}async function Ti(t,s){const r=(await Ts()).transaction(["sessions"],"readwrite").objectStore("sessions");return new Promise((o,l)=>{const i=r.put({sessionId:t,...s,savedAt:new Date().toISOString()});i.onsuccess=()=>o(),i.onerror=()=>l(i.error)})}async function Ri(t){const a=(await Ts()).transaction(["sessions"],"readonly").objectStore("sessions");return new Promise((r,o)=>{const l=a.get(t);l.onsuccess=()=>r(l.result),l.onerror=()=>o(l.error)})}async function Li(t){const a=(await Ts()).transaction(["sessions"],"readwrite").objectStore("sessions");return new Promise((r,o)=>{const l=a.delete(t);l.onsuccess=()=>r(),l.onerror=()=>o(l.error)})}function Fi({formId:t,userId:s,userName:n,onLockAcquired:a,onLockFailed:r,onLockReleased:o,refreshInterval:l=6e4}){const[i,u]=d.useState({isLocked:!1,lockedBy:null,lockHash:null,canTakeover:!1,loading:!0,error:null}),m=d.useRef(null),x=d.useRef(null),h=d.useCallback(async()=>{try{const y=await fetch(`/api/form-locks?formId=${t}`),S=await y.json();if(y.ok)return u(g=>({...g,isLocked:S.locked,lockedBy:S.lockedBy||null,canTakeover:S.canTakeover||!1,loading:!1,error:null})),S.locked;throw new Error(S.error||"Failed to check lock status")}catch(y){return u(S=>({...S,loading:!1,error:y instanceof Error?y:new Error("Unknown error")})),!1}},[t]),v=d.useCallback(async(y=!1)=>{u(S=>({...S,loading:!0,error:null}));try{const S=await fetch("/api/form-locks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,userId:s,userName:n,forceTakeover:y})}),g=await S.json();if(S.ok&&g.lockHash)x.current=g.lockHash,u({isLocked:!0,lockedBy:n,lockHash:g.lockHash,canTakeover:!1,loading:!1,error:null}),a?.(),m.current&&clearInterval(m.current),m.current=setInterval(()=>{p()},l);else if(S.status===423)u({isLocked:!0,lockedBy:g.lockedBy||"Unknown user",lockHash:null,canTakeover:g.canTakeover||!1,loading:!1,error:null}),r?.(g.lockedBy||"Unknown user");else throw new Error(g.error||"Failed to acquire lock")}catch(S){u(g=>({...g,loading:!1,error:S instanceof Error?S:new Error("Unknown error")}))}},[t,s,n,a,r,l]),p=d.useCallback(async()=>{if(x.current)try{await fetch("/api/form-locks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,userId:s,userName:n,forceTakeover:!1})})}catch(y){console.error("Failed to refresh lock:",y)}},[t,s,n]),N=d.useCallback(async()=>{if(x.current)try{(await fetch("/api/form-locks",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,lockHash:x.current})})).ok&&(x.current=null,u({isLocked:!1,lockedBy:null,lockHash:null,canTakeover:!1,loading:!1,error:null}),o?.(),m.current&&(clearInterval(m.current),m.current=null))}catch(y){console.error("Failed to release lock:",y)}},[t,o]);return d.useEffect(()=>((async()=>{await h()||await v()})(),()=>{x.current&&N(),m.current&&clearInterval(m.current)}),[]),d.useEffect(()=>{const y=()=>{x.current&&fetch("/api/form-locks",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,lockHash:x.current}),keepalive:!0}).catch(()=>{})};return window.addEventListener("beforeunload",y),window.addEventListener("unload",y),()=>{window.removeEventListener("beforeunload",y),window.removeEventListener("unload",y)}},[t]),{status:i,acquireLock:v,releaseLock:N,refreshLock:p,checkLockStatus:h}}function Pi({formId:t,formName:s,formDescription:n,components:a,isOpen:r=!1,onClose:o}){const[l,i]=d.useState(null),[u,m]=d.useState(!1),[x,h]=d.useState(null),[v,p]=d.useState(null),[N,y]=d.useState(new Set);d.useEffect(()=>{r&&t!=="new"&&S()},[r,t]);const S=async()=>{try{const C=await fetch(`/api/form-summary?formId=${t}`),f=await C.json();C.ok&&f.summary&&(i(f.summary),p(f.updatedAt?new Date(f.updatedAt):null))}catch(C){console.error("Failed to fetch summary:",C)}},g=async()=>{if(N.size===0){h("Please select at least one form component to generate a summary");return}m(!0),h(null);try{const C=a.filter(j=>N.has(j.id)),f=await fetch("/api/form-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,formData:{name:s,description:n,components:C}})}),w=await f.json();if(f.ok&&w.summary)i(w.summary),p(w.generatedAt?new Date(w.generatedAt):new Date);else throw new Error(w.error||"Failed to generate summary")}catch(C){h(C instanceof Error?C.message:"Failed to generate summary")}finally{m(!1)}},k=C=>{y(f=>{const w=new Set(f);return w.has(C)?w.delete(C):w.add(C),w})},E=()=>{y(new Set(a.map(C=>C.id)))},M=()=>{y(new Set)};return r?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(Ut,{className:"w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsxs(gs,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"h-5 w-5"}),e.jsx(vs,{children:"Form Summary"})]}),e.jsx(V,{variant:"ghost",size:"sm",onClick:o,children:"✕"})]}),e.jsx(tn,{children:"AI-generated overview"})]}),e.jsxs(Vt,{className:"overflow-y-auto max-h-[60vh]",children:[x&&e.jsx(xn,{variant:"destructive",className:"mb-4",children:e.jsx(pn,{children:x})}),!l&&!u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Je,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Select form components to include in the AI summary"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 border-b",children:[e.jsx("h4",{className:"font-medium",children:"Form Components"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(V,{variant:"ghost",size:"sm",onClick:E,children:"Select All"}),e.jsx(V,{variant:"ghost",size:"sm",onClick:M,children:"Deselect All"})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:a.map(C=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[e.jsx(ys,{id:C.id,checked:N.has(C.id),onCheckedChange:()=>k(C.id)}),e.jsxs("label",{htmlFor:C.id,className:"flex-1 cursor-pointer text-sm",children:[e.jsx("div",{className:"font-medium",children:C.label||`${C.type} field`}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["Type: ",C.type,C.props?.required&&" • Required"]})]})]},C.id))}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsxs(V,{onClick:g,disabled:N.size===0,children:["Generate Summary (",N.size," selected)"]})})]})]}),u&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(fn,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Generating summary..."})]}),l&&!u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"prose prose-sm max-w-none",children:l.split(`
`).map((C,f)=>C.startsWith("###")?e.jsx("h3",{className:"text-base font-semibold mt-4 mb-2",children:C.replace(/^###\s*/,"")},f):C.startsWith("**")&&C.endsWith("**")?e.jsx("p",{className:"font-semibold mb-2",children:C.replace(/\*\*/g,"")},f):C.startsWith("-")?e.jsx("li",{className:"ml-4 mb-1",children:C.replace(/^-\s*/,"")},f):C.trim()===""?e.jsx("br",{},f):e.jsx("p",{className:"mb-2",children:C},f))}),e.jsxs("div",{className:"mt-6 pt-4 border-t flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:v&&e.jsxs(e.Fragment,{children:["Last updated: ",v.toLocaleString()]})}),e.jsxs(V,{variant:"outline",size:"sm",onClick:()=>{i(null),h(null)},disabled:u,children:[e.jsx(ra,{className:"h-4 w-4 mr-2"}),"Regenerate"]})]})]})]})]})}):null}function _i(t){const s="/api/plausible/api/event";async function n(a,r){try{await fetch(s,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:a,url:window.location.href,domain:t.siteId,props:r,referrer:document.referrer||null,screen_width:window.screen.width})})}catch(o){console.debug("Analytics event failed:",o)}}return{pageview:a=>{const r=a||window.location.pathname;n("pageview",{url:r})},event:(a,r)=>n(a,r),trackRouteChange:()=>{n("pageview")}}}const Oi=Gn({name:Oe().min(2,"Name must be at least 2 characters"),description:Oe().optional(),category:Oe().min(1,"Category is required"),subcategory:Oe().optional(),clinical_context:Oe().min(2,"Clinical context is required"),tags:Oe().optional(),targetAudience:Zn(Oe()).optional(),estimatedCompletionTime:Jn().min(1).max(180).optional(),showIplcLogo:_s(),logoPosition:Kn(["top-left","top-right","top-center"]),primaryColor:Oe().optional(),fontFamily:Oe().optional(),isPublic:_s()});function Al({apiToken:t="",template:s,onSave:n,mode:a="create"}){const o=globalThis.__FEATURE_FLAGS__?.["analytics.plausible.enabled"]===!0?_i({enabled:!0,siteId:"iplcforms"}):null,[l,i]=d.useState(s?.schema?.isMultiPage||!1),[u,m]=d.useState(()=>s?.schema?.pages&&s.schema.pages.length>0?s.schema.pages:[{id:"page_1",title:"Page 1",description:"",order:0,components:s?.schema?.components||[]}]),[x,h]=d.useState(u[0]?.id||"page_1"),p=u.find(c=>c.id===x)?.components||[],[N,y]=d.useState(!1),[S,g]=d.useState(!1),[k,E]=d.useState(!1),[M,C]=d.useState(null),[f,w]=d.useState(null),[j,D]=d.useState("components"),[L,I]=d.useState(null),[Y,ie]=d.useState([]),[ve,Ie]=d.useState(!1),[Ne,Q]=d.useState(""),[Ce,le]=d.useState(""),[ce,$e]=d.useState([]),[X,be]=d.useState("grid"),[Se,We]=d.useState("updated_at"),[ee,Ze]=d.useState("desc"),Me=d.useRef(null),ke=d.useMemo(()=>{const c=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now()}`;return s?.id?`form_${s.id}_${c}`:`form_new_${c}`},[s?.id]),$="1",z="User",W=d.useCallback(c=>c.map((b,A)=>({...b,order:A})),[]),Pe=d.useCallback(c=>{if(c.isMultiPage){const b=c.pages.map((A,T)=>({...A,order:T,components:W(A.components)}));return{components:[],pages:b,isMultiPage:!0}}else return{components:W(c.components),pages:[],isMultiPage:!1}},[W]),re=d.useCallback(c=>{m(b=>b.map(T=>T.id===x?{...T,components:W(c)}:{...T,components:W(T.components)}))},[x,W]),{status:F,acquireLock:Be}=Fi({formId:s?.id?.toString()||"new",userId:$,userName:z,onLockAcquired:()=>{console.log("Form lock acquired")},onLockFailed:c=>{console.log(`Form is locked by ${c}`)}}),[Jt,Zt]=d.useState(!1),[rt,Te]=d.useState(!1),P=Qn({resolver:ea(Oi),defaultValues:{name:s?.name||"",description:s?.description||"",category:s?.category||"",subcategory:s?.metadata?.subcategory||"",clinical_context:s?.clinical_context||"",tags:s?.metadata?.tags?.join(", ")||"",targetAudience:s?.metadata?.targetAudience||[],estimatedCompletionTime:s?.metadata?.estimatedCompletionTime||15,showIplcLogo:s?.metadata?.showIplcLogo??!0,logoPosition:s?.metadata?.logoPosition||"top-left",primaryColor:s?.metadata?.customStyling?.primaryColor||"#007bff",fontFamily:s?.metadata?.customStyling?.fontFamily||"system",isPublic:s?.metadata?.isPublic??!1}}),{save:Ye,status:Xe,deleteSession:Ct,flush:ot}=Mi({sessionId:ke,formId:s?.id?.toString()||"new",userId:$,userName:z,onSaveSuccess:()=>{console.log("Autosave successful")},onSaveError:c=>{console.error("Autosave failed:",c)},debounceMs:0}),U=d.useMemo(()=>Yn(c=>{try{const b=Pe({components:l?[]:p,pages:l?u:[],isMultiPage:l});Ye({...b,metadata:{name:P.getValues("name"),description:P.getValues("description"),category:P.getValues("category"),clinical_context:P.getValues("clinical_context"),showIplcLogo:P.getValues("showIplcLogo")}})}catch(b){console.error("Error during autosave:",b)}},600),[Ye,Pe,l,p,u,P]);d.useEffect(()=>()=>{U.flush(),ot&&ot()},[U,ot]),d.useEffect(()=>{(l&&u.length>0||!l&&p.length>0)&&U({})},[p,u,l,U]);const ze=xi(),oe=d.useMemo(()=>gi(),[]),de=d.useCallback(c=>p.findIndex(b=>b.id===c),[p]);d.useEffect(()=>{if(typeof window>"u")return;const c=A=>{const T=A.target;T&&(T.tagName==="INPUT"||T.tagName==="TEXTAREA")&&setTimeout(()=>{T.scrollIntoView({behavior:"smooth",block:"center"})},300)},b=()=>{if(window.visualViewport){const A=window.visualViewport;document.documentElement.style.setProperty("--viewport-height",`${A.height}px`)}};return document.addEventListener("focusin",c),window.visualViewport?.addEventListener("resize",b),()=>{document.removeEventListener("focusin",c),window.visualViewport?.removeEventListener("resize",b)}},[]);const St=d.useCallback(()=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot add page: form is locked by another user");return}const c=typeof crypto<"u"&&"randomUUID"in crypto?`page_${crypto.randomUUID()}`:`page_${Date.now()}`,b={id:c,title:`Page ${u.length+1}`,description:"",order:u.length,components:[]},T=[...u,b].map((R,te)=>({...R,order:te}));m(T),h(c),U({})},[u,F,z,U]),Re=d.useCallback(c=>{if(u.length<=1)return;if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot remove page: form is locked by another user");return}const b=u.findIndex(R=>R.id===c),T=u.filter(R=>R.id!==c).map((R,te)=>({...R,order:te}));if(m(T),c===x){const R=Math.max(0,b-1);h(T[R].id)}U({})},[u,x,F,z,U]);d.useCallback((c,b)=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot update page title: form is locked by another user");return}m(A=>A.map(T=>T.id===c?{...T,title:b}:T)),U({})},[F,z,U]),d.useCallback((c,b)=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot update page description: form is locked by another user");return}m(A=>A.map(T=>T.id===c?{...T,description:b}:T)),U({})},[F,z,U]),d.useCallback((c,b)=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot reorder pages: form is locked by another user");return}const A=[...u],[T]=A.splice(c,1);A.splice(b,0,T);const R=A.map((te,ye)=>({...te,order:ye}));m(R),U({})},[u,F,z,U]),d.useEffect(()=>{const c=P.watch(()=>{(l&&u.length>0||!l&&p.length>0)&&U({})});return()=>c.unsubscribe()},[P,l,u,p,U]);const Ge=d.useCallback((c,b)=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot add component: form is locked by another user");return}const A=[...p],T=b!==void 0?b:A.length,R={...c,id:c.id||Wn(c.type),order:T};A.splice(T,0,R);const te=W(A);re(te),U({});try{o?.event("builder_palette_add",{type:c.type})}catch{}},[p,F,z,W,U]),Qt=d.useCallback((c,b)=>{c.preventDefault(),M&&(Ge(M,b),C(null),w(null))},[M,Ge]),it=d.useCallback(c=>{console.log("FormBuilder: handleComponentClick called with",c),Ge(c)},[Ge]);d.useCallback((c,b)=>{c.preventDefault(),w(b)},[]),d.useCallback(()=>{w(null)},[]);const Qe=d.useCallback((c,b)=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot move component: form is locked by another user");return}const A=[...p],[T]=A.splice(c,1);A.splice(b,0,T);const R=W(A);re(R),U({});try{o?.event("builder_reorder",{from:c,to:b})}catch{}},[p,F,z,W,U]),kt=d.useCallback(c=>{const b=de(String(c.active.id));b>=0&&oe.handleDragStart(c,p[b])},[de,p,oe]),es=d.useCallback(c=>{oe.handleDragOver(c),w(c.over?de(String(c.over.id)):null)},[de,oe]),Dt=d.useCallback(c=>{const{active:b,over:A}=c;if(oe.handleDragEnd(),w(null),!A||b.id===A.id)return;const T=de(String(b.id)),R=de(String(A.id));T>=0&&R>=0&&T!==R&&Qe(T,R)},[de,Qe,oe]),ts=d.useCallback(c=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot remove component: form is locked by another user");return}const b=p.filter((T,R)=>R!==c),A=W(b);re(A),U({})},[p,F,z,W,U]),Et=d.useCallback((c,b)=>{if(F.isLocked&&F.lockedBy!==z){console.warn("Cannot update component: form is locked by another user");return}const A=[...p];A[c]={...A[c],...b},re(A),U({})},[p,F,z,U]),At=d.useCallback(async()=>{Ie(!0);try{const c=new URL(window.location.href),b={search:Ne||void 0,category:Ce||void 0,tags:ce.length>0?ce:void 0,sort_by:Se,sort_order:ee,status:"active",limit:50},A=await Di(c.origin,t,b);A.success&&ie(A.templates)}catch(c){console.error("Failed to load templates:",c)}finally{Ie(!1)}},[t,Ne,Ce,ce,Se,ee]);d.useEffect(()=>{k&&At()},[k,At]);const J=c=>{c.schema&&(c.schema.isMultiPage&&c.schema.pages?(i(!0),m(c.schema.pages),h(c.schema.pages[0]?.id||"page_1")):c.schema.components&&(i(!1),m([{id:"page_1",title:"Page 1",description:"",order:0,components:c.schema.components}]),h("page_1")),P.reset({name:c.name,description:c.description||"",category:c.category||"",subcategory:c.metadata?.subcategory||"",clinical_context:c.clinical_context||"",tags:c.metadata?.tags?.join(", ")||"",targetAudience:c.metadata?.targetAudience||[],estimatedCompletionTime:c.metadata?.estimatedCompletionTime||15,showIplcLogo:c.metadata?.showIplcLogo??!0,logoPosition:c.metadata?.logoPosition||"top-left",primaryColor:c.metadata?.customStyling?.primaryColor||"#007bff",fontFamily:c.metadata?.customStyling?.fontFamily||"system",isPublic:c.metadata?.isPublic??!1}),E(!1))},se=d.useMemo(()=>{const c=new Set(Y.map(b=>b.category));return Array.from(c).filter(Boolean)},[Y]),ne=d.useMemo(()=>{const c=new Set;return Y.forEach(b=>{(b.metadata?.tags||[]).forEach(T=>c.add(T))}),Array.from(c)},[Y]),Le=async c=>{try{const b=new URL(window.location.href),A={name:c.name,description:c.description,category:c.category,clinical_context:c.clinical_context,schema:{components:l?[]:p,pages:l?u:[],isMultiPage:l},metadata:{...s?.metadata,showIplcLogo:c.showIplcLogo},status:s?.status||"draft",version:s?s.version+1:1,created_by:1,updated_by:1};let T;if(s&&s.id){const R=typeof s.id=="string"?parseInt(s.id,10):Number(s.id);if(!isNaN(R))T=await Ai(Number(R),b.origin,t,A);else throw new Error("Invalid template ID")}else T=await Ei(b.origin,t,A);T.success&&T.template&&(await Ct(),n&&n(T.template)),g(!1)}catch(b){console.error("Error saving form template:",b)}};return e.jsxs("div",{className:"form-builder-container flex h-screen bg-background",children:[e.jsx("div",{className:"relative flex-shrink-0 transition-all duration-300 ease-in-out",children:e.jsxs(ns,{value:j,onValueChange:c=>D(c),className:"h-full flex flex-col",children:[e.jsxs(as,{className:"grid w-full grid-cols-3 bg-gradient-metallic-primary",children:[e.jsxs(Ue,{value:"components",className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-4 w-4"}),"Components"]}),e.jsxs(Ue,{value:"evaluation",className:"flex items-center gap-2",children:[e.jsx(xa,{className:"h-4 w-4"}),"Evaluation"]}),e.jsxs(Ue,{value:"clinical",className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4"}),"Clinical"]})]}),e.jsx(Ke,{value:"components",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(na,{onComponentDrag:C,onComponentClick:it})}),e.jsx(Ke,{value:"evaluation",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(ji,{onSectionDrag:C,onComponentClick:it})}),e.jsx(Ke,{value:"clinical",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(Si,{onComponentDrag:C,onComponentClick:it,selectedDiscipline:"Both"})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[F.isLocked&&F.lockedBy!==z&&e.jsxs(xn,{className:"m-4 border-yellow-500 bg-yellow-50",children:[e.jsx(ha,{className:"h-4 w-4"}),e.jsxs(pn,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"h-4 w-4"}),e.jsxs("span",{children:["This form is currently being edited by ",e.jsx("strong",{children:F.lockedBy}),"."]})]}),F.canTakeover&&e.jsx(V,{variant:"outline",size:"sm",onClick:()=>Be(!0),children:"Take Over"})]})]}),e.jsxs("div",{className:"border-b bg-card",children:[l&&e.jsxs("div",{className:"border-b px-4 pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Form Pages"}),e.jsxs(G,{variant:"secondary",className:"text-xs",children:[u.length," ",u.length===1?"page":"pages"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(V,{variant:"ghost",size:"sm",onClick:St,className:"h-7 text-xs",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"Add Page"]}),e.jsx(Rt,{checked:l,onCheckedChange:c=>{if(i(c),!c){const b=u.flatMap(A=>A.components);m([{id:"page_1",title:"Page 1",description:"",order:0,components:b}]),h("page_1")}}})]})]}),e.jsx(ns,{value:x,onValueChange:h,children:e.jsx(as,{className:"h-auto p-0 bg-transparent",children:u.map((c,b)=>e.jsx(Ue,{value:c.id,className:"relative data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-t-lg border border-b-0 data-[state=active]:border-gray-200 data-[state=inactive]:border-transparent data-[state=inactive]:bg-transparent px-4 py-2 mr-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:c.title}),e.jsx(G,{variant:"outline",className:"text-xs",children:c.components.length}),u.length>1&&e.jsx(V,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 opacity-0 hover:opacity-100 transition-opacity",onClick:A=>{A.stopPropagation(),Re(c.id)},children:e.jsx(un,{className:"h-3 w-3"})})]})},c.id))})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s?`Edit: ${s.name}`:"New Form Template"}),!l&&e.jsxs(V,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"text-xs",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"Convert to Multi-Page"]}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:Xe.saving?e.jsxs(e.Fragment,{children:[e.jsx(fn,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Saving..."})]}):Xe.lastSaved?e.jsxs(e.Fragment,{children:[e.jsx(La,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-muted-foreground",children:["Saved ",new Date(Xe.lastSaved).toLocaleTimeString()]})]}):Xe.error?e.jsxs(e.Fragment,{children:[e.jsx(Ta,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-red-600",children:"Save failed"})]}):null})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(V,{variant:"outline",size:"sm",onClick:()=>E(!0),children:[e.jsx(ca,{className:"mr-2 h-4 w-4"}),"Load Template"]}),e.jsxs(V,{variant:"outline",size:"sm",onClick:()=>y(!N),children:[e.jsx(Ft,{className:"mr-2 h-4 w-4"}),N?"Edit":"Preview"]}),e.jsxs(Rs,{open:S,onOpenChange:g,children:[e.jsx(Xn,{asChild:!0,children:e.jsxs(V,{variant:"outline",size:"sm",children:[e.jsx(ga,{className:"mr-2 h-4 w-4"}),"Settings"]})}),e.jsxs(Ls,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(Fs,{children:e.jsx(Ps,{children:"Save Template"})}),e.jsx(ta,{...P,children:e.jsxs("form",{onSubmit:P.handleSubmit(Le),className:"space-y-6",children:[e.jsxs(ns,{defaultValue:"basic",className:"w-full",children:[e.jsxs(as,{className:"grid w-full grid-cols-4",children:[e.jsx(Ue,{value:"basic",children:"Basic Info"}),e.jsx(Ue,{value:"metadata",children:"Metadata"}),e.jsx(Ue,{value:"styling",children:"Styling"}),e.jsx(Ue,{value:"sharing",children:"Sharing"})]}),e.jsxs(Ke,{value:"basic",className:"space-y-4 mt-6",children:[e.jsx(ue,{control:P.control,name:"name",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Template Name"}),e.jsx(je,{children:e.jsx(B,{placeholder:"Enter template name",...c})}),e.jsx(De,{})]})}),e.jsx(ue,{control:P.control,name:"description",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Description"}),e.jsx(je,{children:e.jsx(ft,{placeholder:"Enter template description",...c})}),e.jsx(De,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{control:P.control,name:"category",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Category"}),e.jsxs(xe,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(je,{children:e.jsx(pe,{children:e.jsx(fe,{placeholder:"Select a category"})})}),e.jsxs(ge,{children:[e.jsx(_,{value:"assessment",children:"Assessment"}),e.jsx(_,{value:"treatment",children:"Treatment"}),e.jsx(_,{value:"progress",children:"Progress Notes"}),e.jsx(_,{value:"evaluation",children:"Evaluation"})]})]}),e.jsx(De,{})]})}),e.jsx(ue,{control:P.control,name:"subcategory",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Subcategory"}),e.jsx(je,{children:e.jsx(B,{placeholder:"e.g., Initial Assessment",...c})}),e.jsx(De,{})]})})]}),e.jsx(ue,{control:P.control,name:"clinical_context",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Clinical Context"}),e.jsx(je,{children:e.jsx(B,{placeholder:"e.g., Speech Therapy, Occupational Therapy",...c})}),e.jsx(De,{})]})})]}),e.jsxs(Ke,{value:"metadata",className:"space-y-4 mt-6",children:[e.jsx(ue,{control:P.control,name:"tags",render:({field:c})=>e.jsxs(me,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(or,{className:"w-4 h-4"}),"Tags"]}),e.jsx(je,{children:e.jsx(B,{placeholder:"Enter tags separated by commas",...c})}),e.jsx(rs,{children:"Separate multiple tags with commas (e.g., pediatric, assessment, standardized)"}),e.jsx(De,{})]})}),e.jsx(ue,{control:P.control,name:"targetAudience",render:({field:c})=>e.jsxs(me,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(hn,{className:"w-4 h-4"}),"Target Audience"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["SLP","OT","PT","Psychologist","Social Worker","Case Manager"].map(b=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ys,{id:b,checked:c.value?.includes(b)||!1,onCheckedChange:A=>{A?c.onChange([...c.value||[],b]):c.onChange(c.value?.filter(T=>T!==b)||[])}}),e.jsx("label",{htmlFor:b,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:b})]},b))}),e.jsx(De,{})]})}),e.jsx(ue,{control:P.control,name:"estimatedCompletionTime",render:({field:c})=>e.jsxs(me,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(dn,{className:"w-4 h-4"}),"Estimated Completion Time (minutes)"]}),e.jsx(je,{children:e.jsx(B,{type:"number",min:"1",max:"180",placeholder:"15",...c,onChange:b=>c.onChange(parseInt(b.target.value)||void 0)})}),e.jsx(De,{})]})})]}),e.jsxs(Ke,{value:"styling",className:"space-y-4 mt-6",children:[e.jsx(ue,{control:P.control,name:"showIplcLogo",render:({field:c})=>e.jsxs(me,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(he,{className:"text-base",children:"Show IPLC Logo"}),e.jsx(rs,{children:"Display the IPLC logo on the form"})]}),e.jsx(je,{children:e.jsx(Rt,{checked:c.value,onCheckedChange:c.onChange})})]})}),P.watch("showIplcLogo")&&e.jsx(ue,{control:P.control,name:"logoPosition",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Logo Position"}),e.jsxs(xe,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(je,{children:e.jsx(pe,{children:e.jsx(fe,{placeholder:"Select logo position"})})}),e.jsxs(ge,{children:[e.jsx(_,{value:"top-left",children:"Top Left"}),e.jsx(_,{value:"top-center",children:"Top Center"}),e.jsx(_,{value:"top-right",children:"Top Right"})]})]}),e.jsx(De,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{control:P.control,name:"primaryColor",render:({field:c})=>e.jsxs(me,{children:[e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"w-4 h-4"}),"Primary Color"]}),e.jsx(je,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{type:"color",className:"w-12 h-10 p-1 border-2",...c}),e.jsx(B,{type:"text",placeholder:"#007bff",...c})]})}),e.jsx(De,{})]})}),e.jsx(ue,{control:P.control,name:"fontFamily",render:({field:c})=>e.jsxs(me,{children:[e.jsx(he,{children:"Font Family"}),e.jsxs(xe,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(je,{children:e.jsx(pe,{children:e.jsx(fe,{placeholder:"Select font family"})})}),e.jsxs(ge,{children:[e.jsx(_,{value:"system",children:"System Default"}),e.jsx(_,{value:"Arial",children:"Arial"}),e.jsx(_,{value:"Times New Roman",children:"Times New Roman"}),e.jsx(_,{value:"Georgia",children:"Georgia"}),e.jsx(_,{value:"Verdana",children:"Verdana"}),e.jsx(_,{value:"Calibri",children:"Calibri"})]})]}),e.jsx(De,{})]})})]})]}),e.jsxs(Ke,{value:"sharing",className:"space-y-4 mt-6",children:[e.jsx(ue,{control:P.control,name:"isPublic",render:({field:c})=>e.jsxs(me,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(he,{className:"text-base flex items-center gap-2",children:[e.jsx(da,{className:"w-4 h-4"}),"Public Template"]}),e.jsx(rs,{children:"Make this template available to other users in your organization"})]}),e.jsx(je,{children:e.jsx(Rt,{checked:c.value,onCheckedChange:c.onChange})})]})}),P.watch("isPublic")&&e.jsxs("div",{className:"rounded-lg border p-4 bg-blue-50",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Public Template Benefits"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Other users can discover and use your template"}),e.jsx("li",{children:"• Contributes to the organization's template library"}),e.jsx("li",{children:"• Can be rated and reviewed by other users"}),e.jsx("li",{children:"• Usage analytics will be tracked"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsxs(V,{type:"submit",children:[e.jsx(fa,{className:"mr-2 h-4 w-4"}),"Save Template"]})]})]})})]})]})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:N?e.jsx(bi,{components:l?void 0:p,pages:l?u:void 0,isMultiPage:l,title:P.getValues("name")||"Form Preview",description:P.getValues("description"),showIplcLogo:P.getValues("showIplcLogo")}):e.jsxs(Eo,{sensors:ze,onDragStart:kt,onDragOver:es,onDragEnd:Dt,collisionDetection:us.formBuilder.collisionDetection,modifiers:us.formBuilder.modifiers,autoScroll:us.formBuilder.autoScroll,children:[e.jsx("div",{className:"min-h-full bg-white rounded-lg border-2 border-dashed border-gray-300 p-6",onDrop:Qt,onDragOver:c=>c.preventDefault(),"data-testid":"canvas-root",children:p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:[e.jsx(et,{className:"h-12 w-12 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Start building your form"}),e.jsx("p",{className:"text-sm",children:"Drag components from the palette to begin"})]}):e.jsx(Qo,{items:fi.ensureUniqueIds(`form-builder-${x}`,p.map(c=>c.id)),strategy:Jo,id:`form-builder-${x}`,children:e.jsx("div",{className:"space-y-4",ref:Me,children:p.map((c,b)=>e.jsxs(Ii,{id:c.id,index:b,isSelected:L===b,isDragOver:f===b,onRemove:()=>ts(b),onClick:()=>I(b===L?null:b),children:[e.jsx("div",{className:"pr-16",children:e.jsx(en,{component:c,onUpdate:A=>Et(b,A),isEditing:!0,allComponents:p})}),L===b&&c.type!=="title_subtitle"&&c.type!=="line_separator"&&c.type!=="evaluation_section"&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx(ki,{component:c,allComponents:p,onUpdate:A=>Et(b,A)})})]},c.id))})})}),e.jsx(Yo,{children:(()=>{const c=oe.getState(),b=c.draggedItem;return!c.isDragging||!b?null:e.jsx("div",{className:"pointer-events-none opacity-80",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-white shadow-lg w-[600px] max-w-[80vw]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-muted-foreground",children:[e.jsx(js,{className:"h-4 w-4"}),"Dragging: ",e.jsx("span",{className:"font-medium",children:b.label})]}),e.jsx(en,{component:b,isEditing:!1,allComponents:p})]})})})()})]})})]}),e.jsx(Rs,{open:k,onOpenChange:E,children:e.jsxs(Ls,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx(Fs,{children:e.jsx(Ps,{children:"Load Template"})}),e.jsxs("div",{className:"flex flex-col gap-4 h-[70vh]",children:[e.jsxs("div",{className:"flex flex-col gap-4 border-b pb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(B,{placeholder:"Search templates...",value:Ne,onChange:c=>Q(c.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs(xe,{value:Ce,onValueChange:le,children:[e.jsx(pe,{className:"w-48",children:e.jsx(fe,{placeholder:"All Categories"})}),e.jsxs(ge,{children:[e.jsx(_,{value:"",children:"All Categories"}),se.map(c=>e.jsx(_,{value:c,children:c},c))]})]}),e.jsxs(xe,{value:ce.join(","),onValueChange:c=>$e(c?c.split(","):[]),children:[e.jsx(pe,{className:"w-48",children:e.jsx(fe,{placeholder:"Filter by tags"})}),e.jsxs(ge,{children:[e.jsx(_,{value:"",children:"All Tags"}),ne.map(c=>e.jsx(_,{value:c,children:c},c))]})]}),e.jsxs(xe,{value:Se,onValueChange:c=>We(c),children:[e.jsx(pe,{className:"w-40",children:e.jsx(fe,{})}),e.jsxs(ge,{children:[e.jsx(_,{value:"created_at",children:"Date Created"}),e.jsx(_,{value:"name",children:"Name"}),e.jsx(_,{value:"usage_count",children:"Popularity"}),e.jsx(_,{value:"rating",children:"Rating"})]})]}),e.jsx(V,{variant:"outline",size:"sm",onClick:()=>Ze(ee==="asc"?"desc":"asc"),children:ee==="asc"?"↑":"↓"}),e.jsxs("div",{className:"flex ml-auto",children:[e.jsx(V,{variant:X==="grid"?"default":"outline",size:"sm",onClick:()=>be("grid"),children:e.jsx(Ua,{className:"h-4 w-4"})}),e.jsx(V,{variant:X==="list"?"default":"outline",size:"sm",onClick:()=>be("list"),children:e.jsx(Ja,{className:"h-4 w-4"})})]})]}),(Ce||ce.length>0||Ne)&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),Ne&&e.jsxs(G,{variant:"secondary",className:"gap-1",children:["Search: ",Ne,e.jsx("button",{onClick:()=>Q(""),children:"×"})]}),Ce&&e.jsxs(G,{variant:"secondary",className:"gap-1",children:["Category: ",Ce,e.jsx("button",{onClick:()=>le(""),children:"×"})]}),ce.map(c=>e.jsxs(G,{variant:"secondary",className:"gap-1",children:["Tag: ",c,e.jsx("button",{onClick:()=>$e(ce.filter(b=>b!==c)),children:"×"})]},c)),e.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{Q(""),le(""),$e([])},children:"Clear all"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:ve?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading templates..."})]})}):Y.length===0?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search criteria"})]})}):e.jsx("div",{className:X==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-3",children:Y.map(c=>e.jsx("div",{className:`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${X==="list"?"flex items-center gap-4":""}`,onClick:()=>J(c),children:X==="grid"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-medium truncate",children:c.name}),c.metadata?.is_featured&&e.jsx(Is,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),c.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:c.description}),e.jsxs("div",{className:"space-y-2",children:[c.metadata?.category&&e.jsx(G,{variant:"outline",className:"text-xs",children:c.metadata.category}),c.metadata?.tags&&c.metadata.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.metadata.tags.slice(0,3).map(b=>e.jsx(G,{variant:"secondary",className:"text-xs",children:b},b)),c.metadata.tags.length>3&&e.jsxs(G,{variant:"secondary",className:"text-xs",children:["+",c.metadata.tags.length-3]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_t,{className:"h-3 w-3"}),c.created_at&&new Date(c.created_at).toLocaleDateString()]}),c.metadata?.usage_count&&e.jsxs("span",{children:[c.metadata.usage_count," uses"]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium",children:c.name}),c.metadata?.is_featured&&e.jsx(Is,{className:"h-4 w-4 text-yellow-500 fill-current"}),c.metadata?.category&&e.jsx(G,{variant:"outline",className:"text-xs",children:c.metadata.category})]}),c.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.description}),c.metadata?.tags&&c.metadata.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.metadata.tags.slice(0,5).map(b=>e.jsx(G,{variant:"secondary",className:"text-xs",children:b},b)),c.metadata.tags.length>5&&e.jsxs(G,{variant:"secondary",className:"text-xs",children:["+",c.metadata.tags.length-5]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:c.created_at&&new Date(c.created_at).toLocaleDateString()}),c.metadata?.usage_count&&e.jsxs("div",{className:"text-xs text-gray-500",children:[c.metadata.usage_count," uses"]})]})]})},c.id))})})]}),e.jsx("div",{className:"flex justify-end border-t pt-4",children:e.jsx(V,{variant:"outline",onClick:()=>E(!1),children:"Cancel"})})]})}),e.jsx(Pi,{formId:s?.id?.toString()||"new",formName:P.getValues("name")||"Untitled Form",formDescription:P.getValues("description"),components:p,isOpen:rt,onClose:()=>Te(!1)})]})}function Ii({id:t,index:s,isSelected:n,isDragOver:a,onRemove:r,onClick:o,children:l}){const{attributes:i,listeners:u,setNodeRef:m,transform:x,transition:h,isDragging:v}=oi({id:t}),p={transform:He.Transform.toString(x),transition:h};return e.jsxs("div",{ref:m,style:p,"data-id":t,"data-item-id":t,"data-dragging":v?"true":"false","data-testid":"canvas-item",className:`relative group border rounded-lg p-4 bg-white ${a?"border-primary bg-primary/5":n?"border-blue-500 bg-blue-50/50":"border-gray-200"} transition-all duration-200 cursor-pointer`,onClick:o,children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-50 hover:text-red-600 transition-colors duration-150",onClick:N=>{N.stopPropagation(),r()},"aria-label":"Remove component",disabled:!1,children:e.jsx(un,{className:"h-4 w-4"})}),e.jsx("div",{className:"drag-handle cursor-move p-2 hover:bg-gradient-metallic-primary hover:text-white rounded-md shadow-sm border border-gray-200 hover:border-iplc-primary transition-all duration-150",style:{minWidth:"40px",minHeight:"40px",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"},"aria-label":"Reorder","data-testid":"drag-handle",...i,...u,onClick:N=>N.stopPropagation(),children:e.jsx(js,{className:"h-5 w-5"})})]})}),l]})}function en({component:t,onUpdate:s,isEditing:n=!1,allComponents:a=[]}){t.type==="evaluation_section"&&(console.log("ComponentRenderer: Rendering evaluation section",t),console.log("Component sectionId:",t.sectionId));const r=o=>{s?.({label:o})};switch(t.type){case"text_input":return e.jsxs("div",{className:"space-y-2",children:[n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(B,{placeholder:t.props?.placeholder||"Enter text...",disabled:!n,className:n?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(ft,{placeholder:t.props?.placeholder||"Enter text...",disabled:!n,className:n?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsxs("select",{disabled:!n,className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select an option..."}),t.props?.options?.map((o,l)=>e.jsx("option",{value:o,children:o},l))]}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"radio":return e.jsxs("div",{className:"space-y-2",children:[n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx("div",{className:"space-y-2",children:t.props?.options?.map((o,l)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:t.id,value:o,disabled:!n,className:"h-4 w-4"}),e.jsx("label",{className:"text-sm",children:o})]},l))}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"checkbox":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",disabled:!n,className:"h-4 w-4"}),n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed flex-1",placeholder:"Enter checkbox label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label})]}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"date":return e.jsxs("div",{className:"space-y-2",children:[n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(B,{type:"date",disabled:!n,className:n?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(B,{type:"number",placeholder:t.props?.placeholder||"Enter number...",disabled:!n,className:n?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"scale":return e.jsxs("div",{className:"space-y-2",children:[n?e.jsx(B,{value:t.label,onChange:o=>r(o.target.value),className:"font-medium border-dashed",placeholder:"Enter scale label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:t.props?.min||1}),e.jsx("input",{type:"range",min:t.props?.min||1,max:t.props?.max||10,disabled:!n,className:"flex-1"}),e.jsx("span",{className:"text-xs text-gray-500",children:t.props?.max||10})]}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"ai_summary":return e.jsx(on,{component:t,onUpdate:s,isEditing:n,allComponents:a});case"title_subtitle":return e.jsx(an,{component:t,onUpdate:s,isEditing:n});case"subtitle":return e.jsx(nn,{props:t.props,isSelected:n,onPropsChange:o=>s&&s({props:o})});case"line_separator":return e.jsx(sn,{props:t.props,isSelected:n,onPropsChange:o=>s&&s({props:o})});case"evaluation_section":{const l=bs.evaluationSections.find(i=>i.id===t.sectionId);return l?e.jsxs("div",{className:"space-y-4 p-4 border-2 border-blue-200 rounded-lg bg-blue-50/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:t.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:"outline",className:"text-xs",children:l.discipline}),t.collapsed&&e.jsx(G,{variant:"secondary",className:"text-xs",children:"Collapsed"})]})]}),l.description&&e.jsx("p",{className:"text-sm text-gray-600",children:l.description}),e.jsx("div",{className:"space-y-3 mt-4",children:l.fields.map((i,u)=>{switch(i.type){case"section_header":return e.jsx("div",{className:`mt-${i.level===1?"4":"3"} mb-2 pt-${i.level===1?"4":"3"} ${u>0?"border-t border-blue-200":""}`,children:e.jsx("h4",{className:`text-${i.level===1?"lg":"md"} font-semibold text-gray-800`,children:i.label})},u);case"subsection":return e.jsx("div",{className:"mt-3 mb-2",children:e.jsx("h5",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:i.label})},u);case"text":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[i.label,i.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(B,{placeholder:`Enter ${i.label.toLowerCase()}`,disabled:!n,className:"text-sm"})]},u);case"textarea":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[i.label,i.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(ft,{placeholder:`Enter ${i.label.toLowerCase()}`,rows:i.rows||3,disabled:!n,className:"text-sm"})]},u);case"select":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[i.label,i.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs(xe,{disabled:!n,children:[e.jsx(pe,{className:"text-sm",children:e.jsx(fe,{placeholder:`Select ${i.label.toLowerCase()}`})}),e.jsx(ge,{children:i.options?.map((m,x)=>e.jsx(_,{value:m,children:m},x))})]})]},u);case"date":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[i.label,i.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(B,{type:"date",disabled:!n,className:"text-sm"})]},u);case"number":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[i.label,i.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(B,{type:"number",min:i.min,max:i.max,step:i.step,placeholder:`Enter ${i.label.toLowerCase()}`,disabled:!n,className:"text-sm"})]},u);case"rating_scale":return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:i.label}),e.jsx("div",{className:"flex items-center space-x-2",children:i.scale.map((m,x)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"button",disabled:!n,className:`w-8 h-8 rounded-full border-2 ${n?"hover:bg-gradient-metallic-primary hover:border-iplc-primary hover:text-white hover:shadow-md":""} border-gray-300 bg-white text-xs font-medium transition-all duration-150`,children:m}),i.labels&&i.labels[x]&&e.jsx("span",{className:"text-xs text-gray-500 mt-1 text-center max-w-[60px]",children:i.labels[x]})]},x))})]},u);case"checkbox_group":return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:i.label}),e.jsx("div",{className:"space-y-1 pl-2",children:i.options?.map((m,x)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ys,{disabled:!n,id:`${i.id}_${x}`}),e.jsx("label",{htmlFor:`${i.id}_${x}`,className:"text-sm text-gray-600 cursor-pointer",children:m})]},x))})]},u);case"rating_grid":case"assistance_grid":return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:i.label}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-xs font-medium text-gray-600 p-2"}),i.columns.map((m,x)=>e.jsx("th",{className:"text-center text-xs font-medium text-gray-600 p-2 min-w-[80px]",children:m},x))]})}),e.jsx("tbody",{children:i.rows.map((m,x)=>e.jsxs("tr",{className:x%2===0?"bg-gray-50":"",children:[e.jsx("td",{className:"text-sm text-gray-700 p-2 font-medium",children:m}),i.columns.map((h,v)=>e.jsx("td",{className:"text-center p-2",children:e.jsx("input",{type:"radio",name:`${i.id}_${x}`,disabled:!n,className:"h-4 w-4"})},v))]},x))})]})})]},u);case"repeating_group":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:i.label}),n&&e.jsxs(V,{size:"sm",variant:"outline",className:"text-xs hover:bg-gradient-metallic-primary hover:text-white hover:border-iplc-primary transition-all duration-150",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),i.addButtonLabel||"Add Item"]})]}),e.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-gray-50",children:[e.jsx("div",{className:"space-y-2",children:i.fields.map((m,x)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-600",children:m.label}),e.jsxs("span",{className:"text-gray-400 ml-2",children:["(",m.type,")"]})]},x))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This section allows multiple entries"})]})]},u);default:return e.jsx("div",{className:"pl-4 border-l-2 border-blue-200",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:i.label}),i.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Type: ",i.type]})]})},u)}})}),n&&e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["This evaluation section contains ",l.fields.length," fields. Use the Property Grid to customize individual field properties."]})})]}):e.jsx("div",{className:"p-4 border border-red-300 rounded bg-red-50",children:e.jsxs("p",{className:"text-sm text-red-600",children:["Evaluation section not found: ",t.sectionId]})})}default:return e.jsx("div",{className:"p-4 border border-dashed border-gray-300 rounded",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Unknown component type: ",t.type]})})}}export{Al as FormBuilder};
//# sourceMappingURL=FormBuilder.pW6zSgBs.js.map
