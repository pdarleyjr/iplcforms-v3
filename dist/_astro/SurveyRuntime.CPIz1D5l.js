const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/survey-vendor.ryh5cWEe.js","_astro/react-vendor.BA2wKBqg.js","_astro/ui-vendor.BQCqNqg0.js"])))=>i.map(i=>d[i]);
import{_ as S}from"./pdf-vendor.CqKMeSPQ.js";import{r as d,j as r}from"./react-vendor.BA2wKBqg.js";import"./ui-vendor.BQCqNqg0.js";function E(e){if(!e)return{pages:[],showProgressBar:"top"};const t={showProgressBar:"top",showQuestionNumbers:"off",pages:[]};if(e.isMultiPage&&e.pages)e.pages.forEach(s=>{const a={name:s.id,title:s.title,description:s.description,elements:[]};s.components&&s.components.forEach(i=>{const o=g(i);o&&a.elements.push(o)}),t.pages.push(a)});else if(e.components){const s={name:"page1",elements:[]};e.components.forEach(a=>{const i=g(a);i&&s.elements.push(i)}),t.pages.push(s)}return t}function g(e){const t={name:e.id,title:e.label,isRequired:e.props?.required||!1};if(e.props?.description&&(t.description=e.props.description),e.props?.placeholder&&(t.placeholder=e.props.placeholder),e.props?.visibilityCondition){const s=e.props.visibilityCondition;if(s.field&&s.value!==void 0){const a=s.operator==="equals"?"=":s.operator==="not_equals"?"!=":s.operator==="contains"?"contains":"=";t.visibleIf=`{${s.field}} ${a} '${s.value}'`}}switch(e.type){case"text_input":return{...t,type:"text",maxLength:e.props?.validation?.maxLength};case"textarea":return{...t,type:"comment",rows:4,maxLength:e.props?.validation?.maxLength};case"number":return{...t,type:"text",inputType:"number",min:e.props?.min||e.props?.validation?.min,max:e.props?.max||e.props?.validation?.max};case"date":return{...t,type:"text",inputType:"date"};case"select":return{...t,type:"dropdown",choices:e.props?.options?.map(s=>({value:s,text:s}))||[]};case"radio":return{...t,type:"radiogroup",choices:e.props?.options?.map(s=>({value:s,text:s}))||[]};case"checkbox":return{...t,type:"checkbox",choices:e.props?.options?.map(s=>({value:s,text:s}))||[]};case"scale":case"clinical_scale":return{...t,type:"rating",rateMin:e.props?.min||1,rateMax:e.props?.max||5,minRateDescription:e.props?.labels?.[0],maxRateDescription:e.props?.labels?.[e.props?.labels?.length-1]};case"clinical_signature":return{...t,type:"signaturepad",width:300,height:200};case"title_subtitle":return{type:"html",name:e.id,html:`<h2>${e.props?.text||e.label||""}</h2>`};case"subtitle":return{type:"html",name:e.id,html:`<h3>${e.props?.text||e.label||""}</h3>`};case"line_separator":return{type:"html",name:e.id,html:'<hr style="margin: 20px 0; border: none; border-top: 1px solid #e5e7eb;" />'};case"ai_summary":return null;case"evaluation_section":return{type:"panel",name:e.id,title:e.label,elements:e.fields?.map(s=>({type:"text",name:s.id||s.name,title:s.label||s.name}))||[]};case"demographics":case"standardized_test":case"oral_motor":case"language_sample":case"sensory_processing":case"goals_planning":case"cpt_code":case"assistance_level":case"clinical_component":return{type:"panel",name:e.id,title:e.label,elements:e.fields?.map(s=>({type:s.type==="select"?"dropdown":s.type==="checkbox"?"checkbox":s.type==="radio"?"radiogroup":"text",name:s.id||s.name,title:s.label||s.name,choices:s.options?.map(a=>({value:typeof a=="string"?a:a.value,text:typeof a=="string"?a:a.label}))}))||[{type:"html",html:`<div class="clinical-component">${e.label||e.type}</div>`}]};default:return{type:"panel",name:e.id,title:e.label,elements:[{type:"html",html:`<div class="custom-component">${e.label||e.type}</div>`}]}}}const R=({formSchema:e,formData:t={},onComplete:s,onValueChanged:a,theme:i="modern",readOnly:o=!1,showProgressBar:y="top"})=>{const[x,b]=d.useState(null),[l,f]=d.useState(null),[_,m]=d.useState(!0),[h,j]=d.useState(null);return d.useEffect(()=>(typeof window<"u"&&(async()=>{try{const n=await S(()=>import("./survey-vendor.ryh5cWEe.js"),__vite__mapDeps([0,1,2])),N=n.Survey,w=n.Model;"StylesManager"in n&&n.StylesManager.applyTheme(i);const v=E(e);v.showProgressBar=y;const u=new w(v);t&&Object.keys(t).length>0&&(u.data=t),o&&(u.mode="display"),s&&u.onComplete.add((p,c)=>{s(p.data)}),a&&u.onValueChanged.add((p,c)=>{a(c.name,c.value)}),b(N),f(u),m(!1)}catch(n){console.error("Failed to load SurveyJS:",n),j("Failed to load survey component"),m(!1)}})(),()=>{l&&l.dispose()}),[e,i,o,y]),d.useEffect(()=>{l&&t&&(l.data=t)},[t,l]),typeof window>"u"?r.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading form..."})]})}):_?r.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading form..."})]})}):h?r.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-red-50 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-600 mb-2",children:"Error loading form"}),r.jsx("p",{className:"text-sm text-gray-600",children:h})]})}):!x||!l?r.jsx("div",{className:"flex items-center justify-center min-h-[400px] bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-gray-600",children:"No form data available"})}):r.jsx("div",{className:"survey-runtime-container",children:r.jsx(x,{model:l})})};export{R as default};
//# sourceMappingURL=SurveyRuntime.CPIz1D5l.js.map
