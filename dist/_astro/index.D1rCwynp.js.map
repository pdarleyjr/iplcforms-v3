{"version":3,"file":"index.D1rCwynp.js","sources":["../../node_modules/@radix-ui/react-presence/dist/index.mjs"],"sourcesContent":["\"use client\";\n\n// src/presence.tsx\nimport * as React2 from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\n\n// src/use-state-machine.tsx\nimport * as React from \"react\";\nfunction useStateMachine(initialState, machine) {\n  return React.useReducer((state, event) => {\n    const nextState = machine[state][event];\n    return nextState ?? state;\n  }, initialState);\n}\n\n// src/presence.tsx\nvar Presence = (props) => {\n  const { present, children } = props;\n  const presence = usePresence(present);\n  const child = typeof children === \"function\" ? children({ present: presence.isPresent }) : React2.Children.only(children);\n  const ref = useComposedRefs(presence.ref, getElementRef(child));\n  const forceMount = typeof children === \"function\";\n  return forceMount || presence.isPresent ? React2.cloneElement(child, { ref }) : null;\n};\nPresence.displayName = \"Presence\";\nfunction usePresence(present) {\n  const [node, setNode] = React2.useState();\n  const stylesRef = React2.useRef(null);\n  const prevPresentRef = React2.useRef(present);\n  const prevAnimationNameRef = React2.useRef(\"none\");\n  const initialState = present ? \"mounted\" : \"unmounted\";\n  const [state, send] = useStateMachine(initialState, {\n    mounted: {\n      UNMOUNT: \"unmounted\",\n      ANIMATION_OUT: \"unmountSuspended\"\n    },\n    unmountSuspended: {\n      MOUNT: \"mounted\",\n      ANIMATION_END: \"unmounted\"\n    },\n    unmounted: {\n      MOUNT: \"mounted\"\n    }\n  });\n  React2.useEffect(() => {\n    const currentAnimationName = getAnimationName(stylesRef.current);\n    prevAnimationNameRef.current = state === \"mounted\" ? currentAnimationName : \"none\";\n  }, [state]);\n  useLayoutEffect(() => {\n    const styles = stylesRef.current;\n    const wasPresent = prevPresentRef.current;\n    const hasPresentChanged = wasPresent !== present;\n    if (hasPresentChanged) {\n      const prevAnimationName = prevAnimationNameRef.current;\n      const currentAnimationName = getAnimationName(styles);\n      if (present) {\n        send(\"MOUNT\");\n      } else if (currentAnimationName === \"none\" || styles?.display === \"none\") {\n        send(\"UNMOUNT\");\n      } else {\n        const isAnimating = prevAnimationName !== currentAnimationName;\n        if (wasPresent && isAnimating) {\n          send(\"ANIMATION_OUT\");\n        } else {\n          send(\"UNMOUNT\");\n        }\n      }\n      prevPresentRef.current = present;\n    }\n  }, [present, send]);\n  useLayoutEffect(() => {\n    if (node) {\n      let timeoutId;\n      const ownerWindow = node.ownerDocument.defaultView ?? window;\n      const handleAnimationEnd = (event) => {\n        const currentAnimationName = getAnimationName(stylesRef.current);\n        const isCurrentAnimation = currentAnimationName.includes(event.animationName);\n        if (event.target === node && isCurrentAnimation) {\n          send(\"ANIMATION_END\");\n          if (!prevPresentRef.current) {\n            const currentFillMode = node.style.animationFillMode;\n            node.style.animationFillMode = \"forwards\";\n            timeoutId = ownerWindow.setTimeout(() => {\n              if (node.style.animationFillMode === \"forwards\") {\n                node.style.animationFillMode = currentFillMode;\n              }\n            });\n          }\n        }\n      };\n      const handleAnimationStart = (event) => {\n        if (event.target === node) {\n          prevAnimationNameRef.current = getAnimationName(stylesRef.current);\n        }\n      };\n      node.addEventListener(\"animationstart\", handleAnimationStart);\n      node.addEventListener(\"animationcancel\", handleAnimationEnd);\n      node.addEventListener(\"animationend\", handleAnimationEnd);\n      return () => {\n        ownerWindow.clearTimeout(timeoutId);\n        node.removeEventListener(\"animationstart\", handleAnimationStart);\n        node.removeEventListener(\"animationcancel\", handleAnimationEnd);\n        node.removeEventListener(\"animationend\", handleAnimationEnd);\n      };\n    } else {\n      send(\"ANIMATION_END\");\n    }\n  }, [node, send]);\n  return {\n    isPresent: [\"mounted\", \"unmountSuspended\"].includes(state),\n    ref: React2.useCallback((node2) => {\n      stylesRef.current = node2 ? getComputedStyle(node2) : null;\n      setNode(node2);\n    }, [])\n  };\n}\nfunction getAnimationName(styles) {\n  return styles?.animationName || \"none\";\n}\nfunction getElementRef(element) {\n  let getter = Object.getOwnPropertyDescriptor(element.props, \"ref\")?.get;\n  let mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.ref;\n  }\n  getter = Object.getOwnPropertyDescriptor(element, \"ref\")?.get;\n  mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.props.ref;\n  }\n  return element.props.ref || element.ref;\n}\nvar Root = Presence;\nexport {\n  Presence,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n"],"names":["useStateMachine","initialState","machine","React.useReducer","state","event","Presence","props","present","children","presence","usePresence","child","React2.Children","ref","useComposedRefs","getElementRef","React2.cloneElement","node","setNode","React2.useState","stylesRef","React2.useRef","prevPresentRef","prevAnimationNameRef","send","React2.useEffect","currentAnimationName","getAnimationName","useLayoutEffect","styles","wasPresent","prevAnimationName","timeoutId","ownerWindow","handleAnimationEnd","isCurrentAnimation","currentFillMode","handleAnimationStart","React2.useCallback","node2","element","getter","mayWarn"],"mappings":"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","x_google_ignoreList":[0]}