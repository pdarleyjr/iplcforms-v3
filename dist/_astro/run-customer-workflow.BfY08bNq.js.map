{"version":3,"file":"run-customer-workflow.BfY08bNq.js","sources":["../../node_modules/lucide-react/dist/esm/icons/workflow.js","../../src/components/admin/run-customer-workflow.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"8\", height: \"8\", x: \"3\", y: \"3\", rx: \"2\", key: \"by2w9f\" }],\n  [\"path\", { d: \"M7 11v4a2 2 0 0 0 2 2h4\", key: \"xkn7yn\" }],\n  [\"rect\", { width: \"8\", height: \"8\", x: \"13\", y: \"13\", rx: \"2\", key: \"1cgmvn\" }]\n];\nconst Workflow = createLucideIcon(\"workflow\", __iconNode);\n\nexport { __iconNode, Workflow as default };\n//# sourceMappingURL=workflow.js.map\n","import { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Workflow } from \"lucide-react\";\r\nimport { runCustomerWorkflow } from \"@/lib/api\";\r\nimport { useState } from \"react\";\r\n\r\nexport function RunCustomerWorkflowButton({\r\n  apiToken,\r\n  customerId,\r\n}: {\r\n  apiToken: string;\r\n  customerId: string;\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const onSubmit = async () => {\r\n    try {\r\n      const url = new URL(window.location.href);\r\n      const response = await runCustomerWorkflow(\r\n        customerId,\r\n        url.origin,\r\n        apiToken,\r\n      );\r\n\r\n      if (!response.success) {\r\n        throw new Error(\"Failed to create subscription\");\r\n      }\r\n\r\n      setOpen(false);\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(\"Error creating subscription:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button>\r\n          <Workflow className=\"mr-2 h-4 w-4\" />\r\n          Run Customer Workflow\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-[600px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Run Customer Workflow</DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <DialogDescription>\r\n          This will run a workflow for the customer. This is completely\r\n          customizable and can be used to do whatever you want. Check out{\" \"}\r\n          <code>src/workflows/customer.ts</code> to get started!\r\n        </DialogDescription>\r\n\r\n        <form onSubmit={onSubmit} className=\"space-y-4\">\r\n          <Button type=\"submit\" className=\"w-full\">\r\n            Run Customer Workflow\r\n          </Button>\r\n        </form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":["__iconNode","Workflow","createLucideIcon","RunCustomerWorkflowButton","apiToken","customerId","open","setOpen","useState","onSubmit","url","runCustomerWorkflow","error","jsxs","Dialog","jsx","DialogTrigger","Button","DialogContent","DialogHeader","DialogTitle","DialogDescription"],"mappings":"+dAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GASA,MAAMA,EAAa,CACjB,CAAC,OAAQ,CAAE,MAAO,IAAK,OAAQ,IAAK,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,IAAK,QAAQ,CAAE,EAC5E,CAAC,OAAQ,CAAE,EAAG,0BAA2B,IAAK,QAAQ,CAAE,EACxD,CAAC,OAAQ,CAAE,MAAO,IAAK,OAAQ,IAAK,EAAG,KAAM,EAAG,KAAM,GAAI,IAAK,IAAK,QAAQ,CAAE,CAChF,EACMC,EAAWC,EAAiB,WAAYF,CAAU,ECDjD,SAASG,EAA0B,CACxC,SAAAC,EACA,WAAAC,CACF,EAGG,CACD,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAS,EAAK,EAEhCC,EAAW,SAAY,CAC3B,GAAI,CACF,MAAMC,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EAOxC,GAAI,EANa,MAAMC,EACrBN,EACAK,EAAI,OACJN,CAAA,GAGY,QACZ,MAAM,IAAI,MAAM,+BAA+B,EAGjDG,EAAQ,EAAK,EACb,OAAO,SAAS,OAAA,CAClB,OAASK,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CACF,EAEA,OACEC,EAAAA,KAACC,EAAA,CAAO,KAAAR,EAAY,aAAcC,EAChC,SAAA,CAAAQ,MAACC,EAAA,CAAc,QAAO,GACpB,SAAAH,EAAAA,KAACI,EAAA,CACC,SAAA,CAAAF,EAAAA,IAACd,EAAA,CAAS,UAAU,cAAA,CAAe,EAAE,uBAAA,CAAA,CAEvC,CAAA,CACF,EACAY,EAAAA,KAACK,EAAA,CAAc,UAAU,mBACvB,SAAA,CAAAH,MAACI,EAAA,CACC,SAAAJ,EAAAA,IAACK,EAAA,CAAY,SAAA,uBAAA,CAAqB,EACpC,SAECC,EAAA,CAAkB,SAAA,CAAA,gIAE+C,IAChEN,EAAAA,IAAC,QAAK,SAAA,2BAAA,CAAyB,EAAO,kBAAA,EACxC,EAEAA,EAAAA,IAAC,OAAA,CAAK,SAAAN,EAAoB,UAAU,YAClC,SAAAM,EAAAA,IAACE,EAAA,CAAO,KAAK,SAAS,UAAU,SAAS,SAAA,uBAAA,CAEzC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ","x_google_ignoreList":[0]}