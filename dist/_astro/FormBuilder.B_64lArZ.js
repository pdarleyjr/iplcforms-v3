import{c as q,j as e,a as Ne}from"./index.BDwUue4i.js";import{r as b,R as ft}from"./index.D4lIrffr.js";import{B as z}from"./button.BBqis-m9.js";import{C as Ps,d as Ms,a as at,b as nt,c as It}from"./card.DLdw4ClT.js";import{D as vt,a as Fa,b as bt,c as yt,d as jt}from"./dialog.CKzr9dHy.js";import{T as Rs,a as qs,b as Pe,c as Ie}from"./tabs.DyleXUyH.js";import{o as Aa,h as Nt,s as Ee,_ as Pa,n as Ma,g as Oa,u as La,a as Ia,F as Ba,b as te,c as ae,d as ne,e as ue,f as fe,i as zs}from"./schemas.DTgMkXNw.js";import{I as R}from"./input.DVIqiHmA.js";import{T as is}from"./textarea.Db7GML6A.js";import{P as $a,e as rt,S as Bt,a as $t,T as Rt,b as bs}from"./evaluation-sections-config.p4dKvSH7.js";import{S as le,a as oe,b as ce,c as de,d as I}from"./select.JBUkh-dL.js";import{C as it}from"./checkbox.BaXQiebc.js";import{B as U}from"./badge.CaCO5-Vh.js";import{C as qt,a as Ra,P as qa}from"./ComponentPalette.Bhw6jc9X.js";import{L as Ze}from"./label.DrpxMY44.js";import{A as zt,R as za}from"./AISummaryElement.P83xQOGl.js";import{E as Ss,b as Vt,S as Ht,a as Va,B as Ha,C as Yt,U as Ya,T as wt,D as Xa,c as Ga}from"./scroll-area.B4WYlx-V.js";import{C as Xt}from"./type.Bd32Sr5l.js";import{C as _s}from"./chevron-right.CaEU_g0D.js";import{C as ks}from"./calendar.CvMlM1NW.js";import{M as Wa}from"./menu.Dp7BajDY.js";import{F as qe}from"./file-text.CGEFS-_6.js";import{C as Ct}from"./chevron-down.4jjxEcjq.js";import{M as Ua}from"./message-square.CgYO-VTg.js";import{P as Ye}from"./plus.B0ra3a6p.js";import{S as Qs}from"./shield.Cm9dfRAP.js";import{U as Gt}from"./users.CXBGSiUN.js";import{A as Wt,a as Ut}from"./alert.DYfTMRW2.js";import{L as Jt,C as Ja}from"./loader-circle.CFEkYbsw.js";import{S as Za}from"./sparkles.CBLYbECK.js";import{L as Qa,S as Ka}from"./save.D1TtpFub.js";import{S as en}from"./settings.CBq_9z7J.js";import"./index.CWpJmkEa.js";import"./index.C_ksqHmP.js";import"./index.CTVvTxhV.js";import"./Combination.CedDniqM.js";import"./index.BXhwHFWz.js";import"./x.D5giPUq_.js";import"./index.DPnI-K_u.js";import"./index.BQPgbWHL.js";import"./index.8FXU7GEA.js";import"./circle.CZXr8haV.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],tn=q("activity",sn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],nn=q("award",an);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],ln=q("baby",rn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],cn=q("bath",on);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],mn=q("briefcase",dn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],un=q("car",hn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],xn=q("cloud-off",pn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],fn=q("cloud",gn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]],bn=q("ear",vn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],jn=q("footprints",yn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],wn=q("gamepad",Nn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Sn=q("git-branch",Cn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],kn=q("grid-3x3",_n);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Zt=q("grip-vertical",En);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],Qt=q("hand",Dn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Fn=q("heart",Tn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Pn=q("house",An);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],On=q("list",Mn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],In=q("pill",Ln);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],$n=q("shirt",Bn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],St=q("star",Rn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],zn=q("stethoscope",qn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Hn=q("tag",Vn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Xn=q("test-tube",Yn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Wn=q("trending-up",Gn);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Jn=q("user-plus",Un);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Qn=q("utensils",Zn);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function _t(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),a.push.apply(a,n)}return a}function Ce(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?_t(Object(a),!0).forEach(function(n){Kn(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_t(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function ys(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ys=function(s){return typeof s}:ys=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ys(t)}function Kn(t,s,a){return s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Te(){return Te=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Te.apply(this,arguments)}function er(t,s){if(t==null)return{};var a={},n=Object.keys(t),r,i;for(i=0;i<n.length;i++)r=n[i],!(s.indexOf(r)>=0)&&(a[r]=t[r]);return a}function sr(t,s){if(t==null)return{};var a=er(t,s),n,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var tr="1.15.6";function De(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Fe=De(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ls=De(/Edge/i),kt=De(/firefox/i),ss=De(/safari/i)&&!De(/chrome/i)&&!De(/android/i),lt=De(/iP(ad|od|hone)/i),Kt=De(/chrome/i)&&De(/android/i),ea={capture:!1,passive:!1};function $(t,s,a){t.addEventListener(s,a,!Fe&&ea)}function L(t,s,a){t.removeEventListener(s,a,!Fe&&ea)}function Es(t,s){if(s){if(s[0]===">"&&(s=s.substring(1)),t)try{if(t.matches)return t.matches(s);if(t.msMatchesSelector)return t.msMatchesSelector(s);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(s)}catch{return!1}return!1}}function sa(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function be(t,s,a,n){if(t){a=a||document;do{if(s!=null&&(s[0]===">"?t.parentNode===a&&Es(t,s):Es(t,s))||n&&t===a)return t;if(t===a)break}while(t=sa(t))}return null}var Et=/\s+/g;function re(t,s,a){if(t&&s)if(t.classList)t.classList[a?"add":"remove"](s);else{var n=(" "+t.className+" ").replace(Et," ").replace(" "+s+" "," ");t.className=(n+(a?" "+s:"")).replace(Et," ")}}function D(t,s,a){var n=t&&t.style;if(n){if(a===void 0)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),s===void 0?a:a[s];!(s in n)&&s.indexOf("webkit")===-1&&(s="-webkit-"+s),n[s]=a+(typeof a=="string"?"":"px")}}function Ge(t,s){var a="";if(typeof t=="string")a=t;else do{var n=D(t,"transform");n&&n!=="none"&&(a=n+" "+a)}while(!s&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(a)}function ta(t,s,a){if(t){var n=t.getElementsByTagName(s),r=0,i=n.length;if(a)for(;r<i;r++)a(n[r],r);return n}return[]}function we(){var t=document.scrollingElement;return t||document.documentElement}function J(t,s,a,n,r){if(!(!t.getBoundingClientRect&&t!==window)){var i,c,o,d,m,p,h;if(t!==window&&t.parentNode&&t!==we()?(i=t.getBoundingClientRect(),c=i.top,o=i.left,d=i.bottom,m=i.right,p=i.height,h=i.width):(c=0,o=0,d=window.innerHeight,m=window.innerWidth,p=window.innerHeight,h=window.innerWidth),(s||a)&&t!==window&&(r=r||t.parentNode,!Fe))do if(r&&r.getBoundingClientRect&&(D(r,"transform")!=="none"||a&&D(r,"position")!=="static")){var g=r.getBoundingClientRect();c-=g.top+parseInt(D(r,"border-top-width")),o-=g.left+parseInt(D(r,"border-left-width")),d=c+i.height,m=o+i.width;break}while(r=r.parentNode);if(n&&t!==window){var N=Ge(r||t),v=N&&N.a,y=N&&N.d;N&&(c/=y,o/=v,h/=v,p/=y,d=c+p,m=o+h)}return{top:c,left:o,bottom:d,right:m,width:h,height:p}}}function Dt(t,s,a){for(var n=Le(t,!0),r=J(t)[s];n;){var i=J(n)[a],c=void 0;if(c=r>=i,!c)return n;if(n===we())break;n=Le(n,!1)}return!1}function We(t,s,a,n){for(var r=0,i=0,c=t.children;i<c.length;){if(c[i].style.display!=="none"&&c[i]!==T.ghost&&(n||c[i]!==T.dragged)&&be(c[i],a.draggable,t,!1)){if(r===s)return c[i];r++}i++}return null}function ot(t,s){for(var a=t.lastElementChild;a&&(a===T.ghost||D(a,"display")==="none"||s&&!Es(a,s));)a=a.previousElementSibling;return a||null}function pe(t,s){var a=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==T.clone&&(!s||Es(t,s))&&a++;return a}function Tt(t){var s=0,a=0,n=we();if(t)do{var r=Ge(t),i=r.a,c=r.d;s+=t.scrollLeft*i,a+=t.scrollTop*c}while(t!==n&&(t=t.parentNode));return[s,a]}function ar(t,s){for(var a in t)if(t.hasOwnProperty(a)){for(var n in s)if(s.hasOwnProperty(n)&&s[n]===t[a][n])return Number(a)}return-1}function Le(t,s){if(!t||!t.getBoundingClientRect)return we();var a=t,n=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var r=D(a);if(a.clientWidth<a.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||a.clientHeight<a.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!a.getBoundingClientRect||a===document.body)return we();if(n||s)return a;n=!0}}while(a=a.parentNode);return we()}function nr(t,s){if(t&&s)for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a]);return t}function Vs(t,s){return Math.round(t.top)===Math.round(s.top)&&Math.round(t.left)===Math.round(s.left)&&Math.round(t.height)===Math.round(s.height)&&Math.round(t.width)===Math.round(s.width)}var ts;function aa(t,s){return function(){if(!ts){var a=arguments,n=this;a.length===1?t.call(n,a[0]):t.apply(n,a),ts=setTimeout(function(){ts=void 0},s)}}}function rr(){clearTimeout(ts),ts=void 0}function na(t,s,a){t.scrollLeft+=s,t.scrollTop+=a}function ra(t){var s=window.Polymer,a=window.jQuery||window.Zepto;return s&&s.dom?s.dom(t).cloneNode(!0):a?a(t).clone(!0)[0]:t.cloneNode(!0)}function ia(t,s,a){var n={};return Array.from(t.children).forEach(function(r){var i,c,o,d;if(!(!be(r,s.draggable,t,!1)||r.animated||r===a)){var m=J(r);n.left=Math.min((i=n.left)!==null&&i!==void 0?i:1/0,m.left),n.top=Math.min((c=n.top)!==null&&c!==void 0?c:1/0,m.top),n.right=Math.max((o=n.right)!==null&&o!==void 0?o:-1/0,m.right),n.bottom=Math.max((d=n.bottom)!==null&&d!==void 0?d:-1/0,m.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var se="Sortable"+new Date().getTime();function ir(){var t=[],s;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(D(r,"display")==="none"||r===T.ghost)){t.push({target:r,rect:J(r)});var i=Ce({},t[t.length-1].rect);if(r.thisAnimationDuration){var c=Ge(r,!0);c&&(i.top-=c.f,i.left-=c.e)}r.fromRect=i}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(ar(t,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(s),typeof n=="function"&&n();return}var i=!1,c=0;t.forEach(function(o){var d=0,m=o.target,p=m.fromRect,h=J(m),g=m.prevFromRect,N=m.prevToRect,v=o.rect,y=Ge(m,!0);y&&(h.top-=y.f,h.left-=y.e),m.toRect=h,m.thisAnimationDuration&&Vs(g,h)&&!Vs(p,h)&&(v.top-h.top)/(v.left-h.left)===(p.top-h.top)/(p.left-h.left)&&(d=or(v,g,N,r.options)),Vs(h,p)||(m.prevFromRect=p,m.prevToRect=h,d||(d=r.options.animation),r.animate(m,v,h,d)),d&&(i=!0,c=Math.max(c,d),clearTimeout(m.animationResetTimer),m.animationResetTimer=setTimeout(function(){m.animationTime=0,m.prevFromRect=null,m.fromRect=null,m.prevToRect=null,m.thisAnimationDuration=null},d),m.thisAnimationDuration=d)}),clearTimeout(s),i?s=setTimeout(function(){typeof n=="function"&&n()},c):typeof n=="function"&&n(),t=[]},animate:function(n,r,i,c){if(c){D(n,"transition",""),D(n,"transform","");var o=Ge(this.el),d=o&&o.a,m=o&&o.d,p=(r.left-i.left)/(d||1),h=(r.top-i.top)/(m||1);n.animatingX=!!p,n.animatingY=!!h,D(n,"transform","translate3d("+p+"px,"+h+"px,0)"),this.forRepaintDummy=lr(n),D(n,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:"")),D(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){D(n,"transition",""),D(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},c)}}}}function lr(t){return t.offsetWidth}function or(t,s,a,n){return Math.sqrt(Math.pow(s.top-t.top,2)+Math.pow(s.left-t.left,2))/Math.sqrt(Math.pow(s.top-a.top,2)+Math.pow(s.left-a.left,2))*n.animation}var ze=[],Hs={initializeByDefault:!0},os={mount:function(s){for(var a in Hs)Hs.hasOwnProperty(a)&&!(a in s)&&(s[a]=Hs[a]);ze.forEach(function(n){if(n.pluginName===s.pluginName)throw"Sortable: Cannot mount plugin ".concat(s.pluginName," more than once")}),ze.push(s)},pluginEvent:function(s,a,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=s+"Global";ze.forEach(function(c){a[c.pluginName]&&(a[c.pluginName][i]&&a[c.pluginName][i](Ce({sortable:a},n)),a.options[c.pluginName]&&a[c.pluginName][s]&&a[c.pluginName][s](Ce({sortable:a},n)))})},initializePlugins:function(s,a,n,r){ze.forEach(function(o){var d=o.pluginName;if(!(!s.options[d]&&!o.initializeByDefault)){var m=new o(s,a,s.options);m.sortable=s,m.options=s.options,s[d]=m,Te(n,m.defaults)}});for(var i in s.options)if(s.options.hasOwnProperty(i)){var c=this.modifyOption(s,i,s.options[i]);typeof c<"u"&&(s.options[i]=c)}},getEventProperties:function(s,a){var n={};return ze.forEach(function(r){typeof r.eventProperties=="function"&&Te(n,r.eventProperties.call(a[r.pluginName],s))}),n},modifyOption:function(s,a,n){var r;return ze.forEach(function(i){s[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[a]=="function"&&(r=i.optionListeners[a].call(s[i.pluginName],n))}),r}};function cr(t){var s=t.sortable,a=t.rootEl,n=t.name,r=t.targetEl,i=t.cloneEl,c=t.toEl,o=t.fromEl,d=t.oldIndex,m=t.newIndex,p=t.oldDraggableIndex,h=t.newDraggableIndex,g=t.originalEvent,N=t.putSortable,v=t.extraEventProperties;if(s=s||a&&a[se],!!s){var y,F=s.options,x="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Fe&&!ls?y=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(n,!0,!0)),y.to=c||a,y.from=o||a,y.item=r||a,y.clone=i,y.oldIndex=d,y.newIndex=m,y.oldDraggableIndex=p,y.newDraggableIndex=h,y.originalEvent=g,y.pullMode=N?N.lastPutMode:void 0;var k=Ce(Ce({},v),os.getEventProperties(n,s));for(var P in k)y[P]=k[P];a&&a.dispatchEvent(y),F[x]&&F[x].call(s,y)}}var dr=["evt"],ee=function(s,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=sr(n,dr);os.pluginEvent.bind(T)(s,a,Ce({dragEl:f,parentEl:X,ghostEl:A,rootEl:V,nextEl:Re,lastDownEl:js,cloneEl:Y,cloneHidden:Oe,dragStarted:Qe,putSortable:Z,activeSortable:T.active,originalEvent:r,oldIndex:Xe,oldDraggableIndex:as,newIndex:ie,newDraggableIndex:Me,hideGhostForTarget:da,unhideGhostForTarget:ma,cloneNowHidden:function(){Oe=!0},cloneNowShown:function(){Oe=!1},dispatchSortableEvent:function(o){K({sortable:a,name:o,originalEvent:r})}},i))};function K(t){cr(Ce({putSortable:Z,cloneEl:Y,targetEl:f,rootEl:V,oldIndex:Xe,oldDraggableIndex:as,newIndex:ie,newDraggableIndex:Me},t))}var f,X,A,V,Re,js,Y,Oe,Xe,ie,as,Me,xs,Z,He=!1,Ds=!1,Ts=[],Be,ve,Ys,Xs,Ft,At,Qe,Ve,ns,rs=!1,gs=!1,Ns,Q,Gs=[],Ks=!1,Fs=[],Os=typeof document<"u",fs=lt,Pt=ls||Fe?"cssFloat":"float",mr=Os&&!Kt&&!lt&&"draggable"in document.createElement("div"),la=function(){if(Os){if(Fe)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),oa=function(s,a){var n=D(s),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=We(s,0,a),c=We(s,1,a),o=i&&D(i),d=c&&D(c),m=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+J(i).width,p=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+J(c).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&o.float&&o.float!=="none"){var h=o.float==="left"?"left":"right";return c&&(d.clear==="both"||d.clear===h)?"vertical":"horizontal"}return i&&(o.display==="block"||o.display==="flex"||o.display==="table"||o.display==="grid"||m>=r&&n[Pt]==="none"||c&&n[Pt]==="none"&&m+p>r)?"vertical":"horizontal"},hr=function(s,a,n){var r=n?s.left:s.top,i=n?s.right:s.bottom,c=n?s.width:s.height,o=n?a.left:a.top,d=n?a.right:a.bottom,m=n?a.width:a.height;return r===o||i===d||r+c/2===o+m/2},ur=function(s,a){var n;return Ts.some(function(r){var i=r[se].options.emptyInsertThreshold;if(!(!i||ot(r))){var c=J(r),o=s>=c.left-i&&s<=c.right+i,d=a>=c.top-i&&a<=c.bottom+i;if(o&&d)return n=r}}),n},ca=function(s){function a(i,c){return function(o,d,m,p){var h=o.options.group.name&&d.options.group.name&&o.options.group.name===d.options.group.name;if(i==null&&(c||h))return!0;if(i==null||i===!1)return!1;if(c&&i==="clone")return i;if(typeof i=="function")return a(i(o,d,m,p),c)(o,d,m,p);var g=(c?o:d).options.group.name;return i===!0||typeof i=="string"&&i===g||i.join&&i.indexOf(g)>-1}}var n={},r=s.group;(!r||ys(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=a(r.pull,!0),n.checkPut=a(r.put),n.revertClone=r.revertClone,s.group=n},da=function(){!la&&A&&D(A,"display","none")},ma=function(){!la&&A&&D(A,"display","")};Os&&!Kt&&document.addEventListener("click",function(t){if(Ds)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ds=!1,!1},!0);var $e=function(s){if(f){s=s.touches?s.touches[0]:s;var a=ur(s.clientX,s.clientY);if(a){var n={};for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r]);n.target=n.rootEl=a,n.preventDefault=void 0,n.stopPropagation=void 0,a[se]._onDragOver(n)}}},pr=function(s){f&&f.parentNode[se]._isOutsideThisEl(s.target)};function T(t,s){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=s=Te({},s),t[se]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return oa(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(c,o){c.setData("Text",o.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:T.supportPointer!==!1&&"PointerEvent"in window&&(!ss||lt),emptyInsertThreshold:5};os.initializePlugins(this,t,a);for(var n in a)!(n in s)&&(s[n]=a[n]);ca(s);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=s.forceFallback?!1:mr,this.nativeDraggable&&(this.options.touchStartThreshold=1),s.supportPointer?$(t,"pointerdown",this._onTapStart):($(t,"mousedown",this._onTapStart),$(t,"touchstart",this._onTapStart)),this.nativeDraggable&&($(t,"dragover",this),$(t,"dragenter",this)),Ts.push(this.el),s.store&&s.store.get&&this.sort(s.store.get(this)||[]),Te(this,ir())}T.prototype={constructor:T,_isOutsideThisEl:function(s){!this.el.contains(s)&&s!==this.el&&(Ve=null)},_getDirection:function(s,a){return typeof this.options.direction=="function"?this.options.direction.call(this,s,a,f):this.options.direction},_onTapStart:function(s){if(s.cancelable){var a=this,n=this.el,r=this.options,i=r.preventOnFilter,c=s.type,o=s.touches&&s.touches[0]||s.pointerType&&s.pointerType==="touch"&&s,d=(o||s).target,m=s.target.shadowRoot&&(s.path&&s.path[0]||s.composedPath&&s.composedPath()[0])||d,p=r.filter;if(Nr(n),!f&&!(/mousedown|pointerdown/.test(c)&&s.button!==0||r.disabled)&&!m.isContentEditable&&!(!this.nativeDraggable&&ss&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=be(d,r.draggable,n,!1),!(d&&d.animated)&&js!==d)){if(Xe=pe(d),as=pe(d,r.draggable),typeof p=="function"){if(p.call(this,s,d,this)){K({sortable:a,rootEl:m,name:"filter",targetEl:d,toEl:n,fromEl:n}),ee("filter",a,{evt:s}),i&&s.preventDefault();return}}else if(p&&(p=p.split(",").some(function(h){if(h=be(m,h.trim(),n,!1),h)return K({sortable:a,rootEl:h,name:"filter",targetEl:d,fromEl:n,toEl:n}),ee("filter",a,{evt:s}),!0}),p)){i&&s.preventDefault();return}r.handle&&!be(m,r.handle,n,!1)||this._prepareDragStart(s,o,d)}}},_prepareDragStart:function(s,a,n){var r=this,i=r.el,c=r.options,o=i.ownerDocument,d;if(n&&!f&&n.parentNode===i){var m=J(n);if(V=i,f=n,X=f.parentNode,Re=f.nextSibling,js=n,xs=c.group,T.dragged=f,Be={target:f,clientX:(a||s).clientX,clientY:(a||s).clientY},Ft=Be.clientX-m.left,At=Be.clientY-m.top,this._lastX=(a||s).clientX,this._lastY=(a||s).clientY,f.style["will-change"]="all",d=function(){if(ee("delayEnded",r,{evt:s}),T.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!kt&&r.nativeDraggable&&(f.draggable=!0),r._triggerDragStart(s,a),K({sortable:r,name:"choose",originalEvent:s}),re(f,c.chosenClass,!0)},c.ignore.split(",").forEach(function(p){ta(f,p.trim(),Ws)}),$(o,"dragover",$e),$(o,"mousemove",$e),$(o,"touchmove",$e),c.supportPointer?($(o,"pointerup",r._onDrop),!this.nativeDraggable&&$(o,"pointercancel",r._onDrop)):($(o,"mouseup",r._onDrop),$(o,"touchend",r._onDrop),$(o,"touchcancel",r._onDrop)),kt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0),ee("delayStart",this,{evt:s}),c.delay&&(!c.delayOnTouchOnly||a)&&(!this.nativeDraggable||!(ls||Fe))){if(T.eventCanceled){this._onDrop();return}c.supportPointer?($(o,"pointerup",r._disableDelayedDrag),$(o,"pointercancel",r._disableDelayedDrag)):($(o,"mouseup",r._disableDelayedDrag),$(o,"touchend",r._disableDelayedDrag),$(o,"touchcancel",r._disableDelayedDrag)),$(o,"mousemove",r._delayedDragTouchMoveHandler),$(o,"touchmove",r._delayedDragTouchMoveHandler),c.supportPointer&&$(o,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(d,c.delay)}else d()}},_delayedDragTouchMoveHandler:function(s){var a=s.touches?s.touches[0]:s;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&Ws(f),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var s=this.el.ownerDocument;L(s,"mouseup",this._disableDelayedDrag),L(s,"touchend",this._disableDelayedDrag),L(s,"touchcancel",this._disableDelayedDrag),L(s,"pointerup",this._disableDelayedDrag),L(s,"pointercancel",this._disableDelayedDrag),L(s,"mousemove",this._delayedDragTouchMoveHandler),L(s,"touchmove",this._delayedDragTouchMoveHandler),L(s,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(s,a){a=a||s.pointerType=="touch"&&s,!this.nativeDraggable||a?this.options.supportPointer?$(document,"pointermove",this._onTouchMove):a?$(document,"touchmove",this._onTouchMove):$(document,"mousemove",this._onTouchMove):($(f,"dragend",this),$(V,"dragstart",this._onDragStart));try{document.selection?ws(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(s,a){if(He=!1,V&&f){ee("dragStarted",this,{evt:a}),this.nativeDraggable&&$(document,"dragover",pr);var n=this.options;!s&&re(f,n.dragClass,!1),re(f,n.ghostClass,!0),T.active=this,s&&this._appendGhost(),K({sortable:this,name:"start",originalEvent:a})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,da();for(var s=document.elementFromPoint(ve.clientX,ve.clientY),a=s;s&&s.shadowRoot&&(s=s.shadowRoot.elementFromPoint(ve.clientX,ve.clientY),s!==a);)a=s;if(f.parentNode[se]._isOutsideThisEl(s),a)do{if(a[se]){var n=void 0;if(n=a[se]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:s,rootEl:a}),n&&!this.options.dragoverBubble)break}s=a}while(a=sa(a));ma()}},_onTouchMove:function(s){if(Be){var a=this.options,n=a.fallbackTolerance,r=a.fallbackOffset,i=s.touches?s.touches[0]:s,c=A&&Ge(A,!0),o=A&&c&&c.a,d=A&&c&&c.d,m=fs&&Q&&Tt(Q),p=(i.clientX-Be.clientX+r.x)/(o||1)+(m?m[0]-Gs[0]:0)/(o||1),h=(i.clientY-Be.clientY+r.y)/(d||1)+(m?m[1]-Gs[1]:0)/(d||1);if(!T.active&&!He){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(s,!0)}if(A){c?(c.e+=p-(Ys||0),c.f+=h-(Xs||0)):c={a:1,b:0,c:0,d:1,e:p,f:h};var g="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")");D(A,"webkitTransform",g),D(A,"mozTransform",g),D(A,"msTransform",g),D(A,"transform",g),Ys=p,Xs=h,ve=i}s.cancelable&&s.preventDefault()}},_appendGhost:function(){if(!A){var s=this.options.fallbackOnBody?document.body:V,a=J(f,!0,fs,!0,s),n=this.options;if(fs){for(Q=s;D(Q,"position")==="static"&&D(Q,"transform")==="none"&&Q!==document;)Q=Q.parentNode;Q!==document.body&&Q!==document.documentElement?(Q===document&&(Q=we()),a.top+=Q.scrollTop,a.left+=Q.scrollLeft):Q=we(),Gs=Tt(Q)}A=f.cloneNode(!0),re(A,n.ghostClass,!1),re(A,n.fallbackClass,!0),re(A,n.dragClass,!0),D(A,"transition",""),D(A,"transform",""),D(A,"box-sizing","border-box"),D(A,"margin",0),D(A,"top",a.top),D(A,"left",a.left),D(A,"width",a.width),D(A,"height",a.height),D(A,"opacity","0.8"),D(A,"position",fs?"absolute":"fixed"),D(A,"zIndex","100000"),D(A,"pointerEvents","none"),T.ghost=A,s.appendChild(A),D(A,"transform-origin",Ft/parseInt(A.style.width)*100+"% "+At/parseInt(A.style.height)*100+"%")}},_onDragStart:function(s,a){var n=this,r=s.dataTransfer,i=n.options;if(ee("dragStart",this,{evt:s}),T.eventCanceled){this._onDrop();return}ee("setupClone",this),T.eventCanceled||(Y=ra(f),Y.removeAttribute("id"),Y.draggable=!1,Y.style["will-change"]="",this._hideClone(),re(Y,this.options.chosenClass,!1),T.clone=Y),n.cloneId=ws(function(){ee("clone",n),!T.eventCanceled&&(n.options.removeCloneOnHide||V.insertBefore(Y,f),n._hideClone(),K({sortable:n,name:"clone"}))}),!a&&re(f,i.dragClass,!0),a?(Ds=!0,n._loopId=setInterval(n._emulateDragOver,50)):(L(document,"mouseup",n._onDrop),L(document,"touchend",n._onDrop),L(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,f)),$(document,"drop",n),D(f,"transform","translateZ(0)")),He=!0,n._dragStartId=ws(n._dragStarted.bind(n,a,s)),$(document,"selectstart",n),Qe=!0,window.getSelection().removeAllRanges(),ss&&D(document.body,"user-select","none")},_onDragOver:function(s){var a=this.el,n=s.target,r,i,c,o=this.options,d=o.group,m=T.active,p=xs===d,h=o.sort,g=Z||m,N,v=this,y=!1;if(Ks)return;function F(_e,ke){ee(_e,v,Ce({evt:s,isOwner:p,axis:N?"vertical":"horizontal",revert:c,dragRect:r,targetRect:i,canSort:h,fromSortable:g,target:n,completed:k,onMove:function(Ae,ds){return vs(V,a,f,r,Ae,J(Ae),s,ds)},changed:P},ke))}function x(){F("dragOverAnimationCapture"),v.captureAnimationState(),v!==g&&g.captureAnimationState()}function k(_e){return F("dragOverCompleted",{insertion:_e}),_e&&(p?m._hideClone():m._showClone(v),v!==g&&(re(f,Z?Z.options.ghostClass:m.options.ghostClass,!1),re(f,o.ghostClass,!0)),Z!==v&&v!==T.active?Z=v:v===T.active&&Z&&(Z=null),g===v&&(v._ignoreWhileAnimating=n),v.animateAll(function(){F("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(n===f&&!f.animated||n===a&&!n.animated)&&(Ve=null),!o.dragoverBubble&&!s.rootEl&&n!==document&&(f.parentNode[se]._isOutsideThisEl(s.target),!_e&&$e(s)),!o.dragoverBubble&&s.stopPropagation&&s.stopPropagation(),y=!0}function P(){ie=pe(f),Me=pe(f,o.draggable),K({sortable:v,name:"change",toEl:a,newIndex:ie,newDraggableIndex:Me,originalEvent:s})}if(s.preventDefault!==void 0&&s.cancelable&&s.preventDefault(),n=be(n,o.draggable,a,!0),F("dragOver"),T.eventCanceled)return y;if(f.contains(s.target)||n.animated&&n.animatingX&&n.animatingY||v._ignoreWhileAnimating===n)return k(!1);if(Ds=!1,m&&!o.disabled&&(p?h||(c=X!==V):Z===this||(this.lastPutMode=xs.checkPull(this,m,f,s))&&d.checkPut(this,m,f,s))){if(N=this._getDirection(s,n)==="vertical",r=J(f),F("dragOverValid"),T.eventCanceled)return y;if(c)return X=V,x(),this._hideClone(),F("revert"),T.eventCanceled||(Re?V.insertBefore(f,Re):V.appendChild(f)),k(!0);var O=ot(a,o.draggable);if(!O||vr(s,N,this)&&!O.animated){if(O===f)return k(!1);if(O&&a===s.target&&(n=O),n&&(i=J(n)),vs(V,a,f,r,n,i,s,!!n)!==!1)return x(),O&&O.nextSibling?a.insertBefore(f,O.nextSibling):a.appendChild(f),X=a,P(),k(!0)}else if(O&&fr(s,N,this)){var E=We(a,0,o,!0);if(E===f)return k(!1);if(n=E,i=J(n),vs(V,a,f,r,n,i,s,!1)!==!1)return x(),a.insertBefore(f,E),X=a,P(),k(!0)}else if(n.parentNode===a){i=J(n);var u=0,_,C=f.parentNode!==a,w=!hr(f.animated&&f.toRect||r,n.animated&&n.toRect||i,N),H=N?"top":"left",G=Dt(n,"top","top")||Dt(f,"top","top"),Se=G?G.scrollTop:void 0;Ve!==n&&(_=i[H],rs=!1,gs=!w&&o.invertSwap||C),u=br(s,n,i,N,w?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,gs,Ve===n);var xe;if(u!==0){var ye=pe(f);do ye-=u,xe=X.children[ye];while(xe&&(D(xe,"display")==="none"||xe===A))}if(u===0||xe===n)return k(!1);Ve=n,ns=u;var me=n.nextElementSibling,he=!1;he=u===1;var ge=vs(V,a,f,r,n,i,s,he);if(ge!==!1)return(ge===1||ge===-1)&&(he=ge===1),Ks=!0,setTimeout(gr,30),x(),he&&!me?a.appendChild(f):n.parentNode.insertBefore(f,he?me:n),G&&na(G,0,Se-G.scrollTop),X=f.parentNode,_!==void 0&&!gs&&(Ns=Math.abs(_-J(n)[H])),P(),k(!0)}if(a.contains(f))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){L(document,"mousemove",this._onTouchMove),L(document,"touchmove",this._onTouchMove),L(document,"pointermove",this._onTouchMove),L(document,"dragover",$e),L(document,"mousemove",$e),L(document,"touchmove",$e)},_offUpEvents:function(){var s=this.el.ownerDocument;L(s,"mouseup",this._onDrop),L(s,"touchend",this._onDrop),L(s,"pointerup",this._onDrop),L(s,"pointercancel",this._onDrop),L(s,"touchcancel",this._onDrop),L(document,"selectstart",this)},_onDrop:function(s){var a=this.el,n=this.options;if(ie=pe(f),Me=pe(f,n.draggable),ee("drop",this,{evt:s}),X=f&&f.parentNode,ie=pe(f),Me=pe(f,n.draggable),T.eventCanceled){this._nulling();return}He=!1,gs=!1,rs=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),et(this.cloneId),et(this._dragStartId),this.nativeDraggable&&(L(document,"drop",this),L(a,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ss&&D(document.body,"user-select",""),D(f,"transform",""),s&&(Qe&&(s.cancelable&&s.preventDefault(),!n.dropBubble&&s.stopPropagation()),A&&A.parentNode&&A.parentNode.removeChild(A),(V===X||Z&&Z.lastPutMode!=="clone")&&Y&&Y.parentNode&&Y.parentNode.removeChild(Y),f&&(this.nativeDraggable&&L(f,"dragend",this),Ws(f),f.style["will-change"]="",Qe&&!He&&re(f,Z?Z.options.ghostClass:this.options.ghostClass,!1),re(f,this.options.chosenClass,!1),K({sortable:this,name:"unchoose",toEl:X,newIndex:null,newDraggableIndex:null,originalEvent:s}),V!==X?(ie>=0&&(K({rootEl:X,name:"add",toEl:X,fromEl:V,originalEvent:s}),K({sortable:this,name:"remove",toEl:X,originalEvent:s}),K({rootEl:X,name:"sort",toEl:X,fromEl:V,originalEvent:s}),K({sortable:this,name:"sort",toEl:X,originalEvent:s})),Z&&Z.save()):ie!==Xe&&ie>=0&&(K({sortable:this,name:"update",toEl:X,originalEvent:s}),K({sortable:this,name:"sort",toEl:X,originalEvent:s})),T.active&&((ie==null||ie===-1)&&(ie=Xe,Me=as),K({sortable:this,name:"end",toEl:X,originalEvent:s}),this.save()))),this._nulling()},_nulling:function(){ee("nulling",this),V=f=X=A=Re=Y=js=Oe=Be=ve=Qe=ie=Me=Xe=as=Ve=ns=Z=xs=T.dragged=T.ghost=T.clone=T.active=null,Fs.forEach(function(s){s.checked=!0}),Fs.length=Ys=Xs=0},handleEvent:function(s){switch(s.type){case"drop":case"dragend":this._onDrop(s);break;case"dragenter":case"dragover":f&&(this._onDragOver(s),xr(s));break;case"selectstart":s.preventDefault();break}},toArray:function(){for(var s=[],a,n=this.el.children,r=0,i=n.length,c=this.options;r<i;r++)a=n[r],be(a,c.draggable,this.el,!1)&&s.push(a.getAttribute(c.dataIdAttr)||jr(a));return s},sort:function(s,a){var n={},r=this.el;this.toArray().forEach(function(i,c){var o=r.children[c];be(o,this.options.draggable,r,!1)&&(n[i]=o)},this),a&&this.captureAnimationState(),s.forEach(function(i){n[i]&&(r.removeChild(n[i]),r.appendChild(n[i]))}),a&&this.animateAll()},save:function(){var s=this.options.store;s&&s.set&&s.set(this)},closest:function(s,a){return be(s,a||this.options.draggable,this.el,!1)},option:function(s,a){var n=this.options;if(a===void 0)return n[s];var r=os.modifyOption(this,s,a);typeof r<"u"?n[s]=r:n[s]=a,s==="group"&&ca(n)},destroy:function(){ee("destroy",this);var s=this.el;s[se]=null,L(s,"mousedown",this._onTapStart),L(s,"touchstart",this._onTapStart),L(s,"pointerdown",this._onTapStart),this.nativeDraggable&&(L(s,"dragover",this),L(s,"dragenter",this)),Array.prototype.forEach.call(s.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ts.splice(Ts.indexOf(this.el),1),this.el=s=null},_hideClone:function(){if(!Oe){if(ee("hideClone",this),T.eventCanceled)return;D(Y,"display","none"),this.options.removeCloneOnHide&&Y.parentNode&&Y.parentNode.removeChild(Y),Oe=!0}},_showClone:function(s){if(s.lastPutMode!=="clone"){this._hideClone();return}if(Oe){if(ee("showClone",this),T.eventCanceled)return;f.parentNode==V&&!this.options.group.revertClone?V.insertBefore(Y,f):Re?V.insertBefore(Y,Re):V.appendChild(Y),this.options.group.revertClone&&this.animate(f,Y),D(Y,"display",""),Oe=!1}}};function xr(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function vs(t,s,a,n,r,i,c,o){var d,m=t[se],p=m.options.onMove,h;return window.CustomEvent&&!Fe&&!ls?d=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(d=document.createEvent("Event"),d.initEvent("move",!0,!0)),d.to=s,d.from=t,d.dragged=a,d.draggedRect=n,d.related=r||s,d.relatedRect=i||J(s),d.willInsertAfter=o,d.originalEvent=c,t.dispatchEvent(d),p&&(h=p.call(m,d,c)),h}function Ws(t){t.draggable=!1}function gr(){Ks=!1}function fr(t,s,a){var n=J(We(a.el,0,a.options,!0)),r=ia(a.el,a.options,A),i=10;return s?t.clientX<r.left-i||t.clientY<n.top&&t.clientX<n.right:t.clientY<r.top-i||t.clientY<n.bottom&&t.clientX<n.left}function vr(t,s,a){var n=J(ot(a.el,a.options.draggable)),r=ia(a.el,a.options,A),i=10;return s?t.clientX>r.right+i||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>r.bottom+i||t.clientX>n.right&&t.clientY>n.top}function br(t,s,a,n,r,i,c,o){var d=n?t.clientY:t.clientX,m=n?a.height:a.width,p=n?a.top:a.left,h=n?a.bottom:a.right,g=!1;if(!c){if(o&&Ns<m*r){if(!rs&&(ns===1?d>p+m*i/2:d<h-m*i/2)&&(rs=!0),rs)g=!0;else if(ns===1?d<p+Ns:d>h-Ns)return-ns}else if(d>p+m*(1-r)/2&&d<h-m*(1-r)/2)return yr(s)}return g=g||c,g&&(d<p+m*i/2||d>h-m*i/2)?d>p+m/2?1:-1:0}function yr(t){return pe(f)<pe(t)?1:-1}function jr(t){for(var s=t.tagName+t.className+t.src+t.href+t.textContent,a=s.length,n=0;a--;)n+=s.charCodeAt(a);return n.toString(36)}function Nr(t){Fs.length=0;for(var s=t.getElementsByTagName("input"),a=s.length;a--;){var n=s[a];n.checked&&Fs.push(n)}}function ws(t){return setTimeout(t,0)}function et(t){return clearTimeout(t)}Os&&$(document,"touchmove",function(t){(T.active||He)&&t.cancelable&&t.preventDefault()});T.utils={on:$,off:L,css:D,find:ta,is:function(s,a){return!!be(s,a,s,!1)},extend:nr,throttle:aa,closest:be,toggleClass:re,clone:ra,index:pe,nextTick:ws,cancelNextTick:et,detectDirection:oa,getChild:We,expando:se};T.get=function(t){return t[se]};T.mount=function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];s[0].constructor===Array&&(s=s[0]),s.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(T.utils=Ce(Ce({},T.utils),n.utils)),os.mount(n)})};T.create=function(t,s){return new T(t,s)};T.version=tr;var W=[],Ke,st,tt=!1,Us,Js,As,es;function wr(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this))}return t.prototype={dragStarted:function(a){var n=a.originalEvent;this.sortable.nativeDraggable?$(document,"dragover",this._handleAutoScroll):this.options.supportPointer?$(document,"pointermove",this._handleFallbackAutoScroll):n.touches?$(document,"touchmove",this._handleFallbackAutoScroll):$(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){var n=a.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?L(document,"dragover",this._handleAutoScroll):(L(document,"pointermove",this._handleFallbackAutoScroll),L(document,"touchmove",this._handleFallbackAutoScroll),L(document,"mousemove",this._handleFallbackAutoScroll)),Mt(),Cs(),rr()},nulling:function(){As=st=Ke=tt=es=Us=Js=null,W.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,n){var r=this,i=(a.touches?a.touches[0]:a).clientX,c=(a.touches?a.touches[0]:a).clientY,o=document.elementFromPoint(i,c);if(As=a,n||this.options.forceAutoScrollFallback||ls||Fe||ss){Zs(a,this.options,o,n);var d=Le(o,!0);tt&&(!es||i!==Us||c!==Js)&&(es&&Mt(),es=setInterval(function(){var m=Le(document.elementFromPoint(i,c),!0);m!==d&&(d=m,Cs()),Zs(a,r.options,m,n)},10),Us=i,Js=c)}else{if(!this.options.bubbleScroll||Le(o,!0)===we()){Cs();return}Zs(a,this.options,Le(o,!1),!1)}}},Te(t,{pluginName:"scroll",initializeByDefault:!0})}function Cs(){W.forEach(function(t){clearInterval(t.pid)}),W=[]}function Mt(){clearInterval(es)}var Zs=aa(function(t,s,a,n){if(s.scroll){var r=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,c=s.scrollSensitivity,o=s.scrollSpeed,d=we(),m=!1,p;st!==a&&(st=a,Cs(),Ke=s.scroll,p=s.scrollFn,Ke===!0&&(Ke=Le(a,!0)));var h=0,g=Ke;do{var N=g,v=J(N),y=v.top,F=v.bottom,x=v.left,k=v.right,P=v.width,O=v.height,E=void 0,u=void 0,_=N.scrollWidth,C=N.scrollHeight,w=D(N),H=N.scrollLeft,G=N.scrollTop;N===d?(E=P<_&&(w.overflowX==="auto"||w.overflowX==="scroll"||w.overflowX==="visible"),u=O<C&&(w.overflowY==="auto"||w.overflowY==="scroll"||w.overflowY==="visible")):(E=P<_&&(w.overflowX==="auto"||w.overflowX==="scroll"),u=O<C&&(w.overflowY==="auto"||w.overflowY==="scroll"));var Se=E&&(Math.abs(k-r)<=c&&H+P<_)-(Math.abs(x-r)<=c&&!!H),xe=u&&(Math.abs(F-i)<=c&&G+O<C)-(Math.abs(y-i)<=c&&!!G);if(!W[h])for(var ye=0;ye<=h;ye++)W[ye]||(W[ye]={});(W[h].vx!=Se||W[h].vy!=xe||W[h].el!==N)&&(W[h].el=N,W[h].vx=Se,W[h].vy=xe,clearInterval(W[h].pid),(Se!=0||xe!=0)&&(m=!0,W[h].pid=setInterval(function(){n&&this.layer===0&&T.active._onTouchMove(As);var me=W[this.layer].vy?W[this.layer].vy*o:0,he=W[this.layer].vx?W[this.layer].vx*o:0;typeof p=="function"&&p.call(T.dragged.parentNode[se],he,me,t,As,W[this.layer].el)!=="continue"||na(W[this.layer].el,he,me)}.bind({layer:h}),24))),h++}while(s.bubbleScroll&&g!==d&&(g=Le(g,!1)));tt=m}},30),ha=function(s){var a=s.originalEvent,n=s.putSortable,r=s.dragEl,i=s.activeSortable,c=s.dispatchSortableEvent,o=s.hideGhostForTarget,d=s.unhideGhostForTarget;if(a){var m=n||i;o();var p=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,h=document.elementFromPoint(p.clientX,p.clientY);d(),m&&!m.el.contains(h)&&(c("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function ct(){}ct.prototype={startIndex:null,dragStart:function(s){var a=s.oldDraggableIndex;this.startIndex=a},onSpill:function(s){var a=s.dragEl,n=s.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=We(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(a,r):this.sortable.el.appendChild(a),this.sortable.animateAll(),n&&n.animateAll()},drop:ha};Te(ct,{pluginName:"revertOnSpill"});function dt(){}dt.prototype={onSpill:function(s){var a=s.dragEl,n=s.putSortable,r=n||this.sortable;r.captureAnimationState(),a.parentNode&&a.parentNode.removeChild(a),r.animateAll()},drop:ha};Te(dt,{pluginName:"removeOnSpill"});T.mount(new wr);T.mount(dt,ct);const Cr=({show:t})=>t?e.jsxs("div",{className:"flex justify-between items-start mb-6 pb-4 border-b border-gray-200",children:[e.jsx("div",{className:"text-2xl font-bold",children:"FormPro"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Form powered by IPLC"})]}):null,Sr=({components:t,pages:s,isMultiPage:a=!1,title:n,description:r="",className:i="",showIplcLogo:c})=>{const[o,d]=b.useState(0),m=a&&s?s[o]?.components||[]:t||[],p=[...m].sort((v,y)=>v.order-y.order),h=s?.length||1,g=s?.[o],N=v=>{const{type:y,label:F,props:x={}}=v,k=x.required||!1,P=x.placeholder||"",O=x.description||"",E=x.options||[],u=e.jsxs(Ze,{className:"text-sm font-medium text-gray-700",children:[F,k&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),O&&e.jsx("span",{className:"text-xs text-gray-500 font-normal block mt-1",children:O})]});switch(y){case"text_input":return e.jsxs("div",{className:"space-y-2",children:[u,e.jsx(R,{placeholder:P,disabled:!0,className:"bg-gray-50"})]},v.id);case"textarea":return e.jsxs("div",{className:"space-y-2",children:[u,e.jsx(is,{placeholder:P,disabled:!0,className:"bg-gray-50 min-h-[100px]"})]},v.id);case"select":return e.jsxs("div",{className:"space-y-2",children:[u,e.jsxs("select",{disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:P||"Select an option..."}),E.map((_,C)=>e.jsx("option",{value:_,children:_},C))]})]},v.id);case"radio":return e.jsxs("div",{className:"space-y-3",children:[u,e.jsx("div",{className:"space-y-2",children:E.map((_,C)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",value:_,disabled:!0,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),e.jsx(Ze,{className:"text-sm text-gray-600",children:_})]},C))})]},v.id);case"checkbox":return e.jsxs("div",{className:"space-y-3",children:[u,e.jsx("div",{className:"space-y-2",children:E.map((_,C)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",disabled:!0,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx(Ze,{className:"text-sm text-gray-600",children:_})]},C))})]},v.id);case"date":return e.jsxs("div",{className:"space-y-2",children:[u,e.jsxs("div",{className:"relative",children:[e.jsx(R,{type:"date",disabled:!0,className:"bg-gray-50"}),e.jsx(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]},v.id);case"number":return e.jsxs("div",{className:"space-y-2",children:[u,e.jsx(R,{type:"number",placeholder:P,min:x.min,max:x.max,disabled:!0,className:"bg-gray-50"}),(x.min!==void 0||x.max!==void 0)&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Range: ",x.min||0," - ",x.max||"∞"]})]},v.id);case"scale":return e.jsxs("div",{className:"space-y-3",children:[u,e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:x.min||1}),e.jsx("span",{className:"text-sm text-gray-500",children:x.max||10})]}),e.jsx("div",{className:"flex space-x-2",children:Array.from({length:(x.max||10)-(x.min||1)+1},(_,C)=>{const w=(x.min||1)+C;return e.jsx("button",{disabled:!0,className:"w-8 h-8 rounded-full border-2 border-gray-300 bg-gray-50 text-sm text-gray-600 flex items-center justify-center font-medium shadow-sm",children:w},w)})})]})]},v.id);case"ai_summary":return e.jsx("div",{children:e.jsx(zt,{component:v,isEditing:!1,allComponents:m})},v.id);case"title_subtitle":return e.jsx(Rt,{component:v},v.id);case"subtitle":return e.jsx($t,{props:v.props},v.id);case"line_separator":return e.jsx(Bt,{props:v.props},v.id);case"evaluation_section":{const C=rt.evaluationSections.find(w=>w.id===v.sectionId);return C?e.jsxs("div",{className:"space-y-4 p-4 border-2 border-blue-200 rounded-lg bg-blue-50/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:v.label}),e.jsx(U,{variant:"outline",className:"text-xs",children:C.discipline})]}),C.description&&e.jsx("p",{className:"text-sm text-gray-600",children:C.description}),e.jsx("div",{className:"space-y-3 mt-4",children:C.fields.map((w,H)=>{switch(`${v.id}${w.id}`,w.type){case"section_header":return e.jsx("div",{className:`mt-${w.level===1?"4":"3"} mb-2`,children:e.jsx("h4",{className:`text-${w.level===1?"lg":"md"} font-semibold text-gray-800`,children:w.label})},H);case"text":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[w.label,w.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(R,{disabled:!0,placeholder:`Enter ${w.label.toLowerCase()}`,className:"bg-gray-50"})]},H);case"textarea":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[w.label,w.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(is,{disabled:!0,placeholder:`Enter ${w.label.toLowerCase()}`,rows:w.rows||3,className:"bg-gray-50 min-h-[60px]"})]},H);case"date":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[w.label,w.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{type:"date",disabled:!0,className:"bg-gray-50"}),e.jsx(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]},H);case"select":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[w.label,w.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("select",{disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",children:[e.jsxs("option",{value:"",children:["Select ",w.label.toLowerCase()]}),w.options?.map((G,Se)=>e.jsx("option",{value:G,children:G},Se))]})]},H);case"number":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[w.label,w.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(R,{type:"number",disabled:!0,placeholder:`Enter ${w.label.toLowerCase()}`,min:w.min,max:w.max,className:"bg-gray-50"})]},H);case"subsection":return e.jsx("div",{className:"mt-3 mb-2",children:e.jsx("h5",{className:"text-sm font-medium text-gray-700",children:w.label})},H);default:return e.jsxs("div",{className:"text-sm text-gray-500",children:[w.label," (",w.type,")"]},H)}})})]},v.id):e.jsx("div",{className:"p-4 border border-red-300 rounded bg-red-50",children:e.jsxs("p",{className:"text-sm text-red-600",children:["Evaluation section not found: ",v.sectionId]})},v.id)}default:return e.jsx("div",{className:"space-y-2",children:e.jsxs(Ze,{className:"text-sm text-gray-500",children:["Unknown Component Type: ",y]})},v.id)}};return e.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg h-full overflow-y-auto ${i}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Preview"}),e.jsxs(U,{variant:"secondary",className:"text-xs",children:[p.length," ",p.length===1?"field":"fields"]})]}),a&&s&&s.length>1&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["Page ",o+1," of ",h]})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"This is how your form will appear to users"})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx(Cr,{show:c??!0}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n||"Untitled Form"}),r&&e.jsx("p",{className:"text-gray-600",children:r}),a&&s&&s.length>1&&e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx($a,{value:(o+1)/h*100,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["Step ",o+1," of ",h]}),g&&e.jsx("span",{className:"font-medium",children:g.title})]})]})]}),a&&g&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:g.title}),g.description&&e.jsx("p",{className:"text-gray-600 text-sm",children:g.description})]}),p.length>0?e.jsxs("div",{className:"space-y-6",children:[p.map(N),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:a&&s&&s.length>1?e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(z,{disabled:!0,variant:"outline",className:o===0?"invisible":"",children:[e.jsx(Xt,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsx(z,{disabled:!0,className:"bg-blue-600 hover:bg-blue-700",children:o===h-1?"Submit Form":e.jsxs(e.Fragment,{children:["Next",e.jsx(_s,{className:"h-4 w-4 ml-1"})]})})]}):e.jsx(z,{disabled:!0,className:"bg-blue-600 hover:bg-blue-700",children:"Submit Form"})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(Ss,{className:"h-12 w-12 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"No components yet"}),e.jsx("p",{className:"text-gray-400",children:"Drag components from the palette to start building your form"})]})]})})]})},Ot={ClipboardList:e.jsx(qt,{className:"h-4 w-4"}),Brain:e.jsx(Vt,{className:"h-4 w-4"}),Hand:e.jsx(Qt,{className:"h-4 w-4"}),MessageSquare:e.jsx(Ua,{className:"h-4 w-4"}),Award:e.jsx(nn,{className:"h-4 w-4"}),FileText:e.jsx(qe,{className:"h-4 w-4"}),TrendingUp:e.jsx(Wn,{className:"h-4 w-4"})},_r={"Initial Assessment":"bg-[#219FD9]/20 text-[#219FD9] border-[#219FD9]/30","Cognitive Assessment":"bg-purple-500/20 text-purple-300 border-purple-500/30","Motor Assessment":"bg-[#80C97B]/20 text-[#80C97B] border-[#80C97B]/30","Communication Assessment":"bg-blue-500/20 text-blue-300 border-blue-500/30","Functional Assessment":"bg-[#F9C04D]/20 text-[#F9C04D] border-[#F9C04D]/30","Testing Results":"bg-yellow-500/20 text-yellow-300 border-yellow-500/30",Summary:"bg-gray-500/20 text-gray-300 border-gray-500/30","Progress Monitoring":"bg-[#27599F]/20 text-[#219FD9] border-[#27599F]/30"},Lt={SLP:"bg-blue-500/20 text-blue-300 border-blue-500/30",OT:"bg-[#80C97B]/20 text-[#80C97B] border-[#80C97B]/30",Both:"bg-[#219FD9]/20 text-[#219FD9] border-[#219FD9]/30"},kr=({className:t="",onSectionDrag:s,onComponentClick:a,selectedDiscipline:n="Both",isCollapsed:r,onCollapsedChange:i})=>{ft.useEffect(()=>{console.log("EvaluationSectionsModule mounted at",new Date().toISOString()),console.log("Props received:",{hasOnSectionDrag:!!s,hasOnComponentClick:!!a,onComponentClickType:typeof a,selectedDiscipline:n})},[]);const[c,o]=b.useState(new Set),[d,m]=b.useState(!1),[p,h]=b.useState(!1),g=r!==void 0?r:d,N=i||m;b.useEffect(()=>{const u=()=>{h(window.innerWidth<768)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),b.useEffect(()=>{p&&!g&&N(!0)},[p]);const v=rt.evaluationSections,y=u=>({id:`evaluation_section_${Date.now()}`,type:"evaluation_section",sectionId:u.id,label:u.label,collapsed:!1,fieldValues:{},props:{required:!1,description:u.description,editable:!0}}),F=(u,_)=>{console.log("EvaluationSectionsModule: handleDragStart called for section",_.label);const C=y(_);s&&(console.log("EvaluationSectionsModule: Calling onSectionDrag with component",C),s(C)),u.dataTransfer.setData("application/json",JSON.stringify(C)),u.dataTransfer.effectAllowed="copy"},x=u=>{if(console.log("EvaluationSectionsModule: handleClick called for",u.type),a){const _=y(u);console.log("EvaluationSectionsModule: calling onComponentClick with",_),a(_)}else console.log("EvaluationSectionsModule: onComponentClick not provided")},k=u=>{o(_=>{const C=new Set(_);return C.has(u)?C.delete(u):C.add(u),C})},P=v.filter(u=>n==="Both"||u.discipline===n||u.discipline==="Both"),O=P.reduce((u,_)=>(u[_.category]||(u[_.category]=[]),u[_.category].push(_),u),{}),E=u=>{switch(u.type){case"section_header":return e.jsx("h3",{className:`font-bold text-white ${u.level===1?"text-lg":"text-base"}`,children:u.label});case"subsection":return e.jsx("h4",{className:"font-semibold text-[#219FD9] text-sm mt-2",children:u.label});case"text":case"date":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[u.label," ",u.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsx("div",{className:"h-8 bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1"})]});case"textarea":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[u.label," ",u.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsx("div",{className:"bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1",style:{height:`${(typeof u.rows=="number"?u.rows:3)*1.5}rem`}})]});case"select":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[u.label," ",u.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsxs("div",{className:"h-8 bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1 flex items-center px-2",children:[e.jsx("span",{className:"text-xs text-gray-400",children:u.options?.[0]||"Select..."}),e.jsx(Ct,{className:"h-3 w-3 ml-auto text-gray-400"})]})]});case"number":return e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"text-xs text-gray-300",children:[u.label," ",u.required&&e.jsx("span",{className:"text-[#F9C04D]",children:"*"})]}),e.jsx("div",{className:"h-8 bg-[#27599F]/20 rounded border border-[#27599F]/30 mt-1"})]});case"rating_scale":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:u.label}),e.jsx("div",{className:"flex gap-1 mt-1",children:u.scale?.map((_,C)=>e.jsx("div",{className:"flex-1 h-6 bg-[#27599F]/20 border border-[#27599F]/30 rounded text-xs flex items-center justify-center text-gray-300",children:_},_))}),u.labels&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:u.labels[0]}),e.jsx("span",{children:u.labels[u.labels.length-1]})]})]});case"checkbox_group":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:u.label}),e.jsxs("div",{className:"space-y-1 mt-1",children:[u.options?.slice(0,3).map((_,C)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 border border-[#27599F]/30 rounded"}),e.jsx("span",{className:"text-xs text-gray-300",children:_})]},C)),u.options&&u.options.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",u.options.length-3," more"]})]})]});case"rating_grid":case"assistance_grid":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:u.label}),e.jsxs("div",{className:"bg-[#27599F]/10 rounded border border-[#27599F]/30 p-2 mt-1",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-1 text-xs",children:[e.jsx("div",{}),u.columns?.slice(0,4).map((_,C)=>e.jsx("div",{className:"text-center text-gray-400 truncate",children:_},C)),Array.isArray(u.rows)&&u.rows.slice(0,2).map((_,C)=>e.jsxs(ft.Fragment,{children:[e.jsx("div",{className:"text-gray-300 truncate",children:_}),u.columns?.slice(0,4).map((w,H)=>e.jsx("div",{className:"h-4 bg-[#27599F]/20 rounded"},H))]},C))]}),Array.isArray(u.rows)&&u.rows.length>2&&e.jsxs("div",{className:"text-xs text-gray-400 text-center mt-1",children:["+",u.rows.length-2," more rows"]})]})]});case"repeating_group":return e.jsxs("div",{className:"mt-1",children:[e.jsx("label",{className:"text-xs text-gray-300",children:u.label}),e.jsxs("div",{className:"bg-[#27599F]/10 rounded border border-[#27599F]/30 p-2 mt-1",children:[e.jsx("div",{className:"space-y-1",children:u.fields?.slice(0,2).map((_,C)=>e.jsxs("div",{className:"text-xs text-gray-300",children:["• ",_.label]},C))}),e.jsxs(z,{variant:"outline",size:"sm",className:"mt-2 h-6 text-xs border-[#219FD9]/30 text-[#219FD9] hover:bg-[#219FD9]/10",children:[e.jsx(Ye,{className:"h-3 w-3 mr-1"}),u.addButtonLabel||"Add Item"]})]})]});default:return null}};return e.jsxs("div",{className:Ne("evaluation-sections-module relative h-full flex flex-col bg-[#153F81] transition-all duration-300 ease-in-out","iplc-shadow-xl border-r-2 border-[#27599F]/30",g?"w-16":"w-80",p&&"fixed top-0 left-0 z-50 h-screen",p&&g&&"-translate-x-full",t),children:[e.jsx("button",{onClick:()=>N(!g),className:Ne("absolute -right-3 top-20 z-50","w-6 h-6 rounded-full bg-gradient-metallic-primary iplc-shadow-md","flex items-center justify-center","hover:iplc-shadow-lg transition-all duration-200","text-white"),"aria-label":g?"Expand sidebar":"Collapse sidebar",children:g?e.jsx(_s,{className:"h-3 w-3"}):e.jsx(Xt,{className:"h-3 w-3"})}),p&&e.jsx("button",{onClick:()=>N(!g),className:Ne("fixed top-4 left-4 z-50","w-10 h-10 rounded-lg bg-gradient-metallic-primary iplc-shadow-md","flex items-center justify-center","hover:iplc-shadow-lg transition-all duration-200",g?"visible":"invisible"),"aria-label":"Open evaluation sections",children:e.jsx(Wa,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:Ne("p-4 border-b border-[#27599F]/30 flex-shrink-0 bg-gradient-to-br from-[#153F81] to-[#27599F]/50",g&&"px-2"),children:[e.jsxs("div",{className:Ne("flex items-center gap-2 mb-2",g&&"justify-center"),children:[e.jsx(qe,{className:"h-5 w-5 text-[#F9C04D] flex-shrink-0"}),!g&&e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Evaluation Sections"})]}),!g&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Comprehensive evaluation modules for clinical assessments"}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx(U,{variant:"outline",className:`text-xs px-2 py-0.5 border ${Lt[n]}`,children:n==="Both"?"All Disciplines":n}),e.jsxs(U,{variant:"outline",className:"text-xs px-2 py-0.5 border border-[#27599F]/30 text-gray-300",children:[P.length," sections"]})]})]})]}),e.jsx("div",{className:Ne("flex-1 overflow-y-auto custom-scrollbar space-y-6",g?"px-2 py-4":"p-4"),children:Object.entries(O).map(([u,_])=>e.jsxs("div",{children:[!g&&e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:u}),e.jsx(U,{variant:"outline",className:`text-xs px-2 py-0.5 border ${_r[u]||"bg-gray-500/20 text-gray-300 border-gray-500/30"}`,children:_.length})]}),e.jsx("div",{className:Ne("space-y-2",g&&"space-y-3"),children:_.map(C=>g?e.jsxs("div",{className:"group relative",children:[e.jsx("button",{className:Ne("w-full p-2 rounded-lg","bg-gradient-to-br from-[#27599F]/30 to-[#153F81]/30","hover:from-[#219FD9]/40 hover:to-[#27599F]/40","border border-[#27599F]/30 hover:border-[#219FD9]/50","iplc-shadow-md hover:iplc-shadow-lg","transition-all duration-200","flex items-center justify-center"),onClick:()=>x(C),title:C.label,children:e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-[#219FD9]/20 to-[#27599F]/20 rounded",children:Ot[C.icon]||e.jsx(qe,{className:"h-4 w-4 text-[#F9C04D]"})})}),e.jsx("div",{className:Ne("absolute left-full ml-2 top-1/2 -translate-y-1/2 z-50","bg-[#153F81] border border-[#27599F]/30 rounded-lg iplc-shadow-xl","px-3 py-2 text-sm text-white","opacity-0 group-hover:opacity-100 pointer-events-none","transition-opacity duration-200","whitespace-nowrap"),children:C.label})]},C.id):e.jsx(Ps,{className:Ne("cursor-pointer transition-all duration-200","bg-gradient-to-br from-[#27599F]/20 to-[#153F81]/20","border border-[#27599F]/30 hover:border-[#219FD9]/50","hover:iplc-shadow-lg","overflow-hidden"),"data-section-id":C.id,onClick:w=>{console.log("EvaluationSectionsModule: Card onClick triggered for",C.label),console.log("Event target:",w.target),console.log("Current target:",w.currentTarget),console.log("Event type:",w.type),console.log("onComponentClick exists:",!!a),console.log("onComponentClick type:",typeof a);const H=w.target;if(H.closest(".grip-handle")||H.closest("button")){console.log("EvaluationSectionsModule: Click on interactive element, ignoring");return}if(w.stopPropagation(),a){const G=y(C);console.log("EvaluationSectionsModule: Calling onComponentClick with component",G),a(G)}else console.error("EvaluationSectionsModule: No onComponentClick handler provided!")},onMouseDown:w=>{console.log("EvaluationSectionsModule: Card onMouseDown triggered for",C.label),console.log("MouseDown target:",w.target)},onPointerDown:w=>{console.log("EvaluationSectionsModule: Card onPointerDown triggered for",C.label),console.log("PointerDown target:",w.target)},children:e.jsx(Ms,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 p-2 bg-gradient-to-br from-[#219FD9]/20 to-[#27599F]/20 rounded-md",children:Ot[C.icon]||e.jsx(qe,{className:"h-4 w-4 text-[#F9C04D]"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"text-sm font-medium text-white truncate",children:C.label}),e.jsx(U,{variant:"outline",className:`text-xs px-2 py-0.5 border ${Lt[C.discipline]}`,children:C.discipline})]}),e.jsx("p",{className:"text-xs text-gray-300 mb-2",children:C.description}),e.jsx(z,{variant:"ghost",size:"sm",className:"h-6 text-xs p-0 hover:bg-[#27599F]/20 text-gray-300",onClick:w=>{w.stopPropagation(),k(C.id)},children:c.has(C.id)?e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"h-3 w-3 mr-1"}),"Hide Fields"]}):e.jsxs(e.Fragment,{children:[e.jsx(_s,{className:"h-3 w-3 mr-1"}),"Preview Fields (",C.fields.length,")"]})}),c.has(C.id)&&e.jsx("div",{className:"mt-3 space-y-2 p-3 bg-[#153F81]/50 rounded-md max-h-60 overflow-y-auto border border-[#27599F]/30",children:C.fields.map((w,H)=>e.jsx("div",{children:E(w)},H))})]}),e.jsx("div",{className:"flex-shrink-0 grip-handle cursor-move p-1 hover:bg-[#27599F]/20 rounded transition-colors duration-200",draggable:!0,onDragStart:w=>{console.log("EvaluationSectionsModule: Grip handle dragStart for",C.label),w.stopPropagation(),F(w,C)},onDragEnd:w=>{console.log("EvaluationSectionsModule: Grip handle dragEnd"),w.stopPropagation()},children:e.jsx(Zt,{className:"h-4 w-4 text-gray-400"})})]})})},C.id))})]},u))}),!g&&e.jsx("div",{className:"p-4 border-t border-[#27599F]/30 bg-gradient-to-br from-[#27599F]/20 to-[#153F81]/20 flex-shrink-0",children:e.jsxs("div",{className:"text-xs text-gray-300",children:[e.jsxs("p",{className:"font-medium mb-2 flex items-center gap-1 text-[#F9C04D]",children:[e.jsx(qt,{className:"h-3 w-3"}),"Usage Tips:"]}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Drag sections to add comprehensive evaluations"}),e.jsx("li",{children:"• Each section includes multiple assessment fields"}),e.jsx("li",{children:"• Fields are customizable via Property Grid"}),e.jsx("li",{children:"• Sections follow clinical best practices"})]})]})})]})},Er=[{id:"assessment-tools",name:"Assessment Tools",icon:"stethoscope",description:"Standardized assessment instruments and evaluation tools",subcategories:[{id:"motor-assessments",name:"Motor & Physical Assessments",components:[{id:"rom-assessment",name:"Range of Motion Assessment",type:"rom_assessment",discipline:"OT",description:"Document joint range of motion measurements",fields:[{name:"joint",type:"select",label:"Joint",options:["Shoulder","Elbow","Wrist","Hip","Knee","Ankle"]},{name:"movement",type:"select",label:"Movement",options:["Flexion","Extension","Abduction","Adduction","Rotation"]},{name:"degrees",type:"number",label:"Degrees"}]},{id:"strength-assessment",name:"Manual Muscle Testing",type:"mmt_assessment",discipline:"OT",description:"Document muscle strength using standard MMT scale",config:{scale:"0-5",includeGravity:!0}},{id:"balance-assessment",name:"Balance Assessment",type:"balance_assessment",discipline:"Both",description:"Evaluate static and dynamic balance",fields:[{name:"testType",type:"select",label:"Test Type",options:["Berg Balance Scale","Tinetti","Single Leg Stance","Functional Reach"]}]}]},{id:"cognitive-assessments",name:"Cognitive & Language Assessments",components:[{id:"moca-assessment",name:"Montreal Cognitive Assessment (MoCA)",type:"moca_assessment",discipline:"Both",description:"Standardized cognitive screening tool"},{id:"mmse-assessment",name:"Mini-Mental State Exam (MMSE)",type:"mmse_assessment",discipline:"Both",description:"Brief cognitive status examination"},{id:"language-assessment",name:"Language Assessment Battery",type:"language_assessment",discipline:"SLP",description:"Comprehensive language evaluation",fields:[{name:"domain",type:"checkbox",label:"Domains Assessed",options:["Expressive Language","Receptive Language","Pragmatics","Reading","Writing"]}]}]}]},{id:"adl-iadl",name:"ADL & IADL Assessments",icon:"home",description:"Activities of Daily Living evaluations",subcategories:[{id:"basic-adl",name:"Basic ADLs",components:[{id:"bathing-assessment",name:"Bathing/Hygiene Assessment",type:"bathing_assessment",discipline:"OT",description:"Evaluate bathing and personal hygiene skills"},{id:"dressing-assessment",name:"Dressing Assessment",type:"dressing_assessment",discipline:"OT",description:"Assess upper and lower body dressing abilities"},{id:"feeding-assessment",name:"Feeding/Eating Assessment",type:"feeding_assessment",discipline:"Both",description:"Evaluate feeding and swallowing function"},{id:"toileting-assessment",name:"Toileting Assessment",type:"toileting_assessment",discipline:"OT",description:"Assess toilet transfer and hygiene"}]},{id:"instrumental-adl",name:"Instrumental ADLs",components:[{id:"cooking-assessment",name:"Meal Preparation Assessment",type:"cooking_assessment",discipline:"OT",description:"Evaluate cooking and kitchen safety skills"},{id:"medication-management",name:"Medication Management",type:"medication_assessment",discipline:"OT",description:"Assess ability to manage medications independently"},{id:"money-management",name:"Financial Management",type:"money_assessment",discipline:"OT",description:"Evaluate money handling and budgeting skills"}]}]},{id:"communication",name:"Communication & Swallowing",icon:"user",description:"Speech, language, and swallowing assessments",subcategories:[{id:"speech-assessments",name:"Speech Production",components:[{id:"articulation-assessment",name:"Articulation Assessment",type:"articulation_assessment",discipline:"SLP",description:"Evaluate speech sound production"},{id:"fluency-assessment",name:"Fluency Assessment",type:"fluency_assessment",discipline:"SLP",description:"Assess stuttering and fluency disorders"},{id:"voice-assessment",name:"Voice Assessment",type:"voice_assessment",discipline:"SLP",description:"Evaluate vocal quality and function"}]},{id:"swallowing-assessments",name:"Swallowing & Dysphagia",components:[{id:"bedside-swallow",name:"Bedside Swallow Evaluation",type:"bedside_swallow",discipline:"SLP",description:"Clinical swallowing assessment"},{id:"oral-motor-exam",name:"Oral Motor Examination",type:"oral_motor_exam",discipline:"SLP",description:"Assess oral motor structure and function"}]}]},{id:"pediatric",name:"Pediatric Assessments",icon:"baby",description:"Child-specific evaluation tools",subcategories:[{id:"developmental",name:"Developmental Assessments",components:[{id:"peabody-assessment",name:"Peabody Developmental Motor Scales",type:"peabody_assessment",discipline:"OT",description:"Assess gross and fine motor development"},{id:"sensory-profile",name:"Sensory Profile",type:"sensory_profile",discipline:"OT",description:"Evaluate sensory processing patterns"},{id:"pls-assessment",name:"Preschool Language Scales",type:"pls_assessment",discipline:"SLP",description:"Comprehensive language assessment for young children"}]},{id:"school-function",name:"School Function",components:[{id:"handwriting-assessment",name:"Handwriting Assessment",type:"handwriting_assessment",discipline:"OT",description:"Evaluate handwriting legibility and speed"},{id:"school-amps",name:"School AMPS",type:"school_amps",discipline:"OT",description:"Assessment of Motor and Process Skills in school"}]}]},{id:"specialized",name:"Specialized Assessments",icon:"brain",description:"Condition-specific evaluation tools",subcategories:[{id:"neurological",name:"Neurological Conditions",components:[{id:"stroke-assessment",name:"Stroke Impact Scale",type:"stroke_assessment",discipline:"Both",description:"Assess stroke recovery across multiple domains"},{id:"aphasia-assessment",name:"Aphasia Assessment",type:"aphasia_assessment",discipline:"SLP",description:"Comprehensive aphasia evaluation"},{id:"apraxia-assessment",name:"Apraxia Battery",type:"apraxia_assessment",discipline:"Both",description:"Assess motor planning and execution"}]},{id:"cognitive-communication",name:"Cognitive-Communication",components:[{id:"rbans-assessment",name:"RBANS",type:"rbans_assessment",discipline:"SLP",description:"Repeatable Battery for Assessment of Neuropsychological Status"},{id:"executive-function",name:"Executive Function Assessment",type:"executive_assessment",discipline:"Both",description:"Evaluate planning, organization, and problem-solving"}]}]}],Dr={categories:Er},Tr={activity:e.jsx(tn,{className:"h-4 w-4"}),brain:e.jsx(Vt,{className:"h-4 w-4"}),heart:e.jsx(Fn,{className:"h-4 w-4"}),stethoscope:e.jsx(zn,{className:"h-4 w-4"}),user:e.jsx(Ya,{className:"h-4 w-4"}),filetext:e.jsx(qe,{className:"h-4 w-4"}),calendar:e.jsx(ks,{className:"h-4 w-4"}),clock:e.jsx(Yt,{className:"h-4 w-4"}),pill:e.jsx(In,{className:"h-4 w-4"}),testtube:e.jsx(Xn,{className:"h-4 w-4"}),eye:e.jsx(Ss,{className:"h-4 w-4"}),ear:e.jsx(bn,{className:"h-4 w-4"}),hand:e.jsx(Qt,{className:"h-4 w-4"}),footprints:e.jsx(jn,{className:"h-4 w-4"}),users:e.jsx(Gt,{className:"h-4 w-4"}),baby:e.jsx(ln,{className:"h-4 w-4"}),userplus:e.jsx(Jn,{className:"h-4 w-4"}),briefcase:e.jsx(mn,{className:"h-4 w-4"}),home:e.jsx(Pn,{className:"h-4 w-4"}),car:e.jsx(un,{className:"h-4 w-4"}),utensils:e.jsx(Qn,{className:"h-4 w-4"}),bath:e.jsx(cn,{className:"h-4 w-4"}),shirt:e.jsx($n,{className:"h-4 w-4"}),bookopen:e.jsx(Ha,{className:"h-4 w-4"}),gamepad:e.jsx(wn,{className:"h-4 w-4"})};function Fr({onComponentDrag:t,onComponentClick:s,selectedDiscipline:a="Both"}){const[n,r]=b.useState(""),[i,c]=b.useState("all"),[o,d]=b.useState(new Set),[m,p]=b.useState(a),h=Dr.categories.map(x=>({id:x.id,name:x.name,description:x.description,icon:Tr[x.icon]||e.jsx(Qs,{className:"h-4 w-4"}),subcategories:x.subcategories.map(k=>({id:k.id,name:k.name,components:k.components.map(P=>({id:P.id,name:P.name,type:P.type,discipline:P.discipline,description:P.description,fields:P.fields,config:P.config??{}}))}))})),g=x=>x.filter(k=>{const P=n===""||k.name.toLowerCase().includes(n.toLowerCase())||k.description?.toLowerCase().includes(n.toLowerCase()),O=m==="Both"||k.discipline==="Both"||k.discipline===m;return P&&O}),N=i==="all"?h:h.filter(x=>x.id===i),v=x=>{const k=new Set(o);k.has(x)?k.delete(x):k.add(x),d(k)},y=x=>{const k=x.config??{},P={id:`${x.type}_${Date.now()}`,type:"clinical_component",label:x.name,order:0,props:{componentType:x.type,discipline:x.discipline,...k},fields:x.fields};s(P)},F=(x,k)=>{const P=k.config??{},O={id:`${k.type}_${Date.now()}`,type:"clinical_component",label:k.name,order:0,props:{componentType:k.type,discipline:k.discipline,...P},fields:k.fields};x.dataTransfer.effectAllowed="copy",t(O)};return b.useEffect(()=>{if(n){const x=new Set;h.forEach(k=>{k.subcategories.forEach(P=>{g(P.components).length>0&&x.add(k.id)})}),d(x)}},[n]),e.jsxs("div",{className:"h-full flex flex-col p-4 bg-gradient-to-br from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[e.jsx(Qs,{className:"h-5 w-5 text-blue-600"}),"Clinical Components"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Specialized components for clinical assessments and documentation"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(R,{placeholder:"Search clinical components...",value:n,onChange:x=>r(x.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(le,{value:m,onValueChange:x=>p(x),children:[e.jsx(oe,{className:"w-[140px]",children:e.jsx(ce,{})}),e.jsxs(de,{children:[e.jsx(I,{value:"Both",children:"All Disciplines"}),e.jsx(I,{value:"OT",children:"OT Only"}),e.jsx(I,{value:"SLP",children:"SLP Only"})]})]}),e.jsxs(le,{value:i,onValueChange:c,children:[e.jsx(oe,{className:"flex-1",children:e.jsx(ce,{placeholder:"All Categories"})}),e.jsxs(de,{children:[e.jsx(I,{value:"all",children:"All Categories"}),h.map(x=>e.jsx(I,{value:x.id,children:x.name},x.id))]})]})]})]})]}),e.jsx(Va,{className:"flex-1",children:e.jsx("div",{className:"space-y-4",children:N.map(x=>{const k=o.has(x.id);return!x.subcategories.some(O=>g(O.components).length>0)&&n?null:e.jsxs(Ps,{className:"border-l-4 border-l-blue-500",children:[e.jsxs(at,{className:"cursor-pointer pb-3",onClick:()=>v(x.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[x.icon,e.jsx(nt,{className:"text-base",children:x.name})]}),e.jsx(_s,{className:`h-4 w-4 transition-transform ${k?"rotate-90":""}`})]}),e.jsx(It,{className:"text-xs mt-1",children:x.description})]}),k&&e.jsx(Ms,{className:"pt-0",children:x.subcategories.map(O=>{const E=g(O.components);return E.length===0?null:e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:O.name}),e.jsx("div",{className:"grid gap-2",children:E.map(u=>e.jsxs("div",{draggable:!0,onDragStart:_=>F(_,u),onClick:()=>y(u),className:"group relative p-3 bg-white border rounded-lg cursor-move hover:shadow-md hover:border-blue-300 transition-all duration-150",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:u.name}),e.jsx(U,{variant:u.discipline==="OT"?"default":u.discipline==="SLP"?"secondary":"outline",className:"text-xs",children:u.discipline})]}),u.description&&e.jsx("p",{className:"text-xs text-gray-600",children:u.description})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none"})]},u.id))})]},O.id)})})]},x.id)})})}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Tip:"})," Drag components to the form canvas or click to add them. Use the discipline filter to show components specific to OT or SLP."]})})]})}function Ar({component:t,allComponents:s,onUpdate:a}){const n=s.filter(h=>h.id!==t.id&&!["title_subtitle","line_separator","evaluation_section","ai_summary"].includes(h.type)),r=t.props?.visibilityCondition?{field:t.props.visibilityCondition.field??"",operator:t.props.visibilityCondition.operator??"equals",value:String(t.props.visibilityCondition.value??"")}:void 0,i=!!r,c=h=>{if(h)a({props:{...t.props,visibilityCondition:{field:n[0]?.id||"",operator:"equals",value:""}}});else{const{visibilityCondition:g,...N}=t.props||{};a({props:N})}},o=h=>{a({props:{...t.props,visibilityCondition:{...r,field:h,value:""}}})},d=h=>{a({props:{...t.props,visibilityCondition:{...r,operator:h}}})},m=h=>{a({props:{...t.props,visibilityCondition:{...r,value:h}}})},p=n.find(h=>h.id===r?.field);return e.jsxs(Ps,{className:"border-0 shadow-none",children:[e.jsx(at,{className:"px-0 pt-0 pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sn,{className:"h-4 w-4 text-blue-600"}),e.jsx(nt,{className:"text-sm font-medium",children:"Conditional Logic"})]}),e.jsx(bs,{checked:i,onCheckedChange:c})]})}),i&&e.jsxs(Ms,{className:"px-0 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ze,{className:"text-xs",children:"Show this field when:"}),e.jsx("div",{className:"space-y-2",children:e.jsxs(le,{value:r.field,onValueChange:o,children:[e.jsx(oe,{className:"h-9",children:e.jsx(ce,{placeholder:"Select a field"})}),e.jsx(de,{children:n.map(h=>e.jsx(I,{value:h.id,children:h.label||h.id},h.id))})]})}),e.jsx("div",{className:"space-y-2",children:e.jsxs(le,{value:r?.operator??"equals",onValueChange:h=>d(h),children:[e.jsx(oe,{className:"h-9",children:e.jsx(ce,{placeholder:"Select operator"})}),e.jsxs(de,{children:[e.jsx(I,{value:"equals",children:"Equals"}),e.jsx(I,{value:"not_equals",children:"Does not equal"}),e.jsx(I,{value:"contains",children:"Contains"}),e.jsx(I,{value:"greater_than",children:"Greater than"}),e.jsx(I,{value:"less_than",children:"Less than"})]})]})}),e.jsx("div",{className:"space-y-2",children:p?.type==="select"||p?.type==="radio"?e.jsxs(le,{value:r?.value??"",onValueChange:m,children:[e.jsx(oe,{className:"h-9",children:e.jsx(ce,{placeholder:"Select value"})}),e.jsx(de,{children:p.props?.options?.map(h=>e.jsx(I,{value:h,children:h},h))})]}):p?.type==="checkbox"?e.jsxs(le,{value:r?.value??"",onValueChange:m,children:[e.jsx(oe,{className:"h-9",children:e.jsx(ce,{placeholder:"Select state"})}),e.jsxs(de,{children:[e.jsx(I,{value:"true",children:"Checked"}),e.jsx(I,{value:"false",children:"Unchecked"})]})]}):e.jsx(R,{value:r?.value??"",onChange:h=>m(h.target.value),placeholder:p?.type==="number"?"Enter number":p?.type==="date"?"YYYY-MM-DD":"Enter value",type:p?.type==="number"?"number":"text",className:"h-9"})})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"Preview:"})," Show when"," ",e.jsx("span",{className:"font-mono bg-blue-100 px-1 rounded",children:p?.label||"field"})," ",(r?.operator??"equals")==="equals"&&"equals",(r?.operator??"equals")==="not_equals"&&"does not equal",(r?.operator??"equals")==="contains"&&"contains",(r?.operator??"equals")==="greater_than"&&"is greater than",(r?.operator??"equals")==="less_than"&&"is less than"," ",e.jsx("span",{className:"font-mono bg-blue-100 px-1 rounded",children:(r?.value??"")||"..."})]})})]})]})}const Pr=async(t,s,a)=>{const n=new URL(`${t}/api/form-templates`);a&&Object.entries(a).forEach(([i,c])=>{c!=null&&(Array.isArray(c)?c.forEach(o=>n.searchParams.append(i,o.toString())):n.searchParams.append(i,c.toString()))});const r=await fetch(n.toString(),{headers:{Authorization:`Bearer ${s}`}});if(r.ok){const i=await r.json();return{templates:i.templates,success:!0,total:i.total||i.templates.length,hasMore:i.hasMore||!1}}else return console.error("Failed to fetch form templates"),{templates:[],success:!1,total:0,hasMore:!1}},Mr=async(t,s,a)=>{const n=await fetch(`${t}/api/form-templates`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(a)});return n.ok?{template:(await n.json()).template,success:!0}:(console.error("Failed to create form template"),{template:null,success:!1})},Or=async(t,s,a,n)=>{const r=await fetch(`${s}/api/form-templates/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(n)});return r.ok?{template:(await r.json()).template,success:!0}:(console.error("Failed to update form template"),{template:null,success:!1})};function Lr(t,s){let a=null,n=null,r=null;const i=function(...c){n=c,r=this;const o=()=>{a=null,n&&t.apply(r,n)};a&&clearTimeout(a),a=setTimeout(o,s)};return i.cancel=()=>{a&&(clearTimeout(a),a=null),n=null,r=null},i.flush=()=>{a&&n&&(clearTimeout(a),t.apply(r,n),a=null,n=null,r=null)},i}function Ir({sessionId:t,formId:s,userId:a,userName:n,onSaveSuccess:r,onSaveError:i,debounceMs:c=2e3}){const[o,d]=b.useState({saving:!1,lastSaved:null,error:null}),m=b.useRef(null),p=b.useCallback(async g=>{m.current&&m.current.abort(),m.current=new AbortController,d(N=>({...N,saving:!0,error:null}));try{const N=await fetch("/api/form-sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:t,formData:g,templateId:parseInt(s,10),userName:n,timestamp:new Date().toISOString()}),signal:m.current.signal});if(!N.ok){const y=await N.text();let F=`Save failed: ${N.statusText}`;try{const x=JSON.parse(y);x.error&&(F=`Save failed: ${x.error}`),x.details&&(F+=` - ${x.details}`)}catch{y&&(F=`Save failed: ${y}`)}throw new Error(F)}const v=await N.json();return d({saving:!1,lastSaved:new Date,error:null}),r?.(),v}catch(N){if(N.name==="AbortError")return;const v=N instanceof Error?N:new Error(String(N));d(y=>({...y,saving:!1,error:v})),i?.(v);try{await Br(t,{formId:s,userId:a,userName:n,data:g,lastSaved:new Date().toISOString()})}catch(y){console.error("Failed to save to IndexedDB:",y)}}},[t,s,a,n,r,i]),h=b.useRef(Lr(p,c)).current;return b.useEffect(()=>()=>{m.current&&m.current.abort(),h.cancel()},[h]),b.useEffect(()=>{(async()=>{try{const N=await fetch(`/api/form-sessions?sessionId=${t}`);if(N.ok)return await N.json()}catch(N){console.error("Failed to load session:",N)}try{return await $r(t)}catch(N){console.error("Failed to load from IndexedDB:",N)}return null})()},[t]),{save:h,status:o,deleteSession:async()=>{try{await fetch(`/api/form-sessions?sessionId=${t}`,{method:"DELETE"}),await Rr(t)}catch(g){console.error("Failed to delete session:",g)}}}}async function mt(){return new Promise((t,s)=>{const a=indexedDB.open("FormAutosave",1);a.onerror=()=>s(a.error),a.onsuccess=()=>t(a.result),a.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains("sessions")||r.createObjectStore("sessions",{keyPath:"sessionId"})}})}async function Br(t,s){const r=(await mt()).transaction(["sessions"],"readwrite").objectStore("sessions");return new Promise((i,c)=>{const o=r.put({sessionId:t,...s,savedAt:new Date().toISOString()});o.onsuccess=()=>i(),o.onerror=()=>c(o.error)})}async function $r(t){const n=(await mt()).transaction(["sessions"],"readonly").objectStore("sessions");return new Promise((r,i)=>{const c=n.get(t);c.onsuccess=()=>r(c.result),c.onerror=()=>i(c.error)})}async function Rr(t){const n=(await mt()).transaction(["sessions"],"readwrite").objectStore("sessions");return new Promise((r,i)=>{const c=n.delete(t);c.onsuccess=()=>r(),c.onerror=()=>i(c.error)})}function qr({formId:t,userId:s,userName:a,onLockAcquired:n,onLockFailed:r,onLockReleased:i,refreshInterval:c=6e4}){const[o,d]=b.useState({isLocked:!1,lockedBy:null,lockHash:null,canTakeover:!1,loading:!0,error:null}),m=b.useRef(null),p=b.useRef(null),h=b.useCallback(async()=>{try{const y=await fetch(`/api/form-locks?formId=${t}`),F=await y.json();if(y.ok)return d(x=>({...x,isLocked:F.locked,lockedBy:F.lockedBy||null,canTakeover:F.canTakeover||!1,loading:!1,error:null})),F.locked;throw new Error(F.error||"Failed to check lock status")}catch(y){return d(F=>({...F,loading:!1,error:y instanceof Error?y:new Error("Unknown error")})),!1}},[t]),g=b.useCallback(async(y=!1)=>{d(F=>({...F,loading:!0,error:null}));try{const F=await fetch("/api/form-locks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,userId:s,userName:a,forceTakeover:y})}),x=await F.json();if(F.ok&&x.lockHash)p.current=x.lockHash,d({isLocked:!0,lockedBy:a,lockHash:x.lockHash,canTakeover:!1,loading:!1,error:null}),n?.(),m.current&&clearInterval(m.current),m.current=setInterval(()=>{N()},c);else if(F.status===423)d({isLocked:!0,lockedBy:x.lockedBy||"Unknown user",lockHash:null,canTakeover:x.canTakeover||!1,loading:!1,error:null}),r?.(x.lockedBy||"Unknown user");else throw new Error(x.error||"Failed to acquire lock")}catch(F){d(x=>({...x,loading:!1,error:F instanceof Error?F:new Error("Unknown error")}))}},[t,s,a,n,r,c]),N=b.useCallback(async()=>{if(p.current)try{await fetch("/api/form-locks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,userId:s,userName:a,forceTakeover:!1})})}catch(y){console.error("Failed to refresh lock:",y)}},[t,s,a]),v=b.useCallback(async()=>{if(p.current)try{(await fetch("/api/form-locks",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,lockHash:p.current})})).ok&&(p.current=null,d({isLocked:!1,lockedBy:null,lockHash:null,canTakeover:!1,loading:!1,error:null}),i?.(),m.current&&(clearInterval(m.current),m.current=null))}catch(y){console.error("Failed to release lock:",y)}},[t,i]);return b.useEffect(()=>((async()=>{await h()||await g()})(),()=>{p.current&&v(),m.current&&clearInterval(m.current)}),[]),b.useEffect(()=>{const y=()=>{p.current&&fetch("/api/form-locks",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,lockHash:p.current}),keepalive:!0}).catch(()=>{})};return window.addEventListener("beforeunload",y),window.addEventListener("unload",y),()=>{window.removeEventListener("beforeunload",y),window.removeEventListener("unload",y)}},[t]),{status:o,acquireLock:g,releaseLock:v,refreshLock:N,checkLockStatus:h}}function zr({formId:t,formName:s,formDescription:a,components:n,isOpen:r=!1,onClose:i}){const[c,o]=b.useState(null),[d,m]=b.useState(!1),[p,h]=b.useState(null),[g,N]=b.useState(null),[v,y]=b.useState(new Set);b.useEffect(()=>{r&&t!=="new"&&F()},[r,t]);const F=async()=>{try{const E=await fetch(`/api/form-summary?formId=${t}`),u=await E.json();E.ok&&u.summary&&(o(u.summary),N(u.updatedAt?new Date(u.updatedAt):null))}catch(E){console.error("Failed to fetch summary:",E)}},x=async()=>{if(v.size===0){h("Please select at least one form component to generate a summary");return}m(!0),h(null);try{const E=n.filter(C=>v.has(C.id)),u=await fetch("/api/form-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:t,formData:{name:s,description:a,components:E}})}),_=await u.json();if(u.ok&&_.summary)o(_.summary),N(_.generatedAt?new Date(_.generatedAt):new Date);else throw new Error(_.error||"Failed to generate summary")}catch(E){h(E instanceof Error?E.message:"Failed to generate summary")}finally{m(!1)}},k=E=>{y(u=>{const _=new Set(u);return _.has(E)?_.delete(E):_.add(E),_})},P=()=>{y(new Set(n.map(E=>E.id)))},O=()=>{y(new Set)};return r?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs(Ps,{className:"w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[e.jsxs(at,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5"}),e.jsx(nt,{children:"Form Summary"})]}),e.jsx(z,{variant:"ghost",size:"sm",onClick:i,children:"✕"})]}),e.jsx(It,{children:"AI-generated overview"})]}),e.jsxs(Ms,{className:"overflow-y-auto max-h-[60vh]",children:[p&&e.jsx(Wt,{variant:"destructive",className:"mb-4",children:e.jsx(Ut,{children:p})}),!c&&!d&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx(qe,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Select form components to include in the AI summary"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between pb-2 border-b",children:[e.jsx("h4",{className:"font-medium",children:"Form Components"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(z,{variant:"ghost",size:"sm",onClick:P,children:"Select All"}),e.jsx(z,{variant:"ghost",size:"sm",onClick:O,children:"Deselect All"})]})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:n.map(E=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[e.jsx(it,{id:E.id,checked:v.has(E.id),onCheckedChange:()=>k(E.id)}),e.jsxs("label",{htmlFor:E.id,className:"flex-1 cursor-pointer text-sm",children:[e.jsx("div",{className:"font-medium",children:E.label||`${E.type} field`}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["Type: ",E.type,E.props?.required&&" • Required"]})]})]},E.id))}),e.jsx("div",{className:"pt-4 flex justify-center",children:e.jsxs(z,{onClick:x,disabled:v.size===0,children:["Generate Summary (",v.size," selected)"]})})]})]}),d&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Jt,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-2",children:"Generating summary..."})]}),c&&!d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"prose prose-sm max-w-none",children:c.split(`
`).map((E,u)=>E.startsWith("###")?e.jsx("h3",{className:"text-base font-semibold mt-4 mb-2",children:E.replace(/^###\s*/,"")},u):E.startsWith("**")&&E.endsWith("**")?e.jsx("p",{className:"font-semibold mb-2",children:E.replace(/\*\*/g,"")},u):E.startsWith("-")?e.jsx("li",{className:"ml-4 mb-1",children:E.replace(/^-\s*/,"")},u):E.trim()===""?e.jsx("br",{},u):e.jsx("p",{className:"mb-2",children:E},u))}),e.jsxs("div",{className:"mt-6 pt-4 border-t flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:g&&e.jsxs(e.Fragment,{children:["Last updated: ",g.toLocaleString()]})}),e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>{o(null),h(null)},disabled:d,children:[e.jsx(za,{className:"h-4 w-4 mr-2"}),"Regenerate"]})]})]})]})]})}):null}const Vr=Aa({name:Ee().min(2,"Name must be at least 2 characters"),description:Ee().optional(),category:Ee().min(1,"Category is required"),subcategory:Ee().optional(),clinical_context:Ee().min(2,"Clinical context is required"),tags:Ee().optional(),targetAudience:Oa(Ee()).optional(),estimatedCompletionTime:Ma().min(1).max(180).optional(),showIplcLogo:Nt(),logoPosition:Pa(["top-left","top-right","top-center"]),primaryColor:Ee().optional(),fontFamily:Ee().optional(),isPublic:Nt()});function Oi({apiToken:t="",template:s,onSave:a,mode:n="create"}){const[r,i]=b.useState(s?.schema?.isMultiPage||!1),[c,o]=b.useState(()=>s?.schema?.pages&&s.schema.pages.length>0?s.schema.pages:[{id:"page_1",title:"Page 1",description:"",order:0,components:s?.schema?.components||[]}]),[d,m]=b.useState(c[0]?.id||"page_1"),h=c.find(l=>l.id===d)?.components||[],g=b.useCallback(l=>{o(j=>j.map(S=>S.id===d?{...S,components:l}:S))},[d]),[N,v]=b.useState(!1),[y,F]=b.useState(!1),[x,k]=b.useState(!1),[P,O]=b.useState(null),[E,u]=b.useState(null),[_,C]=b.useState("components"),[w,H]=b.useState(null),[G,Se]=b.useState([]),[xe,ye]=b.useState(!1),[me,he]=b.useState(""),[ge,_e]=b.useState(""),[ke,cs]=b.useState([]),[Ae,ds]=b.useState("grid"),[Ls,ua]=b.useState("updated_at"),[ms,pa]=b.useState("desc"),Is=b.useRef(null),ht=b.useRef(null),xa=b.useCallback(()=>{const l=`page_${Date.now()}`,j={id:l,title:`Page ${c.length+1}`,description:"",order:c.length,components:[]};o([...c,j]),m(l)},[c]),ga=b.useCallback(l=>{if(c.length<=1)return;const j=c.findIndex(M=>M.id===l),S=c.filter(M=>M.id!==l);if(S.forEach((M,je)=>{M.order=je}),o(S),l===d){const M=Math.max(0,j-1);m(S[M].id)}},[c,d]);b.useCallback((l,j)=>{o(S=>S.map(M=>M.id===l?{...M,title:j}:M))},[]),b.useCallback((l,j)=>{o(S=>S.map(M=>M.id===l?{...M,description:j}:M))},[]),b.useCallback((l,j)=>{const S=[...c],[M]=S.splice(l,1);S.splice(j,0,M),S.forEach((je,Je)=>{je.order=Je}),o(S)},[c]);const fa=b.useMemo(()=>s?.id?`form_${s.id}_${Date.now()}`:`form_new_${Date.now()}`,[s?.id]),ut="1",Bs="User",{status:hs,acquireLock:va}=qr({formId:s?.id?.toString()||"new",userId:ut,userName:Bs,onLockAcquired:()=>{console.log("Form lock acquired")},onLockFailed:l=>{console.log(`Form is locked by ${l}`)}}),[Yr,Xr]=b.useState(!1),[ba,ya]=b.useState(!1),{save:Ue,status:us,deleteSession:ja}=Ir({sessionId:fa,formId:s?.id?.toString()||"new",userId:ut,userName:Bs,onSaveSuccess:()=>{console.log("Autosave successful")},onSaveError:l=>{console.error("Autosave failed:",l)}});b.useEffect(()=>{r&&c.length>0?Ue({components:[],pages:c,isMultiPage:!0,metadata:{name:B.getValues("name"),description:B.getValues("description"),category:B.getValues("category"),clinical_context:B.getValues("clinical_context"),showIplcLogo:B.getValues("showIplcLogo")}}):!r&&h.length>0&&Ue({components:h,pages:[],isMultiPage:!1,metadata:{name:B.getValues("name"),description:B.getValues("description"),category:B.getValues("category"),clinical_context:B.getValues("clinical_context"),showIplcLogo:B.getValues("showIplcLogo")}})},[h,c,r,Ue]),b.useEffect(()=>{if(!(!Is.current||N))return ht.current=T.create(Is.current,{group:{name:"form-components",put:!0},animation:150,handle:".drag-handle",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",onEnd:l=>{l.oldIndex!==void 0&&l.newIndex!==void 0&&Ca(l.oldIndex,l.newIndex)},forceFallback:!0,fallbackTolerance:3,fallbackOnBody:!0,swapThreshold:.65,delayOnTouchOnly:!0,touchStartThreshold:5}),()=>{ht.current?.destroy()}},[N]),b.useEffect(()=>{if(typeof window>"u")return;const l=S=>{const M=S.target;M&&(M.tagName==="INPUT"||M.tagName==="TEXTAREA")&&setTimeout(()=>{M.scrollIntoView({behavior:"smooth",block:"center"})},300)},j=()=>{if(window.visualViewport){const S=window.visualViewport;document.documentElement.style.setProperty("--viewport-height",`${S.height}px`)}};return document.addEventListener("focusin",l),window.visualViewport?.addEventListener("resize",j),()=>{document.removeEventListener("focusin",l),window.visualViewport?.removeEventListener("resize",j)}},[]);const B=La({resolver:Ia(Vr),defaultValues:{name:s?.name||"",description:s?.description||"",category:s?.category||"",subcategory:s?.metadata?.subcategory||"",clinical_context:s?.clinical_context||"",tags:s?.metadata?.tags?.join(", ")||"",targetAudience:s?.metadata?.targetAudience||[],estimatedCompletionTime:s?.metadata?.estimatedCompletionTime||15,showIplcLogo:s?.metadata?.showIplcLogo??!0,logoPosition:s?.metadata?.logoPosition||"top-left",primaryColor:s?.metadata?.customStyling?.primaryColor||"#007bff",fontFamily:s?.metadata?.customStyling?.fontFamily||"system",isPublic:s?.metadata?.isPublic??!1}});b.useEffect(()=>{const l=B.watch(j=>{h.length>0&&Ue({components:h,metadata:j})});return()=>l.unsubscribe()},[B,h,Ue]);const ps=b.useCallback((l,j)=>{console.log("FormBuilder: addComponent called with",l),console.log("Component type:",l.type),console.log("Component sectionId:",l.sectionId);const S=[...h],M=j!==void 0?j:S.length,je={...l,id:l.id||`${l.type}_${Date.now()}`,order:M};S.splice(M,0,je),S.forEach((Je,Ta)=>{Je.order=Ta}),console.log("FormBuilder: setting components to",S),console.log("New components array length:",S.length),g(S)},[h]),pt=b.useCallback((l,j)=>{l.preventDefault(),P&&(ps(P,j),O(null),u(null))},[P,ps]),$s=b.useCallback(l=>{console.log("FormBuilder: handleComponentClick called with",l),ps(l)},[ps]),Na=b.useCallback((l,j)=>{l.preventDefault(),u(j)},[]),wa=b.useCallback(()=>{u(null)},[]),Ca=b.useCallback((l,j)=>{const S=[...h],[M]=S.splice(l,1);S.splice(j,0,M),S.forEach((je,Je)=>{je.order=Je}),g(S)},[h]),Sa=b.useCallback(l=>{const j=h.filter((S,M)=>M!==l);j.forEach((S,M)=>{S.order=M}),g(j)},[h]),xt=b.useCallback((l,j)=>{const S=[...h];S[l]={...S[l],...j},g(S)},[h]),gt=b.useCallback(async()=>{ye(!0);try{const l=new URL(window.location.href),j={search:me||void 0,category:ge||void 0,tags:ke.length>0?ke:void 0,sort_by:Ls,sort_order:ms,status:"active",limit:50},S=await Pr(l.origin,t,j);S.success&&Se(S.templates)}catch(l){console.error("Failed to load templates:",l)}finally{ye(!1)}},[t,me,ge,ke,Ls,ms]);b.useEffect(()=>{x&&gt()},[x,gt]);const _a=l=>{l.schema&&(l.schema.isMultiPage&&l.schema.pages?(i(!0),o(l.schema.pages),m(l.schema.pages[0]?.id||"page_1")):l.schema.components&&(i(!1),o([{id:"page_1",title:"Page 1",description:"",order:0,components:l.schema.components}]),m("page_1")),B.reset({name:l.name,description:l.description||"",category:l.category||"",subcategory:l.metadata?.subcategory||"",clinical_context:l.clinical_context||"",tags:l.metadata?.tags?.join(", ")||"",targetAudience:l.metadata?.targetAudience||[],estimatedCompletionTime:l.metadata?.estimatedCompletionTime||15,showIplcLogo:l.metadata?.showIplcLogo??!0,logoPosition:l.metadata?.logoPosition||"top-left",primaryColor:l.metadata?.customStyling?.primaryColor||"#007bff",fontFamily:l.metadata?.customStyling?.fontFamily||"system",isPublic:l.metadata?.isPublic??!1}),k(!1))},ka=b.useMemo(()=>{const l=new Set(G.map(j=>j.category));return Array.from(l).filter(Boolean)},[G]),Ea=b.useMemo(()=>{const l=new Set;return G.forEach(j=>{(j.metadata?.tags||[]).forEach(M=>l.add(M))}),Array.from(l)},[G]),Da=async l=>{try{const j=new URL(window.location.href),S={name:l.name,description:l.description,category:l.category,clinical_context:l.clinical_context,schema:{components:r?[]:h,pages:r?c:[],isMultiPage:r},metadata:{...s?.metadata,showIplcLogo:l.showIplcLogo},status:s?.status||"draft",version:s?s.version+1:1,created_by:1,updated_by:1};let M;if(s&&s.id){const je=typeof s.id=="string"?parseInt(s.id,10):Number(s.id);if(!isNaN(je))M=await Or(Number(je),j.origin,t,S);else throw new Error("Invalid template ID")}else M=await Mr(j.origin,t,S);M.success&&M.template&&(await ja(),a&&a(M.template)),F(!1)}catch(j){console.error("Error saving form template:",j)}};return e.jsxs("div",{className:"form-builder-container flex h-screen bg-background",children:[e.jsx("div",{className:"relative flex-shrink-0 transition-all duration-300 ease-in-out",children:e.jsxs(Rs,{value:_,onValueChange:l=>C(l),className:"h-full flex flex-col",children:[e.jsxs(qs,{className:"grid w-full grid-cols-3 bg-gradient-metallic-primary",children:[e.jsxs(Pe,{value:"components",className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"h-4 w-4"}),"Components"]}),e.jsxs(Pe,{value:"evaluation",className:"flex items-center gap-2",children:[e.jsx(Za,{className:"h-4 w-4"}),"Evaluation"]}),e.jsxs(Pe,{value:"clinical",className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),"Clinical"]})]}),e.jsx(Ie,{value:"components",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(Ra,{onComponentDrag:O,onComponentClick:$s})}),e.jsx(Ie,{value:"evaluation",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(kr,{onSectionDrag:O,onComponentClick:$s})}),e.jsx(Ie,{value:"clinical",className:"flex-1 mt-0 overflow-hidden",children:e.jsx(Fr,{onComponentDrag:O,onComponentClick:$s,selectedDiscipline:"Both"})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[hs.isLocked&&hs.lockedBy!==Bs&&e.jsxs(Wt,{className:"m-4 border-yellow-500 bg-yellow-50",children:[e.jsx(Ja,{className:"h-4 w-4"}),e.jsxs(Ut,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"h-4 w-4"}),e.jsxs("span",{children:["This form is currently being edited by ",e.jsx("strong",{children:hs.lockedBy}),"."]})]}),hs.canTakeover&&e.jsx(z,{variant:"outline",size:"sm",onClick:()=>va(!0),children:"Take Over"})]})]}),e.jsxs("div",{className:"border-b bg-card",children:[r&&e.jsxs("div",{className:"border-b px-4 pt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Form Pages"}),e.jsxs(U,{variant:"secondary",className:"text-xs",children:[c.length," ",c.length===1?"page":"pages"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{variant:"ghost",size:"sm",onClick:xa,className:"h-7 text-xs",children:[e.jsx(Ye,{className:"h-3 w-3 mr-1"}),"Add Page"]}),e.jsx(bs,{checked:r,onCheckedChange:l=>{if(i(l),!l){const j=c.flatMap(S=>S.components);o([{id:"page_1",title:"Page 1",description:"",order:0,components:j}]),m("page_1")}}})]})]}),e.jsx(Rs,{value:d,onValueChange:m,children:e.jsx(qs,{className:"h-auto p-0 bg-transparent",children:c.map((l,j)=>e.jsx(Pe,{value:l.id,className:"relative data-[state=active]:bg-white data-[state=active]:shadow-sm rounded-t-lg border border-b-0 data-[state=active]:border-gray-200 data-[state=inactive]:border-transparent data-[state=inactive]:bg-transparent px-4 py-2 mr-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:l.title}),e.jsx(U,{variant:"outline",className:"text-xs",children:l.components.length}),c.length>1&&e.jsx(z,{variant:"ghost",size:"icon",className:"h-4 w-4 ml-1 opacity-0 hover:opacity-100 transition-opacity",onClick:S=>{S.stopPropagation(),ga(l.id)},children:e.jsx(wt,{className:"h-3 w-3"})})]})},l.id))})})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:s?`Edit: ${s.name}`:"New Form Template"}),!r&&e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"text-xs",children:[e.jsx(Ye,{className:"h-3 w-3 mr-1"}),"Convert to Multi-Page"]}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:us.saving?e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"h-4 w-4 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Saving..."})]}):us.lastSaved?e.jsxs(e.Fragment,{children:[e.jsx(fn,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-muted-foreground",children:["Saved ",new Date(us.lastSaved).toLocaleTimeString()]})]}):us.error?e.jsxs(e.Fragment,{children:[e.jsx(xn,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-red-600",children:"Save failed"})]}):null})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>k(!0),children:[e.jsx(Xa,{className:"mr-2 h-4 w-4"}),"Load Template"]}),e.jsxs(z,{variant:"outline",size:"sm",onClick:()=>v(!N),children:[e.jsx(Ss,{className:"mr-2 h-4 w-4"}),N?"Edit":"Preview"]}),e.jsxs(vt,{open:y,onOpenChange:F,children:[e.jsx(Fa,{asChild:!0,children:e.jsxs(z,{variant:"outline",size:"sm",children:[e.jsx(en,{className:"mr-2 h-4 w-4"}),"Settings"]})}),e.jsxs(bt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(yt,{children:e.jsx(jt,{children:"Save Template"})}),e.jsx(Ba,{...B,children:e.jsxs("form",{onSubmit:B.handleSubmit(Da),className:"space-y-6",children:[e.jsxs(Rs,{defaultValue:"basic",className:"w-full",children:[e.jsxs(qs,{className:"grid w-full grid-cols-4",children:[e.jsx(Pe,{value:"basic",children:"Basic Info"}),e.jsx(Pe,{value:"metadata",children:"Metadata"}),e.jsx(Pe,{value:"styling",children:"Styling"}),e.jsx(Pe,{value:"sharing",children:"Sharing"})]}),e.jsxs(Ie,{value:"basic",className:"space-y-4 mt-6",children:[e.jsx(te,{control:B.control,name:"name",render:({field:l})=>e.jsxs(ae,{children:[e.jsx(ne,{children:"Template Name"}),e.jsx(ue,{children:e.jsx(R,{placeholder:"Enter template name",...l})}),e.jsx(fe,{})]})}),e.jsx(te,{control:B.control,name:"description",render:({field:l})=>e.jsxs(ae,{children:[e.jsx(ne,{children:"Description"}),e.jsx(ue,{children:e.jsx(is,{placeholder:"Enter template description",...l})}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(te,{control:B.control,name:"category",render:({field:l})=>e.jsxs(ae,{children:[e.jsx(ne,{children:"Category"}),e.jsxs(le,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(ue,{children:e.jsx(oe,{children:e.jsx(ce,{placeholder:"Select a category"})})}),e.jsxs(de,{children:[e.jsx(I,{value:"assessment",children:"Assessment"}),e.jsx(I,{value:"treatment",children:"Treatment"}),e.jsx(I,{value:"progress",children:"Progress Notes"}),e.jsx(I,{value:"evaluation",children:"Evaluation"})]})]}),e.jsx(fe,{})]})}),e.jsx(te,{control:B.control,name:"subcategory",render:({field:l})=>e.jsxs(ae,{children:[e.jsx(ne,{children:"Subcategory"}),e.jsx(ue,{children:e.jsx(R,{placeholder:"e.g., Initial Assessment",...l})}),e.jsx(fe,{})]})})]}),e.jsx(te,{control:B.control,name:"clinical_context",render:({field:l})=>e.jsxs(ae,{children:[e.jsx(ne,{children:"Clinical Context"}),e.jsx(ue,{children:e.jsx(R,{placeholder:"e.g., Speech Therapy, Occupational Therapy",...l})}),e.jsx(fe,{})]})})]}),e.jsxs(Ie,{value:"metadata",className:"space-y-4 mt-6",children:[e.jsx(te,{control:B.control,name:"tags",render:({field:l})=>e.jsxs(ae,{children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Hn,{className:"w-4 h-4"}),"Tags"]}),e.jsx(ue,{children:e.jsx(R,{placeholder:"Enter tags separated by commas",...l})}),e.jsx(zs,{children:"Separate multiple tags with commas (e.g., pediatric, assessment, standardized)"}),e.jsx(fe,{})]})}),e.jsx(te,{control:B.control,name:"targetAudience",render:({field:l})=>e.jsxs(ae,{children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Target Audience"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["SLP","OT","PT","Psychologist","Social Worker","Case Manager"].map(j=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{id:j,checked:l.value?.includes(j)||!1,onCheckedChange:S=>{S?l.onChange([...l.value||[],j]):l.onChange(l.value?.filter(M=>M!==j)||[])}}),e.jsx("label",{htmlFor:j,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:j})]},j))}),e.jsx(fe,{})]})}),e.jsx(te,{control:B.control,name:"estimatedCompletionTime",render:({field:l})=>e.jsxs(ae,{children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4"}),"Estimated Completion Time (minutes)"]}),e.jsx(ue,{children:e.jsx(R,{type:"number",min:"1",max:"180",placeholder:"15",...l,onChange:j=>l.onChange(parseInt(j.target.value)||void 0)})}),e.jsx(fe,{})]})})]}),e.jsxs(Ie,{value:"styling",className:"space-y-4 mt-6",children:[e.jsx(te,{control:B.control,name:"showIplcLogo",render:({field:l})=>e.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ne,{className:"text-base",children:"Show IPLC Logo"}),e.jsx(zs,{children:"Display the IPLC logo on the form"})]}),e.jsx(ue,{children:e.jsx(bs,{checked:l.value,onCheckedChange:l.onChange})})]})}),B.watch("showIplcLogo")&&e.jsx(te,{control:B.control,name:"logoPosition",render:({field:l})=>e.jsxs(ae,{children:[e.jsx(ne,{children:"Logo Position"}),e.jsxs(le,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(ue,{children:e.jsx(oe,{children:e.jsx(ce,{placeholder:"Select logo position"})})}),e.jsxs(de,{children:[e.jsx(I,{value:"top-left",children:"Top Left"}),e.jsx(I,{value:"top-center",children:"Top Center"}),e.jsx(I,{value:"top-right",children:"Top Right"})]})]}),e.jsx(fe,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(te,{control:B.control,name:"primaryColor",render:({field:l})=>e.jsxs(ae,{children:[e.jsxs(ne,{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"w-4 h-4"}),"Primary Color"]}),e.jsx(ue,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{type:"color",className:"w-12 h-10 p-1 border-2",...l}),e.jsx(R,{type:"text",placeholder:"#007bff",...l})]})}),e.jsx(fe,{})]})}),e.jsx(te,{control:B.control,name:"fontFamily",render:({field:l})=>e.jsxs(ae,{children:[e.jsx(ne,{children:"Font Family"}),e.jsxs(le,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(ue,{children:e.jsx(oe,{children:e.jsx(ce,{placeholder:"Select font family"})})}),e.jsxs(de,{children:[e.jsx(I,{value:"system",children:"System Default"}),e.jsx(I,{value:"Arial",children:"Arial"}),e.jsx(I,{value:"Times New Roman",children:"Times New Roman"}),e.jsx(I,{value:"Georgia",children:"Georgia"}),e.jsx(I,{value:"Verdana",children:"Verdana"}),e.jsx(I,{value:"Calibri",children:"Calibri"})]})]}),e.jsx(fe,{})]})})]})]}),e.jsxs(Ie,{value:"sharing",className:"space-y-4 mt-6",children:[e.jsx(te,{control:B.control,name:"isPublic",render:({field:l})=>e.jsxs(ae,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(ne,{className:"text-base flex items-center gap-2",children:[e.jsx(Ga,{className:"w-4 h-4"}),"Public Template"]}),e.jsx(zs,{children:"Make this template available to other users in your organization"})]}),e.jsx(ue,{children:e.jsx(bs,{checked:l.value,onCheckedChange:l.onChange})})]})}),B.watch("isPublic")&&e.jsxs("div",{className:"rounded-lg border p-4 bg-blue-50",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Public Template Benefits"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Other users can discover and use your template"}),e.jsx("li",{children:"• Contributes to the organization's template library"}),e.jsx("li",{children:"• Can be rated and reviewed by other users"}),e.jsx("li",{children:"• Usage analytics will be tracked"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[e.jsx(z,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsxs(z,{type:"submit",children:[e.jsx(Ka,{className:"mr-2 h-4 w-4"}),"Save Template"]})]})]})})]})]})]})]})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:N?e.jsx(Sr,{components:r?void 0:h,pages:r?c:void 0,isMultiPage:r,title:B.getValues("name")||"Form Preview",description:B.getValues("description"),showIplcLogo:B.getValues("showIplcLogo")}):e.jsx("div",{className:"min-h-full bg-white rounded-lg border-2 border-dashed border-gray-300 p-6",onDrop:pt,onDragOver:l=>l.preventDefault(),children:h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:[e.jsx(Ye,{className:"h-12 w-12 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Start building your form"}),e.jsx("p",{className:"text-sm",children:"Drag components from the palette to begin"})]}):e.jsx("div",{className:"space-y-4",ref:Is,children:h.map((l,j)=>e.jsxs("div",{"data-id":l.id,className:`relative group border rounded-lg p-4 bg-white ${E===j?"border-primary bg-primary/5":w===j?"border-blue-500 bg-blue-50/50":"border-gray-200"} transition-all duration-200 cursor-pointer`,onDragOver:S=>Na(S,j),onDragLeave:wa,onDrop:S=>pt(S,j),onClick:()=>H(j===w?null:j),children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-50 hover:text-red-600 transition-colors duration-150",onClick:()=>Sa(j),children:e.jsx(wt,{className:"h-4 w-4"})}),e.jsx("div",{className:"drag-handle cursor-move p-2 hover:bg-gradient-metallic-primary hover:text-white rounded-md shadow-sm border border-gray-200 hover:border-iplc-primary transition-all duration-150",style:{minWidth:"40px",minHeight:"40px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Zt,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"pr-16",children:e.jsx(Hr,{component:l,onUpdate:S=>xt(j,S),isEditing:!0,allComponents:h})}),w===j&&l.type!=="title_subtitle"&&l.type!=="line_separator"&&l.type!=="evaluation_section"&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx(Ar,{component:l,allComponents:h,onUpdate:S=>xt(j,S)})})]},l.id))})})})]}),e.jsx(vt,{open:x,onOpenChange:k,children:e.jsxs(bt,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsx(yt,{children:e.jsx(jt,{children:"Load Template"})}),e.jsxs("div",{className:"flex flex-col gap-4 h-[70vh]",children:[e.jsxs("div",{className:"flex flex-col gap-4 border-b pb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(R,{placeholder:"Search templates...",value:me,onChange:l=>he(l.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs(le,{value:ge,onValueChange:_e,children:[e.jsx(oe,{className:"w-48",children:e.jsx(ce,{placeholder:"All Categories"})}),e.jsxs(de,{children:[e.jsx(I,{value:"",children:"All Categories"}),ka.map(l=>e.jsx(I,{value:l,children:l},l))]})]}),e.jsxs(le,{value:ke.join(","),onValueChange:l=>cs(l?l.split(","):[]),children:[e.jsx(oe,{className:"w-48",children:e.jsx(ce,{placeholder:"Filter by tags"})}),e.jsxs(de,{children:[e.jsx(I,{value:"",children:"All Tags"}),Ea.map(l=>e.jsx(I,{value:l,children:l},l))]})]}),e.jsxs(le,{value:Ls,onValueChange:l=>ua(l),children:[e.jsx(oe,{className:"w-40",children:e.jsx(ce,{})}),e.jsxs(de,{children:[e.jsx(I,{value:"created_at",children:"Date Created"}),e.jsx(I,{value:"name",children:"Name"}),e.jsx(I,{value:"usage_count",children:"Popularity"}),e.jsx(I,{value:"rating",children:"Rating"})]})]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>pa(ms==="asc"?"desc":"asc"),children:ms==="asc"?"↑":"↓"}),e.jsxs("div",{className:"flex ml-auto",children:[e.jsx(z,{variant:Ae==="grid"?"default":"outline",size:"sm",onClick:()=>ds("grid"),children:e.jsx(kn,{className:"h-4 w-4"})}),e.jsx(z,{variant:Ae==="list"?"default":"outline",size:"sm",onClick:()=>ds("list"),children:e.jsx(On,{className:"h-4 w-4"})})]})]}),(ge||ke.length>0||me)&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),me&&e.jsxs(U,{variant:"secondary",className:"gap-1",children:["Search: ",me,e.jsx("button",{onClick:()=>he(""),children:"×"})]}),ge&&e.jsxs(U,{variant:"secondary",className:"gap-1",children:["Category: ",ge,e.jsx("button",{onClick:()=>_e(""),children:"×"})]}),ke.map(l=>e.jsxs(U,{variant:"secondary",className:"gap-1",children:["Tag: ",l,e.jsx("button",{onClick:()=>cs(ke.filter(j=>j!==l)),children:"×"})]},l)),e.jsx(z,{variant:"ghost",size:"sm",onClick:()=>{he(""),_e(""),cs([])},children:"Clear all"})]})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:xe?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading templates..."})]})}):G.length===0?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"No templates found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search criteria"})]})}):e.jsx("div",{className:Ae==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-3",children:G.map(l=>e.jsx("div",{className:`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${Ae==="list"?"flex items-center gap-4":""}`,onClick:()=>_a(l),children:Ae==="grid"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-medium truncate",children:l.name}),l.metadata?.is_featured&&e.jsx(St,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),l.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:l.description}),e.jsxs("div",{className:"space-y-2",children:[l.metadata?.category&&e.jsx(U,{variant:"outline",className:"text-xs",children:l.metadata.category}),l.metadata?.tags&&l.metadata.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.metadata.tags.slice(0,3).map(j=>e.jsx(U,{variant:"secondary",className:"text-xs",children:j},j)),l.metadata.tags.length>3&&e.jsxs(U,{variant:"secondary",className:"text-xs",children:["+",l.metadata.tags.length-3]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"h-3 w-3"}),l.created_at&&new Date(l.created_at).toLocaleDateString()]}),l.metadata?.usage_count&&e.jsxs("span",{children:[l.metadata.usage_count," uses"]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium",children:l.name}),l.metadata?.is_featured&&e.jsx(St,{className:"h-4 w-4 text-yellow-500 fill-current"}),l.metadata?.category&&e.jsx(U,{variant:"outline",className:"text-xs",children:l.metadata.category})]}),l.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:l.description}),l.metadata?.tags&&l.metadata.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[l.metadata.tags.slice(0,5).map(j=>e.jsx(U,{variant:"secondary",className:"text-xs",children:j},j)),l.metadata.tags.length>5&&e.jsxs(U,{variant:"secondary",className:"text-xs",children:["+",l.metadata.tags.length-5]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:l.created_at&&new Date(l.created_at).toLocaleDateString()}),l.metadata?.usage_count&&e.jsxs("div",{className:"text-xs text-gray-500",children:[l.metadata.usage_count," uses"]})]})]})},l.id))})})]}),e.jsx("div",{className:"flex justify-end border-t pt-4",children:e.jsx(z,{variant:"outline",onClick:()=>k(!1),children:"Cancel"})})]})}),e.jsx(zr,{formId:s?.id?.toString()||"new",formName:B.getValues("name")||"Untitled Form",formDescription:B.getValues("description"),components:h,isOpen:ba,onClose:()=>ya(!1)})]})}function Hr({component:t,onUpdate:s,isEditing:a=!1,allComponents:n=[]}){t.type==="evaluation_section"&&(console.log("ComponentRenderer: Rendering evaluation section",t),console.log("Component sectionId:",t.sectionId));const r=i=>{s?.({label:i})};switch(t.type){case"text_input":return e.jsxs("div",{className:"space-y-2",children:[a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(R,{placeholder:t.props?.placeholder||"Enter text...",disabled:!a,className:a?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"textarea":return e.jsxs("div",{className:"space-y-2",children:[a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(is,{placeholder:t.props?.placeholder||"Enter text...",disabled:!a,className:a?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"select":return e.jsxs("div",{className:"space-y-2",children:[a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsxs("select",{disabled:!a,className:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select an option..."}),t.props?.options?.map((i,c)=>e.jsx("option",{value:i,children:i},c))]}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"radio":return e.jsxs("div",{className:"space-y-2",children:[a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx("div",{className:"space-y-2",children:t.props?.options?.map((i,c)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:t.id,value:i,disabled:!a,className:"h-4 w-4"}),e.jsx("label",{className:"text-sm",children:i})]},c))}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"checkbox":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,className:"h-4 w-4"}),a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed flex-1",placeholder:"Enter checkbox label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label})]}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"date":return e.jsxs("div",{className:"space-y-2",children:[a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(R,{type:"date",disabled:!a,className:a?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"number":return e.jsxs("div",{className:"space-y-2",children:[a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed",placeholder:"Enter field label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsx(R,{type:"number",placeholder:t.props?.placeholder||"Enter number...",disabled:!a,className:a?"bg-gray-50":""}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"scale":return e.jsxs("div",{className:"space-y-2",children:[a?e.jsx(R,{value:t.label,onChange:i=>r(i.target.value),className:"font-medium border-dashed",placeholder:"Enter scale label"}):e.jsx("label",{className:"text-sm font-medium",children:t.label}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:t.props?.min||1}),e.jsx("input",{type:"range",min:t.props?.min||1,max:t.props?.max||10,disabled:!a,className:"flex-1"}),e.jsx("span",{className:"text-xs text-gray-500",children:t.props?.max||10})]}),t.props?.required&&e.jsx("span",{className:"text-xs text-red-500",children:"* Required"})]});case"ai_summary":return e.jsx(zt,{component:t,onUpdate:s,isEditing:a,allComponents:n});case"title_subtitle":return e.jsx(Rt,{component:t,onUpdate:s,isEditing:a});case"subtitle":return e.jsx($t,{props:t.props,isSelected:a,onPropsChange:i=>s&&s({props:i})});case"line_separator":return e.jsx(Bt,{props:t.props,isSelected:a,onPropsChange:i=>s&&s({props:i})});case"evaluation_section":{const c=rt.evaluationSections.find(o=>o.id===t.sectionId);return c?e.jsxs("div",{className:"space-y-4 p-4 border-2 border-blue-200 rounded-lg bg-blue-50/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900",children:t.label}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{variant:"outline",className:"text-xs",children:c.discipline}),t.collapsed&&e.jsx(U,{variant:"secondary",className:"text-xs",children:"Collapsed"})]})]}),c.description&&e.jsx("p",{className:"text-sm text-gray-600",children:c.description}),e.jsx("div",{className:"space-y-3 mt-4",children:c.fields.map((o,d)=>{switch(o.type){case"section_header":return e.jsx("div",{className:`mt-${o.level===1?"4":"3"} mb-2 pt-${o.level===1?"4":"3"} ${d>0?"border-t border-blue-200":""}`,children:e.jsx("h4",{className:`text-${o.level===1?"lg":"md"} font-semibold text-gray-800`,children:o.label})},d);case"subsection":return e.jsx("div",{className:"mt-3 mb-2",children:e.jsx("h5",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:o.label})},d);case"text":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[o.label,o.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(R,{placeholder:`Enter ${o.label.toLowerCase()}`,disabled:!a,className:"text-sm"})]},d);case"textarea":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[o.label,o.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(is,{placeholder:`Enter ${o.label.toLowerCase()}`,rows:o.rows||3,disabled:!a,className:"text-sm"})]},d);case"select":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[o.label,o.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs(le,{disabled:!a,children:[e.jsx(oe,{className:"text-sm",children:e.jsx(ce,{placeholder:`Select ${o.label.toLowerCase()}`})}),e.jsx(de,{children:o.options?.map((m,p)=>e.jsx(I,{value:m,children:m},p))})]})]},d);case"date":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[o.label,o.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(R,{type:"date",disabled:!a,className:"text-sm"})]},d);case"number":return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[o.label,o.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(R,{type:"number",min:o.min,max:o.max,step:o.step,placeholder:`Enter ${o.label.toLowerCase()}`,disabled:!a,className:"text-sm"})]},d);case"rating_scale":return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:o.label}),e.jsx("div",{className:"flex items-center space-x-2",children:o.scale.map((m,p)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"button",disabled:!a,className:`w-8 h-8 rounded-full border-2 ${a?"hover:bg-gradient-metallic-primary hover:border-iplc-primary hover:text-white hover:shadow-md":""} border-gray-300 bg-white text-xs font-medium transition-all duration-150`,children:m}),o.labels&&o.labels[p]&&e.jsx("span",{className:"text-xs text-gray-500 mt-1 text-center max-w-[60px]",children:o.labels[p]})]},p))})]},d);case"checkbox_group":return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:o.label}),e.jsx("div",{className:"space-y-1 pl-2",children:o.options?.map((m,p)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{disabled:!a,id:`${o.id}_${p}`}),e.jsx("label",{htmlFor:`${o.id}_${p}`,className:"text-sm text-gray-600 cursor-pointer",children:m})]},p))})]},d);case"rating_grid":case"assistance_grid":return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:o.label}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-xs font-medium text-gray-600 p-2"}),o.columns.map((m,p)=>e.jsx("th",{className:"text-center text-xs font-medium text-gray-600 p-2 min-w-[80px]",children:m},p))]})}),e.jsx("tbody",{children:o.rows.map((m,p)=>e.jsxs("tr",{className:p%2===0?"bg-gray-50":"",children:[e.jsx("td",{className:"text-sm text-gray-700 p-2 font-medium",children:m}),o.columns.map((h,g)=>e.jsx("td",{className:"text-center p-2",children:e.jsx("input",{type:"radio",name:`${o.id}_${p}`,disabled:!a,className:"h-4 w-4"})},g))]},p))})]})})]},d);case"repeating_group":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:o.label}),a&&e.jsxs(z,{size:"sm",variant:"outline",className:"text-xs hover:bg-gradient-metallic-primary hover:text-white hover:border-iplc-primary transition-all duration-150",children:[e.jsx(Ye,{className:"h-3 w-3 mr-1"}),o.addButtonLabel||"Add Item"]})]}),e.jsxs("div",{className:"border border-gray-200 rounded p-3 bg-gray-50",children:[e.jsx("div",{className:"space-y-2",children:o.fields.map((m,p)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-600",children:m.label}),e.jsxs("span",{className:"text-gray-400 ml-2",children:["(",m.type,")"]})]},p))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This section allows multiple entries"})]})]},d);default:return e.jsx("div",{className:"pl-4 border-l-2 border-blue-200",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:o.label}),o.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Type: ",o.type]})]})},d)}})}),a&&e.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-700",children:["This evaluation section contains ",c.fields.length," fields. Use the Property Grid to customize individual field properties."]})})]}):e.jsx("div",{className:"p-4 border border-red-300 rounded bg-red-50",children:e.jsxs("p",{className:"text-sm text-red-600",children:["Evaluation section not found: ",t.sectionId]})})}default:return e.jsx("div",{className:"p-4 border border-dashed border-gray-300 rounded",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Unknown component type: ",t.type]})})}}export{Oi as FormBuilder};
//# sourceMappingURL=FormBuilder.B_64lArZ.js.map
