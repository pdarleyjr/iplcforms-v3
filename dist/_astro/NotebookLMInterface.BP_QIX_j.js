import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.7-fRwNhn.js";import{B as Y}from"./button.DAHL7osy.js";import{I as Fe}from"./input.BqLLRaLk.js";import{C as Ce}from"./card.mQZrHzSY.js";import{B as rt,S as Dn,a as le,E as Rn,T as In,b as ot,C as En,D as Pn,c as st,U as An}from"./scroll-area.BStO3lyX.js";import{D as Le,b as Ue,c as $e,d as Ge}from"./dialog.CJQRyvNY.js";import{A as Tn,b as On,a as Fn}from"./alert.CwyU3Sxv.js";import{d as dt,I as Ln,R as Un,T as $n,a as Gn,b as Ke,c as Be}from"./tabs.BpmYg8Ta.js";import{c as ut,b as j,P as re,e as Kn,a as Bn}from"./index.DVFN_t0d.js";import{c as G,e as mt,u as fe,d as zn,a as K}from"./index.CuufFikk.js";import{c as Vn,u as qn}from"./index.D8gVcfSW.js";import{P as Hn,u as Yn,R as Wn,F as Xn,D as Jn,h as Qn}from"./Combination.D1D1t5_V.js";import{c as pt,A as Zn,C as er,R as tr,b as nr}from"./index.ZH8sIb6j.js";import{P as De}from"./index.D1rCwynp.js";import{a as ft,u as at}from"./index.BhDqio8u.js";import{C as rr}from"./chevron-right.fiaqyhhB.js";import{a as ht,L as Se,C as or}from"./loader-circle.D8v-saPC.js";import{C as sr}from"./circle.Bd6DMs0W.js";import{M as ar}from"./message-square.BrrOqiS3.js";import{S as ct}from"./sparkles.BRTGHZTm.js";import{P as cr}from"./plus.q9ev0EMF.js";import{F as de}from"./file-text.Dex-0Is2.js";import"./x.iTm9BFym.js";import"./index.AmEYgA8_.js";import"./index.BDInZWg7.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],it=G("bot",ir);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],dr=G("copy",lr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mr=G("eye-off",ur);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]],fr=G("file-code",pr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],xr=G("file-image",hr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],wr=G("file-plus",gr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],yr=G("folder-open",vr);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Nr=G("send",jr);var ze=["Enter"," "],br=["ArrowDown","PageUp","Home"],xt=["ArrowUp","PageDown","End"],Mr=[...br,...xt],Cr={ltr:[...ze,"ArrowRight"],rtl:[...ze,"ArrowLeft"]},Sr={ltr:["ArrowLeft"],rtl:["ArrowRight"]},he="Menu",[me,kr,_r]=Vn(he),[W,gt]=ut(he,[_r,pt,dt]),Re=pt(),wt=dt(),[Dr,X]=W(he),[Rr,xe]=W(he),vt=t=>{const{__scopeMenu:r,open:n=!1,children:s,dir:c,onOpenChange:i,modal:l=!0}=t,m=Re(r),[w,g]=a.useState(null),f=a.useRef(!1),d=ft(i),v=qn(c);return a.useEffect(()=>{const S=()=>{f.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>f.current=!1;return document.addEventListener("keydown",S,{capture:!0}),()=>{document.removeEventListener("keydown",S,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),e.jsx(tr,{...m,children:e.jsx(Dr,{scope:r,open:n,onOpenChange:d,content:w,onContentChange:g,children:e.jsx(Rr,{scope:r,onClose:a.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:v,modal:l,children:s})})})};vt.displayName=he;var Ir="MenuAnchor",qe=a.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,c=Re(n);return e.jsx(Zn,{...c,...s,ref:r})});qe.displayName=Ir;var He="MenuPortal",[Er,yt]=W(He,{forceMount:void 0}),jt=t=>{const{__scopeMenu:r,forceMount:n,children:s,container:c}=t,i=X(He,r);return e.jsx(Er,{scope:r,forceMount:n,children:e.jsx(De,{present:n||i.open,children:e.jsx(Hn,{asChild:!0,container:c,children:s})})})};jt.displayName=He;var R="MenuContent",[Pr,Ye]=W(R),Nt=a.forwardRef((t,r)=>{const n=yt(R,t.__scopeMenu),{forceMount:s=n.forceMount,...c}=t,i=X(R,t.__scopeMenu),l=xe(R,t.__scopeMenu);return e.jsx(me.Provider,{scope:t.__scopeMenu,children:e.jsx(De,{present:s||i.open,children:e.jsx(me.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(Ar,{...c,ref:r}):e.jsx(Tr,{...c,ref:r})})})})}),Ar=a.forwardRef((t,r)=>{const n=X(R,t.__scopeMenu),s=a.useRef(null),c=fe(r,s);return a.useEffect(()=>{const i=s.current;if(i)return Qn(i)},[]),e.jsx(We,{...t,ref:c,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:j(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Tr=a.forwardRef((t,r)=>{const n=X(R,t.__scopeMenu);return e.jsx(We,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Or=zn("MenuContent.ScrollLock"),We=a.forwardRef((t,r)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:c,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:m,onEntryFocus:w,onEscapeKeyDown:g,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:v,onDismiss:S,disableOutsideScroll:N,...O}=t,E=X(R,n),F=xe(R,n),Pe=Re(n),ge=wt(n),oe=kr(n),[Ae,we]=a.useState(null),B=a.useRef(null),ve=fe(r,B,E.onContentChange),J=a.useRef(0),z=a.useRef(""),ye=a.useRef(0),Q=a.useRef(null),se=a.useRef("right"),I=a.useRef(0),je=N?Wn:a.Fragment,L=N?{as:Or,allowPinchZoom:!0}:void 0,Ne=p=>{const A=z.current+p,T=oe().filter(C=>!C.disabled),V=document.activeElement,Z=T.find(C=>C.ref.current===V)?.textValue,ae=T.map(C=>C.textValue),ee=Yr(ae,A,Z),P=T.find(C=>C.textValue===ee)?.ref.current;(function C(be){z.current=be,window.clearTimeout(J.current),be!==""&&(J.current=window.setTimeout(()=>C(""),1e3))})(A),P&&setTimeout(()=>P.focus())};a.useEffect(()=>()=>window.clearTimeout(J.current),[]),Yn();const U=a.useCallback(p=>se.current===Q.current?.side&&Xr(p,Q.current?.area),[]);return e.jsx(Pr,{scope:n,searchRef:z,onItemEnter:a.useCallback(p=>{U(p)&&p.preventDefault()},[U]),onItemLeave:a.useCallback(p=>{U(p)||(B.current?.focus(),we(null))},[U]),onTriggerLeave:a.useCallback(p=>{U(p)&&p.preventDefault()},[U]),pointerGraceTimerRef:ye,onPointerGraceIntentChange:a.useCallback(p=>{Q.current=p},[]),children:e.jsx(je,{...L,children:e.jsx(Xn,{asChild:!0,trapped:c,onMountAutoFocus:j(i,p=>{p.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(Jn,{asChild:!0,disableOutsidePointerEvents:m,onEscapeKeyDown:g,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:v,onDismiss:S,children:e.jsx(Un,{asChild:!0,...ge,dir:F.dir,orientation:"vertical",loop:s,currentTabStopId:Ae,onCurrentTabStopIdChange:we,onEntryFocus:j(w,p=>{F.isUsingKeyboardRef.current||p.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(er,{role:"menu","aria-orientation":"vertical","data-state":Lt(E.open),"data-radix-menu-content":"",dir:F.dir,...Pe,...O,ref:ve,style:{outline:"none",...O.style},onKeyDown:j(O.onKeyDown,p=>{const T=p.target.closest("[data-radix-menu-content]")===p.currentTarget,V=p.ctrlKey||p.altKey||p.metaKey,Z=p.key.length===1;T&&(p.key==="Tab"&&p.preventDefault(),!V&&Z&&Ne(p.key));const ae=B.current;if(p.target!==ae||!Mr.includes(p.key))return;p.preventDefault();const P=oe().filter(C=>!C.disabled).map(C=>C.ref.current);xt.includes(p.key)&&P.reverse(),qr(P)}),onBlur:j(t.onBlur,p=>{p.currentTarget.contains(p.target)||(window.clearTimeout(J.current),z.current="")}),onPointerMove:j(t.onPointerMove,pe(p=>{const A=p.target,T=I.current!==p.clientX;if(p.currentTarget.contains(A)&&T){const V=p.clientX>I.current?"right":"left";se.current=V,I.current=p.clientX}}))})})})})})})});Nt.displayName=R;var Fr="MenuGroup",Xe=a.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(re.div,{role:"group",...s,ref:r})});Xe.displayName=Fr;var Lr="MenuLabel",bt=a.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(re.div,{...s,ref:r})});bt.displayName=Lr;var ke="MenuItem",lt="menu.itemSelect",Ie=a.forwardRef((t,r)=>{const{disabled:n=!1,onSelect:s,...c}=t,i=a.useRef(null),l=xe(ke,t.__scopeMenu),m=Ye(ke,t.__scopeMenu),w=fe(r,i),g=a.useRef(!1),f=()=>{const d=i.current;if(!n&&d){const v=new CustomEvent(lt,{bubbles:!0,cancelable:!0});d.addEventListener(lt,S=>s?.(S),{once:!0}),Kn(d,v),v.defaultPrevented?g.current=!1:l.onClose()}};return e.jsx(Mt,{...c,ref:w,disabled:n,onClick:j(t.onClick,f),onPointerDown:d=>{t.onPointerDown?.(d),g.current=!0},onPointerUp:j(t.onPointerUp,d=>{g.current||d.currentTarget?.click()}),onKeyDown:j(t.onKeyDown,d=>{const v=m.searchRef.current!=="";n||v&&d.key===" "||ze.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Ie.displayName=ke;var Mt=a.forwardRef((t,r)=>{const{__scopeMenu:n,disabled:s=!1,textValue:c,...i}=t,l=Ye(ke,n),m=wt(n),w=a.useRef(null),g=fe(r,w),[f,d]=a.useState(!1),[v,S]=a.useState("");return a.useEffect(()=>{const N=w.current;N&&S((N.textContent??"").trim())},[i.children]),e.jsx(me.ItemSlot,{scope:n,disabled:s,textValue:c??v,children:e.jsx(Ln,{asChild:!0,...m,focusable:!s,children:e.jsx(re.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:g,onPointerMove:j(t.onPointerMove,pe(N=>{s?l.onItemLeave(N):(l.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:j(t.onPointerLeave,pe(N=>l.onItemLeave(N))),onFocus:j(t.onFocus,()=>d(!0)),onBlur:j(t.onBlur,()=>d(!1))})})})}),Ur="MenuCheckboxItem",Ct=a.forwardRef((t,r)=>{const{checked:n=!1,onCheckedChange:s,...c}=t;return e.jsx(Rt,{scope:t.__scopeMenu,checked:n,children:e.jsx(Ie,{role:"menuitemcheckbox","aria-checked":_e(n)?"mixed":n,...c,ref:r,"data-state":Qe(n),onSelect:j(c.onSelect,()=>s?.(_e(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Ct.displayName=Ur;var St="MenuRadioGroup",[$r,Gr]=W(St,{value:void 0,onValueChange:()=>{}}),kt=a.forwardRef((t,r)=>{const{value:n,onValueChange:s,...c}=t,i=ft(s);return e.jsx($r,{scope:t.__scopeMenu,value:n,onValueChange:i,children:e.jsx(Xe,{...c,ref:r})})});kt.displayName=St;var _t="MenuRadioItem",Dt=a.forwardRef((t,r)=>{const{value:n,...s}=t,c=Gr(_t,t.__scopeMenu),i=n===c.value;return e.jsx(Rt,{scope:t.__scopeMenu,checked:i,children:e.jsx(Ie,{role:"menuitemradio","aria-checked":i,...s,ref:r,"data-state":Qe(i),onSelect:j(s.onSelect,()=>c.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Dt.displayName=_t;var Je="MenuItemIndicator",[Rt,Kr]=W(Je,{checked:!1}),It=a.forwardRef((t,r)=>{const{__scopeMenu:n,forceMount:s,...c}=t,i=Kr(Je,n);return e.jsx(De,{present:s||_e(i.checked)||i.checked===!0,children:e.jsx(re.span,{...c,ref:r,"data-state":Qe(i.checked)})})});It.displayName=Je;var Br="MenuSeparator",Et=a.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(re.div,{role:"separator","aria-orientation":"horizontal",...s,ref:r})});Et.displayName=Br;var zr="MenuArrow",Pt=a.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,c=Re(n);return e.jsx(nr,{...c,...s,ref:r})});Pt.displayName=zr;var Vr="MenuSub",[ps,At]=W(Vr),ue="MenuSubTrigger",Tt=a.forwardRef((t,r)=>{const n=X(ue,t.__scopeMenu),s=xe(ue,t.__scopeMenu),c=At(ue,t.__scopeMenu),i=Ye(ue,t.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:m,onPointerGraceIntentChange:w}=i,g={__scopeMenu:t.__scopeMenu},f=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>f,[f]),a.useEffect(()=>{const d=m.current;return()=>{window.clearTimeout(d),w(null)}},[m,w]),e.jsx(qe,{asChild:!0,...g,children:e.jsx(Mt,{id:c.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":c.contentId,"data-state":Lt(n.open),...t,ref:mt(r,c.onTriggerChange),onClick:d=>{t.onClick?.(d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:j(t.onPointerMove,pe(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:j(t.onPointerLeave,pe(d=>{f();const v=n.content?.getBoundingClientRect();if(v){const S=n.content?.dataset.side,N=S==="right",O=N?-5:5,E=v[N?"left":"right"],F=v[N?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+O,y:d.clientY},{x:E,y:v.top},{x:F,y:v.top},{x:F,y:v.bottom},{x:E,y:v.bottom}],side:S}),window.clearTimeout(m.current),m.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:j(t.onKeyDown,d=>{const v=i.searchRef.current!=="";t.disabled||v&&d.key===" "||Cr[s.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});Tt.displayName=ue;var Ot="MenuSubContent",Ft=a.forwardRef((t,r)=>{const n=yt(R,t.__scopeMenu),{forceMount:s=n.forceMount,...c}=t,i=X(R,t.__scopeMenu),l=xe(R,t.__scopeMenu),m=At(Ot,t.__scopeMenu),w=a.useRef(null),g=fe(r,w);return e.jsx(me.Provider,{scope:t.__scopeMenu,children:e.jsx(De,{present:s||i.open,children:e.jsx(me.Slot,{scope:t.__scopeMenu,children:e.jsx(We,{id:m.contentId,"aria-labelledby":m.triggerId,...c,ref:g,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{l.isUsingKeyboardRef.current&&w.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:j(t.onFocusOutside,f=>{f.target!==m.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:j(t.onEscapeKeyDown,f=>{l.onClose(),f.preventDefault()}),onKeyDown:j(t.onKeyDown,f=>{const d=f.currentTarget.contains(f.target),v=Sr[l.dir].includes(f.key);d&&v&&(i.onOpenChange(!1),m.trigger?.focus(),f.preventDefault())})})})})})});Ft.displayName=Ot;function Lt(t){return t?"open":"closed"}function _e(t){return t==="indeterminate"}function Qe(t){return _e(t)?"indeterminate":t?"checked":"unchecked"}function qr(t){const r=document.activeElement;for(const n of t)if(n===r||(n.focus(),document.activeElement!==r))return}function Hr(t,r){return t.map((n,s)=>t[(r+s)%t.length])}function Yr(t,r,n){const c=r.length>1&&Array.from(r).every(g=>g===r[0])?r[0]:r,i=n?t.indexOf(n):-1;let l=Hr(t,Math.max(i,0));c.length===1&&(l=l.filter(g=>g!==n));const w=l.find(g=>g.toLowerCase().startsWith(c.toLowerCase()));return w!==n?w:void 0}function Wr(t,r){const{x:n,y:s}=t;let c=!1;for(let i=0,l=r.length-1;i<r.length;l=i++){const m=r[i],w=r[l],g=m.x,f=m.y,d=w.x,v=w.y;f>s!=v>s&&n<(d-g)*(s-f)/(v-f)+g&&(c=!c)}return c}function Xr(t,r){if(!r)return!1;const n={x:t.clientX,y:t.clientY};return Wr(n,r)}function pe(t){return r=>r.pointerType==="mouse"?t(r):void 0}var Jr=vt,Qr=qe,Zr=jt,eo=Nt,to=Xe,no=bt,ro=Ie,oo=Ct,so=kt,ao=Dt,co=It,io=Et,lo=Pt,uo=Tt,mo=Ft,Ee="DropdownMenu",[po,fs]=ut(Ee,[gt]),_=gt(),[fo,Ut]=po(Ee),$t=t=>{const{__scopeDropdownMenu:r,children:n,dir:s,open:c,defaultOpen:i,onOpenChange:l,modal:m=!0}=t,w=_(r),g=a.useRef(null),[f,d]=Bn({prop:c,defaultProp:i??!1,onChange:l,caller:Ee});return e.jsx(fo,{scope:r,triggerId:at(),triggerRef:g,contentId:at(),open:f,onOpenChange:d,onOpenToggle:a.useCallback(()=>d(v=>!v),[d]),modal:m,children:e.jsx(Jr,{...w,open:f,onOpenChange:d,dir:s,modal:m,children:n})})};$t.displayName=Ee;var Gt="DropdownMenuTrigger",Kt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...c}=t,i=Ut(Gt,n),l=_(n);return e.jsx(Qr,{asChild:!0,...l,children:e.jsx(re.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...c,ref:mt(r,i.triggerRef),onPointerDown:j(t.onPointerDown,m=>{!s&&m.button===0&&m.ctrlKey===!1&&(i.onOpenToggle(),i.open||m.preventDefault())}),onKeyDown:j(t.onKeyDown,m=>{s||(["Enter"," "].includes(m.key)&&i.onOpenToggle(),m.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(m.key)&&m.preventDefault())})})})});Kt.displayName=Gt;var ho="DropdownMenuPortal",Bt=t=>{const{__scopeDropdownMenu:r,...n}=t,s=_(r);return e.jsx(Zr,{...s,...n})};Bt.displayName=ho;var zt="DropdownMenuContent",Vt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=Ut(zt,n),i=_(n),l=a.useRef(!1);return e.jsx(eo,{id:c.contentId,"aria-labelledby":c.triggerId,...i,...s,ref:r,onCloseAutoFocus:j(t.onCloseAutoFocus,m=>{l.current||c.triggerRef.current?.focus(),l.current=!1,m.preventDefault()}),onInteractOutside:j(t.onInteractOutside,m=>{const w=m.detail.originalEvent,g=w.button===0&&w.ctrlKey===!0,f=w.button===2||g;(!c.modal||f)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Vt.displayName=zt;var xo="DropdownMenuGroup",go=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(to,{...c,...s,ref:r})});go.displayName=xo;var wo="DropdownMenuLabel",qt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(no,{...c,...s,ref:r})});qt.displayName=wo;var vo="DropdownMenuItem",Ht=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(ro,{...c,...s,ref:r})});Ht.displayName=vo;var yo="DropdownMenuCheckboxItem",Yt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(oo,{...c,...s,ref:r})});Yt.displayName=yo;var jo="DropdownMenuRadioGroup",No=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(so,{...c,...s,ref:r})});No.displayName=jo;var bo="DropdownMenuRadioItem",Wt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(ao,{...c,...s,ref:r})});Wt.displayName=bo;var Mo="DropdownMenuItemIndicator",Xt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(co,{...c,...s,ref:r})});Xt.displayName=Mo;var Co="DropdownMenuSeparator",Jt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(io,{...c,...s,ref:r})});Jt.displayName=Co;var So="DropdownMenuArrow",ko=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(lo,{...c,...s,ref:r})});ko.displayName=So;var _o="DropdownMenuSubTrigger",Qt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(uo,{...c,...s,ref:r})});Qt.displayName=_o;var Do="DropdownMenuSubContent",Zt=a.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,c=_(n);return e.jsx(mo,{...c,...s,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zt.displayName=Do;var Ro=$t,Io=Kt,Eo=Bt,en=Vt,tn=qt,nn=Ht,rn=Yt,on=Wt,sn=Xt,an=Jt,cn=Qt,ln=Zt;const Po=Ro,Ao=Io,To=a.forwardRef(({className:t,inset:r,children:n,...s},c)=>e.jsxs(cn,{ref:c,className:K("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...s,children:[n,e.jsx(rr,{className:"ml-auto h-4 w-4"})]}));To.displayName=cn.displayName;const Oo=a.forwardRef(({className:t,...r},n)=>e.jsx(ln,{ref:n,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));Oo.displayName=ln.displayName;const dn=a.forwardRef(({className:t,sideOffset:r=4,...n},s)=>e.jsx(Eo,{children:e.jsx(en,{ref:s,sideOffset:r,className:K("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));dn.displayName=en.displayName;const Ve=a.forwardRef(({className:t,inset:r,...n},s)=>e.jsx(nn,{ref:s,className:K("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...n}));Ve.displayName=nn.displayName;const Fo=a.forwardRef(({className:t,children:r,checked:n,...s},c)=>e.jsxs(rn,{ref:c,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(sn,{children:e.jsx(ht,{className:"h-4 w-4"})})}),r]}));Fo.displayName=rn.displayName;const Lo=a.forwardRef(({className:t,children:r,...n},s)=>e.jsxs(on,{ref:s,className:K("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(sn,{children:e.jsx(sr,{className:"h-2 w-2 fill-current"})})}),r]}));Lo.displayName=on.displayName;const Uo=a.forwardRef(({className:t,inset:r,...n},s)=>e.jsx(tn,{ref:s,className:K("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n}));Uo.displayName=tn.displayName;const $o=a.forwardRef(({className:t,...r},n)=>e.jsx(an,{ref:n,className:K("-mx-1 my-1 h-px bg-muted",t),...r}));$o.displayName=an.displayName;function hs(){const[t,r]=a.useState([]),[n,s]=a.useState([]),[c,i]=a.useState([]),[l,m]=a.useState(null),[w,g]=a.useState(""),[f,d]=a.useState(!1),[v,S]=a.useState(!1),[N,O]=a.useState(null),[E,F]=a.useState(null),[Pe,ge]=a.useState(!1),[oe,Ae]=a.useState([]),[we,B]=a.useState(!1),[ve,J]=a.useState(""),[z,ye]=a.useState(null),[Q,se]=a.useState(!1),[I,je]=a.useState(null),[L,Ne]=a.useState(!1),[U,p]=a.useState("sources"),[A,T]=a.useState(""),[V,Z]=a.useState(!1),[ae,ee]=a.useState(""),P=a.useRef(null),C=a.useRef(null),be=()=>{C.current?.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{be()},[t]),a.useEffect(()=>{Te(),hn()},[]);function un(o){return!!o&&typeof o=="object"&&Array.isArray(o.conversations)}function mn(o){return!!o&&typeof o=="object"&&Array.isArray(o.documents)}function pn(o){return!!o&&typeof o=="object"&&Array.isArray(o.messages)&&Array.isArray(o.documents)}function fn(o){return!!o&&typeof o=="object"&&Array.isArray(o.documents)}const Te=async()=>{try{const o=await fetch("/api/chat/conversations");if(o.ok){const u=await o.json();un(u)?i(u.conversations):console.warn("Unexpected conversations payload")}}catch(o){console.error("Failed to load conversations:",o)}},hn=async()=>{try{const o=await fetch("/api/chat/documents");if(o.ok){const u=await o.json();mn(u)?s(u.documents):console.warn("Unexpected documents payload")}}catch(o){console.error("Failed to load documents:",o)}},xn=async o=>{try{const u=await fetch(`/api/chat/conversations/${o}`);if(u.ok){const x=await u.json();pn(x)?(r(x.messages),s(x.documents),m(o)):console.warn("Unexpected conversation detail payload")}}catch(u){console.error("Failed to load conversation:",u)}},gn=async o=>{const u=o.target.files;if(!u||u.length===0)return;S(!0);const x=new FormData;Array.from(u).forEach(h=>{x.append("files",h)}),l&&x.append("conversationId",l);try{const h=await fetch("/api/chat/upload",{method:"POST",body:x});if(h.ok){const y=await h.json();if(fn(y)){const b=y.documents.map(M=>({...M,enabled:!0}));s(M=>[...M,...b]),!l&&y.conversationId&&(m(y.conversationId),await Te())}else console.warn("Unexpected upload response payload")}else console.error("Upload failed:",await h.text())}catch(h){console.error("Upload error:",h)}finally{S(!1),P.current&&(P.current.value="")}},Ze=async()=>{if(!w.trim()||f||L)return;const o=w.trim(),u={id:Date.now().toString(),role:"user",content:o,timestamp:new Date};r(h=>[...h,u]),g(""),d(!0),Ne(!0),je(null);const x={id:(Date.now()+1).toString(),role:"assistant",content:"",timestamp:new Date,streaming:!0};r(h=>[...h,x]);try{const h=n.filter(k=>k.enabled!==!1).map(k=>k.id),y=await fetch("/api/chat/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o,conversationId:l,documentIds:h})});if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const b=y.body?.getReader(),M=new TextDecoder;if(b){let k="",te=[],ce="";for(;;){const{done:ie,value:$}=await b.read();if(ie)break;ce+=M.decode($,{stream:!0});const ne=ce.split(`

`);ce=ne.pop()||"";for(const q of ne){if(!q.trim())continue;const _n=q.split(`
`);for(const nt of _n)if(nt.startsWith("data: ")){const Me=nt.slice(6).trim();if(!Me||Me==="[DONE]")continue;try{const D=JSON.parse(Me);if(D.chunks&&(Ae(D.chunks),te=D.chunks),D.content&&(k+=D.content,r(Oe=>Oe.map(H=>H.id===x.id?{...H,content:k,citations:te}:H))),D.conversationId&&!l&&(m(D.conversationId),await Te()),D.error){console.error("SSE Error:",D.error),r(Oe=>Oe.map(H=>H.id===x.id?{...H,content:D.error||"An error occurred",streaming:!1}:H));return}}catch(D){console.error("Failed to parse SSE data:",D,"Data:",Me)}}}}if(ce.trim()){const ie=ce.split(`
`);for(const $ of ie)if($.startsWith("data: ")){const ne=$.slice(6).trim();if(ne&&ne!=="[DONE]")try{const q=JSON.parse(ne);q.content&&(k+=q.content)}catch(q){console.error("Failed to parse final SSE data:",q)}}}r(ie=>ie.map($=>$.id===x.id?{...$,content:k||"No response received",streaming:!1}:$))}}catch(h){console.error("Chat error:",h);let y="Sorry, an error occurred. Please try again.",b=!1;h instanceof Error&&(h.message.includes("workers-ai-failed")||h.message.includes("AI service is at capacity")||h.message.includes("Rate limit exceeded")||h.message.includes("rate limit")||h.message.includes("Daily quota limit reached")||h.message.includes("AI service access denied")||h.message.includes("AI service is temporarily unavailable")||h.message.includes("AI service is not properly configured")||h.message.includes("Concurrency limit")||h.message.includes("concurrent"))&&(y=h.message.split(" - ")[0]||h.message,b=!0,je(y)),r(M=>M.map(k=>k.id===x.id?{...k,content:b?"":y,streaming:!1}:k)),b&&r(M=>M.filter(k=>k.id!==x.id))}finally{d(!1),Ne(!1)}},wn=async o=>{try{(await fetch(`/api/chat/documents/${o}`,{method:"DELETE"})).ok&&s(x=>x.filter(h=>h.id!==o))}catch(u){console.error("Failed to delete document:",u)}},vn=()=>{m(null),r([]),s([])},yn=o=>o<1024?o+" B":o<1024*1024?(o/1024).toFixed(1)+" KB":(o/(1024*1024)).toFixed(1)+" MB",jn=o=>{s(u=>u.map(x=>x.id===o?{...x,enabled:!x.enabled}:x))},Nn=o=>{const u=oe.find(x=>x.id===o);u&&(F(u),ge(!0))},bn=(o,u)=>{if(!u||u.length===0)return e.jsx("span",{className:"whitespace-pre-wrap",children:o});const x=o.split(/(\^\[\d+\])/g);return e.jsx("span",{className:"whitespace-pre-wrap",children:x.map((h,y)=>{const b=h.match(/\^\[(\d+)\]/);if(b){const M=parseInt(b[1]);return e.jsx("button",{onClick:()=>Nn(M),className:"inline-flex items-center justify-center w-5 h-5 text-xs rounded-full bg-primary/20 text-primary hover:bg-primary/30 transition-colors align-super ml-0.5",title:`View source ${M}`,children:M},y)}return e.jsx("span",{children:h},y)})})},Mn=async o=>{const u=t.findIndex(b=>b.id===o);if(u===-1)return;let x=u;if(t[u].role==="assistant"){for(let b=u-1;b>=0;b--)if(t[b].role==="user"){x=b;break}}const h=t[x].content,y=t[u].role==="assistant"?t[u].content:t[u+1]?.content||"";ye(o);try{const b=await fetch("/api/chat/share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:h,answer:y,citations:t[u].citations||oe})});if(b.ok){const M=await b.json();(te=>!!te&&typeof te=="object"&&typeof te.shareUrl=="string")(M)?(J(M.shareUrl),B(!0)):console.warn("Unexpected share payload")}else console.error("Failed to create share link")}catch(b){console.error("Error sharing message:",b)}finally{ye(null)}},Cn=async()=>{try{await navigator.clipboard.writeText(ve),se(!0),setTimeout(()=>se(!1),2e3)}catch(o){console.error("Failed to copy:",o)}},et=async o=>{if(!(!l||t.length===0))try{const u=await fetch("/api/chat/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:l,format:o})});if(u.ok){const x=await u.blob(),h=window.URL.createObjectURL(x),y=document.createElement("a");y.href=h,y.download=`conversation-${l}.${o==="markdown"?"md":"json"}`,document.body.appendChild(y),y.click(),window.URL.revokeObjectURL(h),document.body.removeChild(y)}else console.error("Failed to export conversation")}catch(u){console.error("Error exporting conversation:",u)}},Sn=async o=>{O(o),Z(!0);try{const u=await fetch(`/api/chat/documents/${o.id}`);if(u.ok){const x=await u.json();(y=>!!y&&typeof y=="object"&&("content"in y?typeof y.content=="string"||typeof y.content>"u":!0))(x)?ee(x.content||"No preview available"):(console.warn("Unexpected document content payload"),ee("No preview available"))}}catch(u){console.error("Failed to load document content:",u),ee("Failed to load document content")}},kn=o=>o.includes("image")?xr:o.includes("code")||o.includes("json")?fr:de,tt=n.filter(o=>o.name.toLowerCase().includes(A.toLowerCase()));return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-96 border-r bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(rt,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"NotebookLM"})]}),e.jsxs($n,{value:U,onValueChange:p,children:[e.jsxs(Gn,{className:"grid w-full grid-cols-3",children:[e.jsx(Ke,{value:"sources",children:"Sources"}),e.jsx(Ke,{value:"notebook",children:"Notebook"}),e.jsx(Ke,{value:"history",children:"History"})]}),e.jsx(Be,{value:"sources",className:"mt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Fe,{placeholder:"Search documents...",value:A,onChange:o=>T(o.target.value),className:"pl-9"})]}),e.jsx(Y,{className:"w-full gradient-metallic-primary",onClick:()=>P.current?.click(),disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wr,{className:"w-4 h-4 mr-2"}),"Add Sources"]})}),e.jsx(le,{className:"h-[calc(100vh-250px)]",children:e.jsx("div",{className:"space-y-2",children:tt.length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(yr,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No sources uploaded"}),e.jsx("p",{className:"text-xs mt-1",children:"Add documents to get started"})]}):tt.map(o=>{const u=kn(o.type);return e.jsx(Ce,{className:`p-3 cursor-pointer transition-all hover:shadow-md ${N?.id===o.id?"ring-2 ring-primary":""}`,onClick:()=>Sn(o),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(u,{className:"w-5 h-5 text-muted-foreground flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:o.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[yn(o.size)," • ",o.chunks," chunks"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Uploaded ",new Date(o.uploadedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Y,{variant:"ghost",size:"icon",className:"w-8 h-8",onClick:x=>{x.stopPropagation(),jn(o.id)},title:o.enabled?"Disable document":"Enable document",children:o.enabled?e.jsx(Rn,{className:"w-4 h-4"}):e.jsx(mr,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx(Y,{variant:"ghost",size:"icon",className:"w-8 h-8 hover:text-destructive",onClick:x=>{x.stopPropagation(),wn(o.id)},children:e.jsx(In,{className:"w-4 h-4"})})]})]})})]})},o.id)})})})]})}),e.jsx(Be,{value:"notebook",className:"mt-4",children:e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(ot,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Notebook coming soon"}),e.jsx("p",{className:"text-xs mt-1",children:"Your AI-generated notes and insights"})]})}),e.jsx(Be,{value:"history",className:"mt-4",children:e.jsx(le,{className:"h-[calc(100vh-250px)]",children:e.jsx("div",{className:"space-y-2",children:c.length===0?e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(ar,{className:"w-8 h-8 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No conversations yet"})]}):c.map(o=>e.jsxs("button",{onClick:()=>xn(o.id),className:`w-full text-left p-3 rounded-lg transition-all group relative ${o.id===l?"bg-gradient-to-r from-gradient-metal-start to-gradient-metal-end text-white shadow-sm":"hover:bg-muted/80"}`,children:[e.jsx("p",{className:`font-medium text-sm truncate ${o.id===l?"text-white":""}`,children:o.title}),e.jsx("p",{className:`text-xs truncate mt-1 ${o.id===l?"text-white/80":"text-muted-foreground"}`,children:o.lastMessage}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${o.id===l?"text-white/60":"text-muted-foreground"}`,children:[e.jsx(En,{className:"w-3 h-3"}),new Date(o.timestamp).toLocaleDateString()]})]},o.id))})})})]})]}),e.jsx("input",{ref:P,type:"file",multiple:!0,accept:".txt,.pdf,.doc,.docx,.md,.json,.csv",onChange:gn,className:"hidden"})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"border-b px-6 py-3 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ct,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"font-semibold",children:"AI Assistant"}),n.filter(o=>o.enabled).length>0&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",n.filter(o=>o.enabled).length," sources active)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Y,{onClick:vn,variant:"outline",size:"sm",children:[e.jsx(cr,{className:"w-4 h-4 mr-2"}),"New Chat"]}),l&&t.length>0&&e.jsxs(Po,{children:[e.jsx(Ao,{asChild:!0,children:e.jsx(Y,{variant:"ghost",size:"icon",children:e.jsx(Pn,{className:"w-4 h-4"})})}),e.jsxs(dn,{align:"end",children:[e.jsxs(Ve,{onClick:()=>et("markdown"),children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Export as Markdown"]}),e.jsxs(Ve,{onClick:()=>et("json"),children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Export as JSON"]})]})]})]})]})}),e.jsx(le,{className:"flex-1 px-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto py-6",children:[I&&e.jsxs(Tn,{variant:"warning",className:"mb-4",children:[e.jsx(or,{className:"h-4 w-4"}),e.jsx(On,{children:"AI Service Issue"}),e.jsxs(Fn,{children:[I,(I.includes("quota")||I.toLowerCase().includes("rate limit"))&&e.jsx("p",{className:"mt-2 text-sm",children:"Free tier limits: 100k requests/day, 20 requests/minute, 2 concurrent GPU jobs. Consider upgrading for better performance."}),I.includes("capacity")&&e.jsx("p",{className:"mt-2 text-sm",children:"The AI service is experiencing high demand. Please wait a moment and try again."}),(I.toLowerCase().includes("concurrent")||I.includes("Concurrency limit"))&&e.jsx("p",{className:"mt-2 text-sm",children:"The free tier allows only 2 concurrent AI requests. Your request has been queued and will process when a slot becomes available."})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-gradient-metal-start to-gradient-metal-end mb-4",children:e.jsx(it,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"How can I help you today?"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Upload documents and ask questions to get started"}),e.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[e.jsx(Ce,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>g("Summarize the key points from my documents"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rt,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Summarize documents"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get key insights from your sources"})]})]})}),e.jsx(Ce,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>g("Create an outline based on the main topics"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ot,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Generate outline"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Structure your content logically"})]})]})}),e.jsx(Ce,{className:"p-4 cursor-pointer hover:shadow-md transition-all",onClick:()=>g("What are the most important findings?"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ct,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-sm",children:"Extract insights"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Discover key findings and patterns"})]})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[t.map(o=>e.jsxs("div",{className:`flex gap-4 ${o.role==="assistant"?"":"justify-end"}`,children:[o.role==="assistant"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-gradient-metal-start to-gradient-metal-end flex items-center justify-center flex-shrink-0",children:e.jsx(it,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"relative rounded-2xl px-4 py-3 max-w-[80%] group bg-muted",children:[e.jsx("div",{className:"text-sm leading-relaxed",children:bn(o.content,o.citations)}),o.streaming&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Se,{className:"w-3 h-3 animate-spin text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"AI is typing..."})]}),o.role==="assistant"&&!o.streaming&&e.jsx("button",{onClick:()=>Mn(o.id),disabled:z===o.id,className:`absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity ${o.role==="assistant"?"text-muted-foreground hover:text-foreground":"text-white/70 hover:text-white"}`,title:"Share this Q&A",children:z===o.id?e.jsx(Se,{className:"w-4 h-4 animate-spin"}):e.jsx(st,{className:"w-4 h-4"})})]})]}),o.role==="user"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative rounded-2xl px-4 py-3 max-w-[80%] group bg-muted",children:e.jsx("div",{className:"text-sm leading-relaxed",children:o.content})}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0",children:e.jsx(An,{className:"w-5 h-5"})})]})]},o.id)),e.jsx("div",{ref:C})]})]})}),e.jsx("div",{className:"border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fe,{value:w,onChange:o=>g(o.target.value),onKeyPress:o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),Ze())},placeholder:L?"AI is responding...":"Ask a question about your documents...",disabled:f||L,className:"flex-1"}),e.jsx(Y,{onClick:Ze,disabled:f||L||!w.trim(),className:"gradient-metallic-primary flex-shrink-0",title:L?"Please wait for the current response to complete":"Send message",children:f||L?e.jsx(Se,{className:"w-4 h-4 animate-spin"}):e.jsx(Nr,{className:"w-4 h-4"})})]})})})})]}),e.jsx(Le,{open:V,onOpenChange:Z,children:e.jsxs(Ue,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx($e,{children:e.jsxs(Ge,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),N?.name]})}),e.jsx(le,{className:"flex-1 mt-4",children:e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:ae})})})]})}),e.jsx(Le,{open:Pe,onOpenChange:ge,children:e.jsxs(Ue,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[e.jsx($e,{children:e.jsxs(Ge,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Source: ",E?.documentName]})}),e.jsx(le,{className:"flex-1 mt-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"Relevance:"}),e.jsxs("span",{children:[E?(E.score*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm font-mono",children:E?.text})})]})})]})}),e.jsx(Le,{open:we,onOpenChange:B,children:e.jsxs(Ue,{className:"max-w-md",children:[e.jsx($e,{children:e.jsxs(Ge,{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-5 h-5"}),"Share This Conversation"]})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Anyone with this link can view this Q&A snippet. The link will expire in 30 days."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fe,{value:ve,readOnly:!0,className:"font-mono text-xs"}),e.jsx(Y,{onClick:Cn,variant:"outline",size:"icon",className:"flex-shrink-0",children:Q?e.jsx(ht,{className:"w-4 h-4 text-green-600"}):e.jsx(dr,{className:"w-4 h-4"})})]}),Q&&e.jsx("p",{className:"text-sm text-green-600",children:"Link copied to clipboard!"})]})]})})]})}export{hs as NotebookLMInterface};
//# sourceMappingURL=NotebookLMInterface.BP_QIX_j.js.map
