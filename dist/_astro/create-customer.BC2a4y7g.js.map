{"version":3,"file":"create-customer.BC2a4y7g.js","sources":["../../src/components/admin/create-customer.tsx"],"sourcesContent":["import { Button } from \"@/components/ui/button\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n  Form,\r\n  FormControl,\r\n  FormField,\r\n  FormItem,\r\n  FormLabel,\r\n  FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { Plus } from \"lucide-react\";\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { createCustomer } from \"@/lib/api\";\r\nimport * as z from \"zod\";\r\n\r\nconst formSchema = z.object({\r\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\r\n  email: z.string().email(\"Invalid email address\"),\r\n  notes: z.string().optional(),\r\n});\r\n\r\ntype FormValues = z.infer<typeof formSchema>;\r\n\r\nexport function CreateCustomerButton({ apiToken }: { apiToken: string }) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const form = useForm<FormValues>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: {\r\n      name: \"\",\r\n      email: \"\",\r\n      notes: \"\",\r\n    },\r\n  });\r\n\r\n  const onSubmit = async (data: FormValues) => {\r\n    try {\r\n      const url = new URL(window.location.href);\r\n      const response = await createCustomer(url.origin, apiToken, data);\r\n\r\n      if (!response.success) {\r\n        throw new Error(\"Failed to create customer\");\r\n      }\r\n\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(\"Error creating customer:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={setOpen}>\r\n      <DialogTrigger asChild>\r\n        <Button>\r\n          <Plus className=\"mr-2 h-4 w-4\" />\r\n          Create New Customer\r\n        </Button>\r\n      </DialogTrigger>\r\n      <DialogContent className=\"sm:max-w-[425px]\">\r\n        <DialogHeader>\r\n          <DialogTitle>Create New Customer</DialogTitle>\r\n        </DialogHeader>\r\n        <Form {...form}>\r\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n            <FormField\r\n              control={form.control}\r\n              name=\"name\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Name</FormLabel>\r\n                  <FormControl>\r\n                    <Input placeholder=\"Enter customer name\" {...field} />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"email\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Email</FormLabel>\r\n                  <FormControl>\r\n                    <Input\r\n                      type=\"email\"\r\n                      placeholder=\"Enter customer email\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <FormField\r\n              control={form.control}\r\n              name=\"notes\"\r\n              render={({ field }) => (\r\n                <FormItem>\r\n                  <FormLabel>Notes</FormLabel>\r\n                  <FormControl>\r\n                    <Textarea\r\n                      placeholder=\"Enter any additional notes\"\r\n                      {...field}\r\n                    />\r\n                  </FormControl>\r\n                  <FormMessage />\r\n                </FormItem>\r\n              )}\r\n            />\r\n\r\n            <Button className=\"w-full\" type=\"submit\">\r\n              Create Customer\r\n            </Button>\r\n          </form>\r\n        </Form>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":["formSchema","z.object","z.string","CreateCustomerButton","apiToken","open","setOpen","useState","form","useForm","zodResolver","onSubmit","data","url","createCustomer","error","jsxs","Dialog","jsx","DialogTrigger","Button","Plus","DialogContent","DialogHeader","DialogTitle","Form","FormField","field","FormItem","FormLabel","FormControl","Input","FormMessage","Textarea"],"mappings":"6oBAyBA,MAAMA,EAAaC,EAAS,CAC1B,KAAMC,EAAE,EAAS,IAAI,EAAG,oCAAoC,EAC5D,MAAOA,EAAE,EAAS,MAAM,uBAAuB,EAC/C,MAAOA,EAAE,EAAS,SAAA,CACpB,CAAC,EAIM,SAASC,EAAqB,CAAE,SAAAC,GAAkC,CACvE,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAS,EAAK,EAEhCC,EAAOC,EAAoB,CAC/B,SAAUC,EAAYV,CAAU,EAChC,cAAe,CACb,KAAM,GACN,MAAO,GACP,MAAO,EAAA,CACT,CACD,EAEKW,EAAW,MAAOC,GAAqB,CAC3C,GAAI,CACF,MAAMC,EAAM,IAAI,IAAI,OAAO,SAAS,IAAI,EAGxC,GAAI,EAFa,MAAMC,EAAeD,EAAI,OAAQT,EAAUQ,CAAI,GAElD,QACZ,MAAM,IAAI,MAAM,2BAA2B,EAG7C,OAAO,SAAS,OAAA,CAClB,OAASG,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,EAEA,OACEC,EAAAA,KAACC,EAAA,CAAO,KAAAZ,EAAY,aAAcC,EAChC,SAAA,CAAAY,MAACC,EAAA,CAAc,QAAO,GACpB,SAAAH,EAAAA,KAACI,EAAA,CACC,SAAA,CAAAF,EAAAA,IAACG,EAAA,CAAK,UAAU,cAAA,CAAe,EAAE,qBAAA,CAAA,CAEnC,CAAA,CACF,EACAL,EAAAA,KAACM,EAAA,CAAc,UAAU,mBACvB,SAAA,CAAAJ,MAACK,EAAA,CACC,SAAAL,EAAAA,IAACM,EAAA,CAAY,SAAA,qBAAA,CAAmB,EAClC,EACAN,EAAAA,IAACO,EAAA,CAAM,GAAGjB,EACR,SAAAQ,EAAAA,KAAC,OAAA,CAAK,SAAUR,EAAK,aAAaG,CAAQ,EAAG,UAAU,YACrD,SAAA,CAAAO,EAAAA,IAACQ,EAAA,CACC,QAASlB,EAAK,QACd,KAAK,OACL,OAAQ,CAAC,CAAE,MAAAmB,CAAA,WACRC,EAAA,CACC,SAAA,CAAAV,EAAAA,IAACW,GAAU,SAAA,MAAA,CAAI,EACfX,EAAAA,IAACY,GACC,SAAAZ,MAACa,EAAA,CAAM,YAAY,sBAAuB,GAAGJ,EAAO,CAAA,CACtD,QACCK,EAAA,CAAA,CAAY,CAAA,CAAA,CACf,CAAA,CAAA,EAIJd,EAAAA,IAACQ,EAAA,CACC,QAASlB,EAAK,QACd,KAAK,QACL,OAAQ,CAAC,CAAE,MAAAmB,CAAA,WACRC,EAAA,CACC,SAAA,CAAAV,EAAAA,IAACW,GAAU,SAAA,OAAA,CAAK,QACfC,EAAA,CACC,SAAAZ,EAAAA,IAACa,EAAA,CACC,KAAK,QACL,YAAY,uBACX,GAAGJ,CAAA,CAAA,EAER,QACCK,EAAA,CAAA,CAAY,CAAA,CAAA,CACf,CAAA,CAAA,EAIJd,EAAAA,IAACQ,EAAA,CACC,QAASlB,EAAK,QACd,KAAK,QACL,OAAQ,CAAC,CAAE,MAAAmB,CAAA,WACRC,EAAA,CACC,SAAA,CAAAV,EAAAA,IAACW,GAAU,SAAA,OAAA,CAAK,QACfC,EAAA,CACC,SAAAZ,EAAAA,IAACe,EAAA,CACC,YAAY,6BACX,GAAGN,CAAA,CAAA,EAER,QACCK,EAAA,CAAA,CAAY,CAAA,CAAA,CACf,CAAA,CAAA,QAIHZ,EAAA,CAAO,UAAU,SAAS,KAAK,SAAS,SAAA,iBAAA,CAEzC,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}