{"version":3,"file":"event.astro.mjs","sources":["../../../../../src/pages/a/api/event.ts"],"sourcesContent":["/**\r\n * Plausible Analytics Event Proxy Route\r\n * Handles analytics event tracking through our domain\r\n */\r\n\r\nimport type { APIRoute } from 'astro';\r\nimport { handlePlausibleEvent } from '../../../lib/analytics/plausible-proxy';\r\n\r\nexport const POST: APIRoute = async ({ request, locals }) => {\r\n  const env = (locals as any).runtime.env;\r\n  \r\n  const config = {\r\n    analyticsEnabled: env.ANALYTICS_ENABLED === 'true' || env.ANALYTICS_ENABLED === true,\r\n    plausibleDomain: env.PLAUSIBLE_DOMAIN,\r\n    dataDomain: env.DATA_DOMAIN,\r\n  };\r\n  \r\n  return await handlePlausibleEvent(request as any, config);\r\n};\r\n\r\nexport const OPTIONS: APIRoute = async ({ request, locals }) => {\r\n  const env = (locals as any).runtime.env;\r\n  \r\n  const config = {\r\n    analyticsEnabled: env.ANALYTICS_ENABLED === 'true' || env.ANALYTICS_ENABLED === true,\r\n    plausibleDomain: env.PLAUSIBLE_DOMAIN,\r\n    dataDomain: env.DATA_DOMAIN,\r\n  };\r\n  \r\n  return await handlePlausibleEvent(request as any, config);\r\n};"],"names":[],"mappings":";;;;AAQO,MAAM,IAAA,GAAiB,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AAC3D,EAAA,MAAM,GAAA,GAAO,OAAe,OAAA,CAAQ,GAAA;AAEpC,EAAA,MAAM,MAAA,GAAS;AAAA,IACb,gBAAA,EAAkB,GAAA,CAAI,iBAAA,KAAsB,MAAA,IAAU,IAAI,iBAAA,KAAsB,IAAA;AAAA,IAChF,iBAAiB,GAAA,CAAI,gBAAA;AAAA,IACrB,YAAY,GAAA,CAAI;AAAA,GAClB;AAEA,EAAA,OAAO,MAAM,oBAAA,CAAqB,OAAA,EAAgB,MAAM,CAAA;AAC1D,CAAA;AAEO,MAAM,OAAA,GAAoB,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AAC9D,EAAA,MAAM,GAAA,GAAO,OAAe,OAAA,CAAQ,GAAA;AAEpC,EAAA,MAAM,MAAA,GAAS;AAAA,IACb,gBAAA,EAAkB,GAAA,CAAI,iBAAA,KAAsB,MAAA,IAAU,IAAI,iBAAA,KAAsB,IAAA;AAAA,IAChF,iBAAiB,GAAA,CAAI,gBAAA;AAAA,IACrB,YAAY,GAAA,CAAI;AAAA,GAClB;AAEA,EAAA,OAAO,MAAM,oBAAA,CAAqB,OAAA,EAAgB,MAAM,CAAA;AAC1D,CAAA;;;;;;;;;;;;"}