{"version":3,"file":"pdf-viewer.astro2.mjs","sources":["../../../src/pages/pdf-viewer.astro"],"sourcesContent":["---\r\nimport Layout from '../layouts/Layout.astro';\r\nimport PDFAnnotator from '../components/pdf/PDFAnnotator.astro';\r\n\r\n// Get PDF URL from query params or use a default\r\nconst url = Astro.url;\r\nconst pdfUrl = url.searchParams.get('pdf') || '/sample.pdf';\r\nconst readOnly = url.searchParams.get('readonly') === 'true';\r\n\r\n// You can load initial annotations from a database or API here\r\nconst initialAnnotations = [];\r\n---\r\n\r\n<Layout title=\"PDF Annotator\">\r\n  <div class=\"container mx-auto py-8\">\r\n    <div class=\"mb-6\">\r\n      <h1 class=\"text-3xl font-bold mb-2\">PDF Annotator</h1>\r\n      <p class=\"text-gray-600\">\r\n        View and annotate PDF documents. Select text to highlight, add comments, and export your annotations.\r\n      </p>\r\n      <div class=\"mt-4 p-4 bg-blue-50 rounded-lg\">\r\n        <p class=\"text-sm text-blue-800\">\r\n          <strong>Tips:</strong>\r\n          <ul class=\"list-disc list-inside mt-2\">\r\n            <li>Select text to create a highlight</li>\r\n            <li>Hold Alt and drag to create area highlights</li>\r\n            <li>Click on highlights to view or edit comments</li>\r\n            <li>Use the toolbar to change highlight colors</li>\r\n            <li>Export annotations as JSON for backup</li>\r\n          </ul>\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <PDFAnnotator \r\n      pdfUrl={pdfUrl}\r\n      initialAnnotations={initialAnnotations}\r\n      readOnly={readOnly}\r\n      showToolbar={true}\r\n      height=\"calc(100vh - 300px)\"\r\n      className=\"shadow-lg rounded-lg\"\r\n    />\r\n  </div>\r\n\r\n  <script>\r\n    // Listen for annotation changes\r\n    document.addEventListener('pdf-annotations-change', (event: any) => {\r\n      console.log('Annotations changed:', event.detail.annotations);\r\n      // You can send these to your backend or store locally\r\n    });\r\n\r\n    // Listen for save events\r\n    document.addEventListener('pdf-annotations-save', async (event: any) => {\r\n      console.log('Saving annotations:', event.detail.annotations);\r\n      \r\n      try {\r\n        // Save to backend\r\n        const response = await fetch('/api/pdf-annotations', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            pdfUrl: new URLSearchParams(window.location.search).get('pdf'),\r\n            annotations: event.detail.annotations\r\n          }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          // Show success message\r\n          const toast = document.createElement('div');\r\n          toast.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg z-50';\r\n          toast.textContent = 'Annotations saved successfully!';\r\n          document.body.appendChild(toast);\r\n          \r\n          setTimeout(() => {\r\n            toast.remove();\r\n          }, 3000);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to save annotations:', error);\r\n        \r\n        // Show error message\r\n        const toast = document.createElement('div');\r\n        toast.className = 'fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded shadow-lg z-50';\r\n        toast.textContent = 'Failed to save annotations';\r\n        document.body.appendChild(toast);\r\n        \r\n        setTimeout(() => {\r\n          toast.remove();\r\n        }, 3000);\r\n      }\r\n    });\r\n  </script>\r\n</Layout>"],"names":["$$createAstro","$$createComponent","Astro","$$render","$$renderComponent","Layout","$$result","$$maybeRenderHead","PDFAnnotator","$$renderScript"],"mappings":";;;;;;AAAA,MAAA,UAAAA,WAAA,EAAA;AAAA,MAAA,WAAA,GAAAC,eAAA,CAAA,OAAA,QAAA,EAAA,SAAA,OAAA,KAAA;AAAA,EAAA,MAAAC,MAAAA,GAAA,QAAA,CAAA,WAAA,CAAA,OAAA,EAAA,SAAA,OAAA,CAAA;AAAA,EAAAA,OAAA,IAAA,GAAA,WAAA;AAKA,EAAA,MAAM,MAAMA,MAAAA,CAAM,GAAA;AAClB,EAAA,MAAM,MAAA,GAAS,GAAA,CAAI,YAAA,CAAa,GAAA,CAAI,KAAK,CAAA,IAAK,aAAA;AAC9C,EAAA,MAAM,QAAA,GAAW,GAAA,CAAI,YAAA,CAAa,GAAA,CAAI,UAAU,CAAA,KAAM,MAAA;AAGtD,EAAA,MAAM,qBAAqB,EAAC;AAV5B,EAAA,OAAAC,iBAAAC,eAAA,CAAA,QAAA,EAAA,QAAA,EAAAC,QAAA,EAAA,EAaQ,OAAA,EAbR,eAAA,EAAA,EAAA,EAAA,WAAA,OAAAC,SAAAA,KAAAH,cAAA,CAAA,CAAA,EAAAI,eAAA,CAAA,CAAA,CAAA;;uaAAAH,eAAA,CAAAE,SAAAA,EAAA,cAAA,EAAAE,cAAA,EAAA,EAmCM,QAAA,EAAQ,QACR,oBAAA,EAAoB,kBAAA,EACpB,UAAA,EAAU,QAAA,EACV,aAAA,EAAa,IAAA,EACb,UAAQ,qBAAA,EACR,WAAA,EAAW,sBAAA,EANZ,CAAA,CAAA,QAAA,EAUFC,YAAA,CAAAH,SAAAA,EAAA,yGAAA,CAAA,CAAA,CAAA,CAAA,EA5CH,CAAA,CAAA,CAAA;AAAA,CAAA,EAAA,yEAAA,MAAA,CAAA;;;;;;;;;;;;;;;;"}