{"version":3,"file":"status.astro.mjs","sources":["../../../../../src/pages/api/integrations/status.ts"],"sourcesContent":["import type { APIRoute } from 'astro';\n\nexport const GET: APIRoute = async ({ locals }) => {\n  try {\n    const runtime = locals.runtime as any;\n    const env = runtime.env;\n    \n    // Check each integration's configuration status\n    const [nextcloud, slack, email, webhook] = await Promise.all([\n      env.CACHE_KV.get('integration:nextcloud:config'),\n      env.CACHE_KV.get('integration:slack:config'),\n      env.CACHE_KV.get('integration:email:config'),\n      env.CACHE_KV.get('integration:webhook:config')\n    ]);\n    \n    const status = {\n      nextcloud: !!nextcloud,\n      slack: !!slack,\n      email: !!email,\n      webhook: !!webhook\n    };\n    \n    return new Response(JSON.stringify(status), {\n      status: 200,\n      headers: { 'Content-Type': 'application/json' }\n    });\n    \n  } catch (error) {\n    console.error('Error fetching integration status:', error);\n    return new Response(JSON.stringify({\n      nextcloud: false,\n      slack: false,\n      email: false,\n      webhook: false\n    }), {\n      status: 200,\n      headers: { 'Content-Type': 'application/json' }\n    });\n  }\n};"],"names":[],"mappings":";;;AAEO,MAAM,GAAA,GAAgB,OAAO,EAAE,MAAA,EAAO,KAAM;AACjD,EAAA,IAAI;AACF,IAAA,MAAM,UAAU,MAAA,CAAO,OAAA;AACvB,IAAA,MAAM,MAAM,OAAA,CAAQ,GAAA;AAGpB,IAAA,MAAM,CAAC,WAAW,KAAA,EAAO,KAAA,EAAO,OAAO,CAAA,GAAI,MAAM,QAAQ,GAAA,CAAI;AAAA,MAC3D,GAAA,CAAI,QAAA,CAAS,GAAA,CAAI,8BAA8B,CAAA;AAAA,MAC/C,GAAA,CAAI,QAAA,CAAS,GAAA,CAAI,0BAA0B,CAAA;AAAA,MAC3C,GAAA,CAAI,QAAA,CAAS,GAAA,CAAI,0BAA0B,CAAA;AAAA,MAC3C,GAAA,CAAI,QAAA,CAAS,GAAA,CAAI,4BAA4B;AAAA,KAC9C,CAAA;AAED,IAAA,MAAM,MAAA,GAAS;AAAA,MACb,SAAA,EAAW,CAAC,CAAC,SAAA;AAAA,MACb,KAAA,EAAO,CAAC,CAAC,KAAA;AAAA,MACT,KAAA,EAAO,CAAC,CAAC,KAAA;AAAA,MACT,OAAA,EAAS,CAAC,CAAC;AAAA,KACb;AAEA,IAAA,OAAO,IAAI,QAAA,CAAS,IAAA,CAAK,SAAA,CAAU,MAAM,CAAA,EAAG;AAAA,MAC1C,MAAA,EAAQ,GAAA;AAAA,MACR,OAAA,EAAS,EAAE,cAAA,EAAgB,kBAAA;AAAmB,KAC/C,CAAA;AAAA,EAEH,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,sCAAsC,KAAK,CAAA;AACzD,IAAA,OAAO,IAAI,QAAA,CAAS,IAAA,CAAK,SAAA,CAAU;AAAA,MACjC,SAAA,EAAW,KAAA;AAAA,MACX,KAAA,EAAO,KAAA;AAAA,MACP,KAAA,EAAO,KAAA;AAAA,MACP,OAAA,EAAS;AAAA,KACV,CAAA,EAAG;AAAA,MACF,MAAA,EAAQ,GAAA;AAAA,MACR,OAAA,EAAS,EAAE,cAAA,EAAgB,kBAAA;AAAmB,KAC/C,CAAA;AAAA,EACH;AACF,CAAA;;;;;;;;;;;"}