{"version":3,"file":"plausible.astro.mjs","sources":["../../../../../src/pages/api/analytics/plausible.ts"],"sourcesContent":["/**\r\n * Plausible Analytics API Route\r\n * Handles proxying of analytics requests through Cloudflare Workers\r\n */\r\n\r\nimport type { APIRoute } from 'astro';\r\nimport { handlePlausibleProxy } from '../../../lib/analytics/plausible-proxy';\r\n\r\nexport const ALL: APIRoute = async ({ request, locals }) => {\r\n  const env = (locals as any).runtime.env;\r\n  \r\n  try {\r\n    // Handle all Plausible proxy requests\r\n    return await handlePlausibleProxy(request as any, env);\r\n  } catch (error) {\r\n    console.error('Analytics proxy error:', error);\r\n    return new Response(JSON.stringify({ error: 'Analytics service error' }), {\r\n      status: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n// Support all HTTP methods\r\nexport const GET = ALL;\r\nexport const POST = ALL;\r\nexport const OPTIONS = ALL;"],"names":[],"mappings":";;;;AAQO,MAAM,GAAA,GAAgB,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AAC1D,EAAA,MAAM,GAAA,GAAO,OAAe,OAAA,CAAQ,GAAA;AAEpC,EAAA,IAAI;AAEF,IAAA,OAAO,MAAM,oBAAA,CAAqB,OAAA,EAAgB,GAAG,CAAA;AAAA,EACvD,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,0BAA0B,KAAK,CAAA;AAC7C,IAAA,OAAO,IAAI,SAAS,IAAA,CAAK,SAAA,CAAU,EAAE,KAAA,EAAO,yBAAA,EAA2B,CAAA,EAAG;AAAA,MACxE,MAAA,EAAQ,GAAA;AAAA,MACR,OAAA,EAAS;AAAA,QACP,cAAA,EAAgB;AAAA;AAClB,KACD,CAAA;AAAA,EACH;AACF,CAAA;AAGO,MAAM,GAAA,GAAM,GAAA;AACZ,MAAM,IAAA,GAAO,GAAA;AACb,MAAM,OAAA,GAAU,GAAA;;;;;;;;;;;;;;"}