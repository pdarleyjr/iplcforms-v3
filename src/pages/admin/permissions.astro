---
import Layout from '../../layouts/Layout.astro';
import { PermissionMatrix } from '../../components/admin/PermissionMatrix';

// For SSR: Check authentication and authorization
const customerId = Astro.cookies.get('customerId');
const customerRole = Astro.cookies.get('customerRole');

if (!customerId || customerRole?.value !== 'admin') {
  return Astro.redirect('/login');
}
---

<Layout title="Permission Management - Admin">
  <div class="container mx-auto py-8">
    <div class="mb-8">
      <h1 class="text-3xl font-bold">Permission Management</h1>
      <p class="text-muted-foreground mt-2">
        Configure role-based access control permissions
      </p>
    </div>

    <PermissionMatrix client:load />
  </div>
</Layout>